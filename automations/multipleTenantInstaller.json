{
    "blocks": [
      {
        "id": "BDF0F7F7-1448-4024-AAE3-A04C3E43957F",
        "type": "StartBlock",
        "disabled": false,
        "name": "Start",
        "displayName": "Start",
        "comment": "",
        "childId": "6D9EB158-C7A0-445B-9FC6-9A36EAFCDE60",
        "inputs": [
          {
            "id": "run_mode",
            "value": "manual",
            "type": "select",
            "structure": {}
          }
        ],
        "settings": [],
        "collapsed": [{ "name": "loop", "isCollapsed": false }],
        "x": 0,
        "y": 0
      },
      {
        "id": "52638FB0-8EE1-4B35-87DA-BC400AA00D04",
        "type": "CallUrlBlock",
        "disabled": false,
        "name": "callURL",
        "displayName": "Call URL",
        "comment": "Get list of apps to deploy",
        "childId": "6D7DB8F9-8555-45BF-9C10-E6092566A794",
        "inputs": [
          {
            "id": "url",
            "value": "{ $.manifestUrl }",
            "type": "string",
            "structure": []
          },
          { "id": "method", "value": "GET", "type": "select", "structure": [] },
          { "id": "timeout", "value": "", "type": "string", "structure": [] },
          {
            "id": "params",
            "value": null,
            "type": "object",
            "mode": "keyValue",
            "structure": []
          },
          {
            "id": "headers",
            "value": null,
            "type": "object",
            "mode": "keyValue",
            "structure": []
          },
          { "id": "encoding", "value": "", "type": "string", "structure": [] }
        ],
        "settings": [
          {
            "id": "blendr_on_error",
            "value": "stop",
            "type": "select",
            "structure": []
          },
          {
            "id": "full_response",
            "value": null,
            "type": "checkbox",
            "structure": []
          },
          {
            "id": "capitalize_headers",
            "value": true,
            "type": "checkbox",
            "structure": []
          },
          {
            "id": "automations_censor_data",
            "value": false,
            "type": "checkbox",
            "structure": []
          }
        ],
        "collapsed": [{ "name": "loop", "isCollapsed": false }],
        "x": 396,
        "y": 2995
      },
      {
        "id": "1FC63304-4689-4FEF-9D39-5AF06D38574E",
        "type": "VariableBlock",
        "disabled": false,
        "name": "tenantList",
        "displayName": "Variable - tenantList",
        "comment": "Load the list of tenants",
        "childId": "ACA726EB-6C99-4E47-A309-2AA1C150A1F4",
        "inputs": [],
        "settings": [],
        "collapsed": [{ "name": "loop", "isCollapsed": false }],
        "x": 418,
        "y": 1947,
        "variableGuid": "47CCFA4B-0ADC-40F3-95AC-FCEDD886EC94",
        "operations": [
          {
            "id": "merge",
            "key": "196D3458-253C-4281-A086-1071C28EA467",
            "name": "Merge other list into { variable }",
            "value": "{ $.listTermsByGlossary }",
            "allow_duplicates": "no"
          },
          {
            "id": "add_item",
            "key": "25824D48-EDD2-4A93-A8F4-AD030FF21EA3",
            "name": "Add item to { variable }",
            "value": "{ object: '{\"name\":\"{ $.parentTenant }\"}' }"
          }
        ]
      },
      {
        "id": "CB0B8A73-1611-4459-8D99-5ECCFF2B7391",
        "type": "ForEachBlock",
        "disabled": false,
        "name": "loop",
        "displayName": "Loop",
        "comment": "Loop over tenant list",
        "childId": "DB689B64-8C0B-4FF5-96B4-80106AC2A2CB",
        "inputs": [
          {
            "id": "input",
            "value": "{$.tenantList}",
            "type": "string",
            "structure": []
          }
        ],
        "settings": [
          {
            "id": "automations_censor_data",
            "value": false,
            "type": "checkbox",
            "structure": []
          }
        ],
        "collapsed": [{ "name": "loop", "isCollapsed": false }],
        "x": 0,
        "y": 6140,
        "loopBlockId": "794E01BA-DF4F-437F-B709-6C252169791B"
      },
      {
        "id": "F1DB0E91-A51C-40FE-BFF4-78D4A7CE57EA",
        "type": "CallUrlBlock",
        "disabled": false,
        "name": "callURL2",
        "displayName": "Call URL 2",
        "comment": "",
        "childId": "1380FD6C-FD36-4B22-B885-322B071DA973",
        "inputs": [
          {
            "id": "url",
            "value": "{$.filterList6.item.source}",
            "type": "string",
            "structure": []
          },
          { "id": "method", "value": "GET", "type": "select", "structure": [] },
          { "id": "timeout", "value": "", "type": "string", "structure": [] },
          {
            "id": "params",
            "value": null,
            "type": "object",
            "mode": "keyValue",
            "structure": []
          },
          {
            "id": "headers",
            "value": [],
            "type": "object",
            "mode": "keyValue",
            "structure": []
          },
          { "id": "encoding", "value": "", "type": "string", "structure": [] }
        ],
        "settings": [
          {
            "id": "blendr_on_error",
            "value": "stop",
            "type": "select",
            "structure": []
          },
          {
            "id": "full_response",
            "value": null,
            "type": "checkbox",
            "structure": []
          },
          {
            "id": "capitalize_headers",
            "value": true,
            "type": "checkbox",
            "structure": []
          },
          {
            "id": "automations_censor_data",
            "value": false,
            "type": "checkbox",
            "structure": []
          }
        ],
        "collapsed": [{ "name": "loop", "isCollapsed": false }],
        "x": 120,
        "y": 1820
      },
      {
        "id": "ABF45FFC-7945-4244-9A90-22FE024FDF10",
        "type": "VariableBlock",
        "disabled": false,
        "name": "appList",
        "displayName": "Variable - appList",
        "comment": "",
        "childId": "F91709AC-C27A-46E1-AB38-122EE9E68615",
        "inputs": [],
        "settings": [],
        "collapsed": [{ "name": "loop", "isCollapsed": false }],
        "x": 120,
        "y": 700,
        "variableGuid": "CC701ED4-984D-4E17-896A-89FA869476A3",
        "operations": [
          {
            "id": "add_item",
            "key": "2E1E98CD-EDC8-4103-A2AD-260AC805B3CA",
            "name": "Add item to { variable }",
            "value": "{$.appSource}"
          }
        ]
      },
      {
        "id": "1380FD6C-FD36-4B22-B885-322B071DA973",
        "type": "VariableBlock",
        "disabled": false,
        "name": "appSource",
        "displayName": "Variable - appSource",
        "comment": "",
        "childId": "ABF45FFC-7945-4244-9A90-22FE024FDF10",
        "inputs": [],
        "settings": [],
        "collapsed": [{ "name": "loop", "isCollapsed": false }],
        "x": 370,
        "y": 700,
        "variableGuid": "F08D6858-C076-408D-A99B-C4DE12BFBF37",
        "operations": [
          {
            "id": "empty",
            "key": "C88F2535-F30A-4CDB-91EA-32B48F537866",
            "name": "Empty { variable }",
            "value": null
          },
          {
            "id": "set_key_value",
            "key": "5BA42568-FBB6-4E64-B888-D6A5335CE732",
            "name": "Set key/values of { variable }",
            "value": [
              { "key": "id", "value": "{$.filterList6.item.id}" },
              { "key": "file", "value": "{base64encode: {$.callURL2}}" }
            ]
          }
        ]
      },
      {
        "id": "2B9B4334-2422-414B-972E-B3184EAC9735",
        "type": "EndpointBlock",
        "disabled": false,
        "name": "GetUserId",
        "displayName": "Qlik Platform Operations - Get User Id",
        "comment": "",
        "childId": "E81E41DC-7B6E-4A0C-A03B-0A8A50933733",
        "inputs": [
          {
            "id": "7a60eb60-9ca9-11ed-babd-3fa6b11b1f7e",
            "value": "{$.loopTenant}",
            "type": "string",
            "structure": []
          }
        ],
        "settings": [
          {
            "id": "datasource",
            "value": "e649bbb1-4b70-42fa-88ee-11d1aa9a7119",
            "type": "select",
            "structure": []
          },
          {
            "id": "blendr_on_error",
            "value": "warning",
            "type": "select",
            "displayValue": "Warning - Continue Automation and report errors",
            "structure": []
          },
          { "id": "cache", "value": "0", "type": "select", "structure": [] },
          {
            "id": "automations_censor_data",
            "value": false,
            "type": "checkbox",
            "structure": []
          }
        ],
        "collapsed": [{ "name": "loop", "isCollapsed": false }],
        "x": 120,
        "y": 4280,
        "datasourcetype_guid": "c7e48240-e0f2-11ec-ada1-d5ef75014b77",
        "endpoint_guid": "7a3d4810-9ca9-11ed-b53f-076542389b5b",
        "endpoint_role": "get"
      },
      {
        "id": "96E85558-3846-4E9B-AE3D-FAB9CB5EBE2F",
        "type": "EndpointBlock",
        "disabled": false,
        "name": "createAPIKey",
        "displayName": "Qlik Platform Operations - Create API Key",
        "comment": "Create API key for use by monitoring apps (recommended to exclude from logs)",
        "childId": "0B055B29-89B7-4FFB-9A17-B6B004941D72",
        "inputs": [
          {
            "id": "b94fae10-7aea-11ed-8b86-6b8d314bea2b",
            "value": "{$.loopTenant}",
            "type": "string",
            "structure": []
          },
          {
            "id": "892e58f0-7aeb-11ed-a055-573186eafbfa",
            "value": "{if: { $.setMaxApiKey } notEmpty , $.setMaxApiKey, $.GetAPIKeySettings2.max_api_key_expiry}",
            "type": "select",
            "structure": []
          },
          {
            "id": "b5764f10-7aeb-11ed-8780-21db9ec3e570",
            "value": "{ $.restConnectorName }-{ $.loopTenant }",
            "type": "string",
            "structure": []
          }
        ],
        "settings": [
          {
            "id": "datasource",
            "value": "e649bbb1-4b70-42fa-88ee-11d1aa9a7119",
            "type": "select",
            "structure": []
          },
          {
            "id": "blendr_on_error",
            "value": "stop",
            "type": "select",
            "structure": []
          },
          {
            "id": "automations_censor_data",
            "value": true,
            "type": "checkbox",
            "structure": []
          }
        ],
        "collapsed": [{ "name": "loop", "isCollapsed": false }],
        "x": 360,
        "y": 9580,
        "datasourcetype_guid": "c7e48240-e0f2-11ec-ada1-d5ef75014b77",
        "endpoint_guid": "b92fb7f0-7aea-11ed-8256-99fbe90dc9aa",
        "endpoint_role": "create"
      },
      {
        "id": "F09A85E5-6A42-4C1F-BFB6-BCA33EA36110",
        "type": "EndpointBlock",
        "disabled": false,
        "name": "listAPIKeys",
        "displayName": "Qlik Platform Operations - List API Keys",
        "comment": "",
        "childId": "90B4E0A4-FB1E-4497-A8C7-C3E4F26BD374",
        "inputs": [
          {
            "id": "475af100-7ae7-11ed-9999-8df76eade1c8",
            "value": "{$.loopTenant}",
            "type": "string",
            "structure": []
          },
          {
            "id": "7a97d250-d4a4-11ee-aa2b-198465b93046",
            "value": "{$.GetUserId}",
            "type": "string",
            "structure": []
          },
          {
            "id": "745a7750-d4a5-11ee-a862-9d56bdeaa72c",
            "value": null,
            "type": "select",
            "structure": []
          },
          {
            "id": "a049ab60-d4a5-11ee-b22d-216c8cac0f63",
            "value": null,
            "type": "string",
            "structure": []
          }
        ],
        "settings": [
          {
            "id": "datasource",
            "value": "e649bbb1-4b70-42fa-88ee-11d1aa9a7119",
            "type": "select",
            "structure": []
          },
          {
            "id": "maxitemcount",
            "value": "",
            "type": "string",
            "structure": []
          },
          {
            "id": "blendr_on_error",
            "value": "stop",
            "type": "select",
            "structure": []
          },
          { "id": "cache", "value": "0", "type": "select", "structure": [] },
          {
            "id": "automations_censor_data",
            "value": false,
            "type": "checkbox",
            "structure": []
          }
        ],
        "collapsed": [{ "name": "loop", "isCollapsed": true }],
        "x": 892,
        "y": 8563,
        "loopBlockId": null,
        "datasourcetype_guid": "c7e48240-e0f2-11ec-ada1-d5ef75014b77",
        "endpoint_guid": "4736fde0-7ae7-11ed-9273-9b579aaccda3",
        "endpoint_role": "list"
      },
      {
        "id": "5D55A1FE-33AD-4836-A22C-51B2B90B3AC4",
        "type": "EndpointBlock",
        "disabled": false,
        "name": "DeleteAPIKey",
        "displayName": "Qlik Platform Operations - Delete API Key",
        "comment": "",
        "childId": null,
        "inputs": [
          {
            "id": "21717f70-24c8-11ef-bdaf-cb21684c8f37",
            "value": "{$.loopTenant}",
            "type": "string",
            "structure": []
          },
          {
            "id": "217da9e0-24c8-11ef-9866-b7eed31c0eca",
            "value": "{ $.filterList2.item.id }",
            "type": "string",
            "structure": []
          }
        ],
        "settings": [
          {
            "id": "datasource",
            "value": "e649bbb1-4b70-42fa-88ee-11d1aa9a7119",
            "type": "select",
            "structure": []
          },
          {
            "id": "blendr_on_error",
            "value": "stop",
            "type": "select",
            "structure": []
          },
          {
            "id": "automations_censor_data",
            "value": false,
            "type": "checkbox",
            "structure": []
          }
        ],
        "collapsed": [{ "name": "loop", "isCollapsed": false }],
        "x": 480,
        "y": 4060,
        "datasourcetype_guid": "c7e48240-e0f2-11ec-ada1-d5ef75014b77",
        "endpoint_guid": "21664090-24c8-11ef-a986-0f4e2eea17f8",
        "endpoint_role": "delete"
      },
      {
        "id": "429EDB83-94EB-40EE-9E60-DBA2E8A2A63C",
        "type": "VariableBlock",
        "disabled": false,
        "name": "targetString",
        "displayName": "Variable - targetString",
        "comment": "",
        "childId": null,
        "inputs": [],
        "settings": [],
        "collapsed": [{ "name": "loop", "isCollapsed": false }],
        "x": 1570,
        "y": 12362,
        "variableGuid": "78C37A26-6056-40F7-A857-E84298458883",
        "operations": [
          {
            "id": "set_value",
            "key": "AF1A1AA1-D4D2-4FA6-AE3A-8636BB541D12",
            "name": "Set value of { variable }",
            "value": "SET vu_is_parent_app = 1; // comment out rest of this line"
          }
        ]
      },
      {
        "id": "A2CE8FB8-3618-4878-BE51-48F7DEB8ED0C",
        "type": "IfElseBlock",
        "disabled": false,
        "name": "condition6",
        "displayName": "Condition 6",
        "comment": "If a user id is returned, continue",
        "childId": null,
        "inputs": [
          {
            "id": "conditions",
            "value": {
              "mode": "all",
              "conditions": [
                {
                  "input1": "{$.GetUserId}",
                  "input2": null,
                  "operator": "notEmpty"
                }
              ]
            },
            "type": "custom",
            "structure": []
          }
        ],
        "settings": [],
        "collapsed": [
          { "name": "both", "isCollapsed": false },
          { "name": "yes", "isCollapsed": false },
          { "name": "no", "isCollapsed": false }
        ],
        "x": -398,
        "y": 1875,
        "childTrueId": "8E9BCCD1-AFED-4A60-A694-B706B4A2B37D",
        "childFalseId": "5FE6B65F-FA10-44E0-A038-536C3D312A9C"
      },
      {
        "id": "930EFB6D-C9E0-48D4-8929-03FDC6703512",
        "type": "ShowBlock",
        "disabled": false,
        "name": "output",
        "displayName": "Output",
        "comment": "",
        "childId": null,
        "inputs": [
          {
            "id": "input",
            "value": "{ $.outputRow }",
            "type": "string",
            "structure": []
          }
        ],
        "settings": [
          {
            "id": "display_mode",
            "value": "add",
            "type": "select",
            "structure": []
          }
        ],
        "collapsed": [{ "name": "loop", "isCollapsed": false }],
        "x": 120,
        "y": 14920
      },
      {
        "id": "A170315C-9FB8-4A19-A2BD-B377EEFCD93B",
        "type": "UpdateJobBlock",
        "disabled": false,
        "name": "updateRunTitle",
        "displayName": "Update Run Title",
        "comment": "",
        "childId": "A2CE8FB8-3618-4878-BE51-48F7DEB8ED0C",
        "inputs": [
          {
            "id": "title",
            "value": "Deploying {$.loopTenantType} apps for {$.iter}/{count: {$.tenantList}} [{$.loopTenant}]",
            "type": "string",
            "structure": []
          }
        ],
        "settings": [
          {
            "id": "automations_censor_data",
            "value": false,
            "type": "checkbox",
            "structure": []
          }
        ],
        "collapsed": [{ "name": "loop", "isCollapsed": false }],
        "x": 120,
        "y": 5240
      },
      {
        "id": "E81E41DC-7B6E-4A0C-A03B-0A8A50933733",
        "type": "VariableBlock",
        "disabled": false,
        "name": "iter",
        "displayName": "Variable - iter",
        "comment": "",
        "childId": "A170315C-9FB8-4A19-A2BD-B377EEFCD93B",
        "inputs": [],
        "settings": [],
        "collapsed": [{ "name": "loop", "isCollapsed": false }],
        "x": 240,
        "y": 2260,
        "variableGuid": "469E38D5-E35C-4E16-A02B-783248CA9FE3",
        "operations": [
          {
            "id": "add",
            "key": "34D62FC1-146E-4C3D-989C-3A625D294C7A",
            "name": "Add to { variable }",
            "value": "1"
          }
        ]
      },
      {
        "id": "D1028969-2CEC-4E00-9942-861D91055273",
        "type": "VariableBlock",
        "disabled": false,
        "name": "iter",
        "displayName": "Variable - iter",
        "comment": "Tenant iterator",
        "childId": "C630467A-9757-4112-BAC2-B0E0214C5623",
        "inputs": [],
        "settings": [],
        "collapsed": [{ "name": "loop", "isCollapsed": false }],
        "x": 17,
        "y": 4252,
        "variableGuid": "469E38D5-E35C-4E16-A02B-783248CA9FE3",
        "operations": [
          {
            "id": "set_value",
            "key": "46CFD80F-1E11-4955-9EE7-F2A2C9C7DCC5",
            "name": "Set value of { variable }",
            "value": "0"
          }
        ]
      },
      {
        "id": "6D9EB158-C7A0-445B-9FC6-9A36EAFCDE60",
        "type": "VariableBlock",
        "disabled": false,
        "name": "sharedSpaceName",
        "displayName": "Variable - sharedSpaceName",
        "comment": "Set the name of the shared space into which parent apps will be deployed. Child apps will land in a shared space suffixed with the tenant hostname.",
        "childId": "989B5186-B49C-48C4-8E23-2E264E8FB2E5",
        "inputs": [],
        "settings": [],
        "collapsed": [{ "name": "loop", "isCollapsed": false }],
        "x": 0,
        "y": 240,
        "variableGuid": "201224E7-61F1-4C18-8918-D9C8AF71886C",
        "operations": [
          {
            "id": "set_value",
            "key": "78513C8F-63B3-42ED-A30D-A207EEF04276",
            "name": "Set value of { variable }",
            "value": "Monitoring"
          }
        ]
      },
      {
        "id": "B97E3A59-5759-42A4-9B63-BEF5CDA6BA04",
        "type": "EndpointBlock",
        "disabled": false,
        "name": "listDataConnections",
        "displayName": "Qlik Platform Operations - List Data Connections",
        "comment": "Check for existing REST connection",
        "childId": "99E8F459-3747-4D47-A931-A2447280294B",
        "inputs": [
          {
            "id": "8adf5d40-ce38-11ed-9a06-d1c545d3551c",
            "value": "{ $.parentTenant }",
            "type": "string",
            "structure": []
          },
          {
            "id": "57099e30-d912-11ed-a2a7-af3e440df542",
            "value": "{ $.createSpaceIfNotExisting.id }",
            "type": "string",
            "structure": []
          },
          {
            "id": "b8811980-d4aa-11ee-acfa-f5aad0dfefc5",
            "value": null,
            "type": "select",
            "structure": []
          },
          {
            "id": "e6a52ea0-d4aa-11ee-8076-bd598be61128",
            "value": null,
            "type": "select",
            "structure": []
          },
          {
            "id": "09faa860-d4ab-11ee-bbe2-fdb4465a50d8",
            "value": null,
            "type": "string",
            "structure": []
          },
          {
            "id": "1ad40f40-d4ab-11ee-8f74-67285123f24a",
            "value": null,
            "type": "select",
            "structure": []
          },
          {
            "id": "7aeba3a0-d4ab-11ee-b3fb-8da64e599e8c",
            "value": "7eb95910-d4ab-11ee-8c08-0d0b2c7b4c21",
            "type": "select",
            "displayValue": "true",
            "structure": []
          },
          {
            "id": "92386040-d4ab-11ee-8c5b-b5e7c44e6de1",
            "value": null,
            "type": "string",
            "structure": []
          },
          {
            "id": "aa76a010-d4ab-11ee-9048-cfcc20f590ad",
            "value": null,
            "type": "select",
            "structure": []
          },
          {
            "id": "bb611d70-d4ac-11ee-8745-3b56fe623b7f",
            "value": null,
            "type": "string",
            "structure": []
          }
        ],
        "settings": [
          {
            "id": "datasource",
            "value": "e649bbb1-4b70-42fa-88ee-11d1aa9a7119",
            "type": "select",
            "structure": []
          },
          {
            "id": "maxitemcount",
            "value": "",
            "type": "string",
            "structure": []
          },
          {
            "id": "blendr_on_error",
            "value": "stop",
            "type": "select",
            "structure": []
          },
          { "id": "cache", "value": "0", "type": "select", "structure": [] },
          {
            "id": "automations_censor_data",
            "value": false,
            "type": "checkbox",
            "structure": []
          }
        ],
        "collapsed": [{ "name": "loop", "isCollapsed": true }],
        "x": 770,
        "y": 5432,
        "loopBlockId": null,
        "datasourcetype_guid": "c7e48240-e0f2-11ec-ada1-d5ef75014b77",
        "endpoint_guid": "8accd9c0-ce38-11ed-a5b4-974f79a4f39f",
        "endpoint_role": "list"
      },
      {
        "id": "0FB8C177-55A1-4825-BAB1-0A69866AC91F",
        "type": "IfElseBlock",
        "disabled": false,
        "name": "condition8",
        "displayName": "Condition 8",
        "comment": "If REST data connection needs recreating (not found, or deleted)",
        "childId": null,
        "inputs": [
          {
            "id": "conditions",
            "value": {
              "mode": "some",
              "conditions": [
                {
                  "input1": "{ $.listDataConnections[*].qName }",
                  "input2": "{ $.restConnectorName }-{ $.loopTenant }",
                  "operator": "doesntContain"
                },
                {
                  "input1": "{ $.recreateConnections }",
                  "input2": "1",
                  "operator": "="
                }
              ]
            },
            "type": "custom",
            "structure": []
          }
        ],
        "settings": [],
        "collapsed": [
          { "name": "both", "isCollapsed": false },
          { "name": "yes", "isCollapsed": false },
          { "name": "no", "isCollapsed": false }
        ],
        "x": 240,
        "y": 6460,
        "childTrueId": "BBD1BB72-9BEC-464D-9268-A6F930619AA1",
        "childFalseId": "BC0FE9D3-F9F8-4397-A0CC-FFEDA087A21A"
      },
      {
        "id": "DB689B64-8C0B-4FF5-96B4-80106AC2A2CB",
        "type": "ShowBlock",
        "disabled": false,
        "name": "output7",
        "displayName": "Output 7",
        "comment": "",
        "childId": "65907A69-1095-426C-BF99-AE79754EF6B6",
        "inputs": [
          {
            "id": "input",
            "value": "Deployed {$.iterApps} monitoring apps on {$.iter} tenants.",
            "type": "string",
            "structure": []
          }
        ],
        "settings": [
          {
            "id": "display_mode",
            "value": "add",
            "type": "select",
            "structure": []
          }
        ],
        "collapsed": [{ "name": "loop", "isCollapsed": false }],
        "x": 0,
        "y": 15240
      },
      {
        "id": "65907A69-1095-426C-BF99-AE79754EF6B6",
        "type": "UpdateJobBlock",
        "disabled": false,
        "name": "updateRunTitle3",
        "displayName": "Update Run Title 3",
        "comment": "",
        "childId": null,
        "inputs": [
          {
            "id": "title",
            "value": "Deployed {$.iterApps} monitoring apps on {$.iter} tenants.",
            "type": "string",
            "structure": []
          }
        ],
        "settings": [
          {
            "id": "automations_censor_data",
            "value": false,
            "type": "checkbox",
            "structure": []
          }
        ],
        "collapsed": [{ "name": "loop", "isCollapsed": false }],
        "x": -366,
        "y": 13710
      },
      {
        "id": "794E01BA-DF4F-437F-B709-6C252169791B",
        "type": "VariableBlock",
        "disabled": false,
        "name": "loopTenant",
        "displayName": "Variable - loopTenant",
        "comment": "Get hostname for targeted tenant",
        "childId": "5DAB135A-A166-493A-B647-8A6DC18E6764",
        "inputs": [],
        "settings": [],
        "collapsed": [{ "name": "loop", "isCollapsed": false }],
        "x": 120,
        "y": 3300,
        "variableGuid": "AFCCC997-C4F7-4B12-84F8-A87D8EA34023",
        "operations": [
          {
            "id": "set_value",
            "key": "4424D5FB-85D7-4ED5-90EB-A2B45FF3DF50",
            "name": "Set value of { variable }",
            "value": "{$.loop.item.hostname}"
          }
        ]
      },
      {
        "id": "8E9BCCD1-AFED-4A60-A694-B706B4A2B37D",
        "type": "SnippetBlock",
        "disabled": false,
        "name": "createSpaceIfNotExisting",
        "displayName": "Qlik Platform Operations - Create Space If Not Existing",
        "comment": "",
        "childId": "20FF7791-E1CB-472C-A0CF-6E1EC463E62E",
        "inputs": [
          {
            "id": "81071cf0-0b7f-11ee-805d-df260e5bbd58",
            "value": "{$.parentTenant}",
            "type": "string",
            "structure": []
          },
          {
            "id": "8107d590-0b7f-11ee-99e9-1f2e6b5cddb8",
            "value": "{$.loopSpaceName}",
            "type": "string",
            "structure": []
          },
          {
            "id": "81084d60-0b7f-11ee-a82b-7dda2b403efe",
            "value": "shared",
            "type": "select",
            "displayValue": "shared",
            "structure": []
          },
          {
            "id": "f5a723a0-2d77-11ef-b735-db73a23b6ee2",
            "value": "true",
            "type": "select",
            "displayValue": "true",
            "structure": []
          },
          {
            "id": "f5a7ce30-2d77-11ef-9b27-fb010d8ec470",
            "value": "Deployed by the multiple tenant monitoring app installer (ID: [{automationid}], name: [{automationname}], run: [{runid}], version: [{ $.qcmamtVersion }]).",
            "type": "string",
            "structure": []
          }
        ],
        "settings": [
          {
            "id": "datasource",
            "value": "e649bbb1-4b70-42fa-88ee-11d1aa9a7119",
            "type": "select",
            "structure": []
          },
          {
            "id": "blendr_on_error",
            "value": "stop",
            "type": "select",
            "structure": []
          },
          {
            "id": "automations_censor_data",
            "value": false,
            "type": "checkbox",
            "structure": []
          }
        ],
        "collapsed": [{ "name": "loop", "isCollapsed": false }],
        "x": 240,
        "y": 7360,
        "datasourcetype_guid": "c7e48240-e0f2-11ec-ada1-d5ef75014b77",
        "snippet_guid": "1235c1c0-0b7f-11ee-8218-8b26bad2c475"
      },
      {
        "id": "8F905835-3240-4683-9936-ECF53AEB190B",
        "type": "VariableBlock",
        "disabled": false,
        "name": "restConnectorName",
        "displayName": "Variable - restConnectorName",
        "comment": "Set the name of the REST connector to deploy to child app spaces",
        "childId": "4AAE24C2-3138-498A-9380-F4C69C35524B",
        "inputs": [],
        "settings": [],
        "collapsed": [{ "name": "loop", "isCollapsed": false }],
        "x": 223.62066593534504,
        "y": 761.3698231980388,
        "variableGuid": "8020627D-CEE4-4E7E-A665-387EC0A7ED59",
        "operations": [
          {
            "id": "set_value",
            "key": "A223CB38-2584-4C22-9A30-5CD06D7DCEDA",
            "name": "Set value of { variable }",
            "value": "monitoring_apps_REST"
          }
        ]
      },
      {
        "id": "BBD1BB72-9BEC-464D-9268-A6F930619AA1",
        "type": "SnippetBlock",
        "disabled": false,
        "name": "AddRoleToUserByName",
        "displayName": "Qlik Platform Operations - Add Role To User By Name",
        "comment": "",
        "childId": "8177D878-AE56-401E-983A-2FF12D249DB4",
        "inputs": [
          {
            "id": "13c0e700-b538-11ee-b334-c52e01847d55",
            "value": "{$.loopTenant}",
            "type": "string",
            "structure": []
          },
          {
            "id": "93bbd250-c5b7-11ee-8580-830b3cf7953d",
            "value": "{ $.GetUserId }",
            "type": "string",
            "structure": []
          },
          {
            "id": "13c24330-b538-11ee-b9e5-431b0ec6e3c8",
            "value": "Developer",
            "type": "string",
            "structure": []
          }
        ],
        "settings": [
          {
            "id": "datasource",
            "value": "e649bbb1-4b70-42fa-88ee-11d1aa9a7119",
            "type": "select",
            "structure": []
          },
          {
            "id": "blendr_on_error",
            "value": "stop",
            "type": "select",
            "structure": []
          },
          {
            "id": "automations_censor_data",
            "value": false,
            "type": "checkbox",
            "structure": []
          }
        ],
        "collapsed": [{ "name": "loop", "isCollapsed": false }],
        "x": 988,
        "y": 6218,
        "datasourcetype_guid": "c7e48240-e0f2-11ec-ada1-d5ef75014b77",
        "snippet_guid": "13b60e00-b538-11ee-8db4-7f4aeae7104c"
      },
      {
        "id": "8177D878-AE56-401E-983A-2FF12D249DB4",
        "type": "SnippetBlock",
        "disabled": false,
        "name": "GetAPIKeySettings2",
        "displayName": "Qlik Platform Operations - Get API Key Settings 2",
        "comment": "",
        "childId": "33E323BF-67C3-4FF0-A19D-AB95FB0A1FCE",
        "inputs": [
          {
            "id": "c1cf3950-b5fb-11ee-b6b4-29ac39a27018",
            "value": "{$.loopTenant}",
            "type": "string",
            "structure": []
          }
        ],
        "settings": [
          {
            "id": "datasource",
            "value": "e649bbb1-4b70-42fa-88ee-11d1aa9a7119",
            "type": "select",
            "structure": []
          },
          {
            "id": "blendr_on_error",
            "value": "stop",
            "type": "select",
            "structure": []
          },
          {
            "id": "automations_censor_data",
            "value": false,
            "type": "checkbox",
            "structure": []
          }
        ],
        "collapsed": [{ "name": "loop", "isCollapsed": false }],
        "x": 636,
        "y": 3534,
        "datasourcetype_guid": "c7e48240-e0f2-11ec-ada1-d5ef75014b77",
        "snippet_guid": "c1c787a0-b5fb-11ee-b35e-a77c39ebc169"
      },
      {
        "id": "4C61F723-A0DA-483C-887F-80561B098A1F",
        "type": "IfElseBlock",
        "disabled": false,
        "name": "condition14",
        "displayName": "Condition 14",
        "comment": "If disabled, set to less than 0 keys per user, or user has less than 1 key available, or change API key set above",
        "childId": "936EF573-C0E6-47ED-9EBC-ABCAA1260243",
        "inputs": [
          {
            "id": "conditions",
            "value": {
              "mode": "some",
              "conditions": [
                {
                  "input1": "{ $.GetAPIKeySettings2.api_keys_enabled }",
                  "input2": "true",
                  "operator": "!="
                },
                {
                  "input1": "{ $.GetAPIKeySettings2.max_keys_per_user }",
                  "input2": "1",
                  "operator": "<"
                },
                {
                  "input1": "{ $.CountRemainingAPIKeys.remainingKeys }",
                  "input2": "1",
                  "operator": "<"
                },
                {
                  "input1": "{ $.loopUpdateAPIKeySettings }",
                  "input2": "1",
                  "operator": "="
                }
              ]
            },
            "type": "custom",
            "structure": []
          }
        ],
        "settings": [],
        "collapsed": [
          { "name": "both", "isCollapsed": false },
          { "name": "yes", "isCollapsed": false },
          { "name": "no", "isCollapsed": false }
        ],
        "x": -414,
        "y": 3422,
        "childTrueId": "95E1A381-5CDF-468E-9F92-13F9C4DD2B43",
        "childFalseId": null
      },
      {
        "id": "936EF573-C0E6-47ED-9EBC-ABCAA1260243",
        "type": "FilterListBlock",
        "disabled": false,
        "name": "filterList2",
        "displayName": "Filter over Qlik Platform Operations - List API Keys - Filter List 2",
        "comment": "Delete old API keys",
        "childId": "96E85558-3846-4E9B-AE3D-FAB9CB5EBE2F",
        "inputs": [
          {
            "id": "list",
            "value": "{ $.listAPIKeys }",
            "type": "string",
            "structure": []
          },
          {
            "id": "conditions",
            "value": {
              "mode": "all",
              "conditions": [
                {
                  "input1": "description",
                  "input2": "{ $.restConnectorName }-{ $.loopTenant }",
                  "operator": "="
                },
                { "input1": "sub", "input2": "{$.GetUserId}", "operator": "=" }
              ]
            },
            "type": "custom",
            "structure": []
          }
        ],
        "settings": [
          {
            "id": "automations_censor_data",
            "value": false,
            "type": "checkbox",
            "structure": []
          }
        ],
        "collapsed": [{ "name": "loop", "isCollapsed": false }],
        "x": 360,
        "y": 9080,
        "loopBlockId": "5D55A1FE-33AD-4836-A22C-51B2B90B3AC4"
      },
      {
        "id": "7C3D6725-C881-450B-8104-382494E85315",
        "type": "ForEachBlock",
        "disabled": false,
        "name": "loop7",
        "displayName": "Loop 7",
        "comment": "Loop over app list",
        "childId": "930EFB6D-C9E0-48D4-8929-03FDC6703512",
        "inputs": [
          {
            "id": "input",
            "value": "{$.filterList6}",
            "type": "string",
            "structure": []
          }
        ],
        "settings": [
          {
            "id": "automations_censor_data",
            "value": false,
            "type": "checkbox",
            "structure": []
          }
        ],
        "collapsed": [{ "name": "loop", "isCollapsed": false }],
        "x": 240,
        "y": 7960,
        "loopBlockId": "D4C1C8B4-6847-48A5-AD38-CB3A40E66E1B"
      },
      {
        "id": "A58E6D24-2609-48AB-88CF-41F69E95D9B4",
        "type": "LookupItemBlock",
        "disabled": false,
        "name": "lookupItemInList4",
        "displayName": "Lookup Item In List 4",
        "comment": "",
        "childId": "DB96F31B-B0D0-4A1A-9337-5E53D1C50907",
        "inputs": [
          {
            "id": "list",
            "value": "{$.appList}",
            "type": "string",
            "structure": []
          },
          {
            "id": "conditions",
            "value": {
              "mode": "all",
              "conditions": [
                { "input1": "id", "input2": "{$.loop7.item.id}", "operator": "=" }
              ]
            },
            "type": "custom",
            "structure": []
          }
        ],
        "settings": [
          {
            "id": "automations_censor_data",
            "value": false,
            "type": "checkbox",
            "structure": []
          }
        ],
        "collapsed": [{ "name": "loop", "isCollapsed": false }],
        "x": 480,
        "y": 9380
      },
      {
        "id": "D4C1C8B4-6847-48A5-AD38-CB3A40E66E1B",
        "type": "VariableBlock",
        "disabled": false,
        "name": "redeployApp",
        "displayName": "Variable - redeployApp",
        "comment": "Set to redeploy apps value",
        "childId": "5C6B977E-5F82-4083-B0CC-5875C9B06718",
        "inputs": [],
        "settings": [],
        "collapsed": [{ "name": "loop", "isCollapsed": false }],
        "x": 360,
        "y": 8820,
        "variableGuid": "BAA5B8AA-EC89-427E-A3D3-390061BDD136",
        "operations": [
          {
            "id": "set_value",
            "key": "31BEEEF0-B877-48A3-B121-0D9566E0BA30",
            "name": "Set value of { variable }",
            "value": "{ $.replaceAllApps }"
          }
        ]
      },
      {
        "id": "8BD97D74-D764-424A-9405-BD6CBAD47C4A",
        "type": "EndpointBlock",
        "disabled": false,
        "name": "listApps3",
        "displayName": "Qlik Platform Operations - List Apps 3",
        "comment": "",
        "childId": "C085D29C-E8B5-4754-94F5-1E779ADD6812",
        "inputs": [
          {
            "id": "e9b6c6e0-fc5c-11ec-a80b-6bcbe0fce3f9",
            "value": "{ $.parentTenant }",
            "type": "string",
            "structure": []
          },
          {
            "id": "828395d0-fc5c-11ec-84c0-7d10388a4509",
            "value": null,
            "type": "string",
            "structure": []
          },
          {
            "id": "a2e67870-fc5c-11ec-8908-03acdf4e0f6b",
            "value": "{ $.createSpaceIfNotExisting.id }",
            "type": "string",
            "structure": []
          },
          {
            "id": "0861ad80-7bb3-11ed-adf0-0bf7b3e68eef",
            "value": "{$.loop7.item.name}",
            "type": "string",
            "structure": []
          },
          {
            "id": "664373d0-8481-11ee-9cc8-3382d4210b28",
            "value": "71e9b950-8481-11ee-841f-633719df7fed",
            "type": "select",
            "displayValue": "shared",
            "structure": []
          }
        ],
        "settings": [
          {
            "id": "datasource",
            "value": "e649bbb1-4b70-42fa-88ee-11d1aa9a7119",
            "type": "select",
            "structure": []
          },
          {
            "id": "maxitemcount",
            "value": "",
            "type": "string",
            "structure": []
          },
          {
            "id": "blendr_on_error",
            "value": "stop",
            "type": "select",
            "structure": []
          },
          { "id": "cache", "value": "0", "type": "select", "structure": [] },
          {
            "id": "automations_censor_data",
            "value": false,
            "type": "checkbox",
            "structure": []
          }
        ],
        "collapsed": [{ "name": "loop", "isCollapsed": false }],
        "x": 480,
        "y": 9260,
        "loopBlockId": "9F4BC319-AD7E-4EDB-A1D9-EAD7C0F4E595",
        "datasourcetype_guid": "c7e48240-e0f2-11ec-ada1-d5ef75014b77",
        "endpoint_guid": "8263bab0-fc5c-11ec-8f4a-433e011739ae",
        "endpoint_role": "list"
      },
      {
        "id": "C085D29C-E8B5-4754-94F5-1E779ADD6812",
        "type": "IfElseBlock",
        "disabled": false,
        "name": "condition18",
        "displayName": "Condition 18",
        "comment": "If app needs redeploying or no app found",
        "childId": "DAA17B4F-CA7D-4ED5-A2D8-317BE97E1612",
        "inputs": [
          {
            "id": "conditions",
            "value": {
              "mode": "some",
              "conditions": [
                { "input1": "{$.redeployApp}", "input2": "0", "operator": ">" },
                {
                  "input1": "{count: {$.listApps3}}",
                  "input2": "0",
                  "operator": "="
                }
              ]
            },
            "type": "custom",
            "structure": []
          }
        ],
        "settings": [],
        "collapsed": [
          { "name": "both", "isCollapsed": false },
          { "name": "yes", "isCollapsed": false },
          { "name": "no", "isCollapsed": false }
        ],
        "x": 480,
        "y": 8320,
        "childTrueId": "8196067B-D152-4CDD-B2E2-4C2861D3B1F6",
        "childFalseId": "7D554635-3108-4E90-B6C3-112C595FDEDF"
      },
      {
        "id": "F439A085-93D1-4AA4-ACEE-53E69E19AC21",
        "type": "ForEachBlock",
        "disabled": false,
        "name": "loop8",
        "displayName": "Loop 8",
        "comment": "Do script rewrites",
        "childId": null,
        "inputs": [
          {
            "id": "input",
            "value": "{$.loop7.item.multipleTenantAttributes}",
            "type": "string",
            "structure": []
          }
        ],
        "settings": [
          {
            "id": "automations_censor_data",
            "value": false,
            "type": "checkbox",
            "structure": []
          }
        ],
        "collapsed": [{ "name": "loop", "isCollapsed": false }],
        "x": 480,
        "y": 8560,
        "loopBlockId": "60E97180-5C42-45DA-9ADE-CF36A1D24B9E"
      },
      {
        "id": "60E97180-5C42-45DA-9ADE-CF36A1D24B9E",
        "type": "VariableBlock",
        "disabled": false,
        "name": "sourceString",
        "displayName": "Variable - sourceString",
        "comment": "",
        "childId": "D3ADF192-073B-4C85-8E6F-27ECBE6CAA6B",
        "inputs": [],
        "settings": [],
        "collapsed": [{ "name": "loop", "isCollapsed": false }],
        "x": 360,
        "y": 1880,
        "variableGuid": "3949C04E-2CFD-498D-8687-A1EE10F31B85",
        "operations": [
          {
            "id": "set_value",
            "key": "AF1A1AA1-D4D2-4FA6-AE3A-8636BB541D12",
            "name": "Set value of { variable }",
            "value": "{$.loop8.item.lookup}"
          }
        ]
      },
      {
        "id": "D3ADF192-073B-4C85-8E6F-27ECBE6CAA6B",
        "type": "CaseBlock",
        "disabled": false,
        "name": "case3",
        "displayName": "Case 3",
        "comment": "",
        "childId": "63512C62-BD28-4259-9066-99C7C3C9C417",
        "inputs": [
          {
            "id": "expression",
            "value": "{$.loop8.item.attribute}",
            "type": "string",
            "structure": []
          },
          {
            "id": "statements",
            "value": [
              "tenant",
              "connectionRest",
              "connectionRemote",
              "multitenancy",
              "consoleSettings",
              "multitenancyEnabled",
              "QB-30587"
            ],
            "type": "list",
            "mode": "keyValue",
            "structure": []
          }
        ],
        "settings": [],
        "collapsed": [{ "name": "default", "isCollapsed": false }],
        "x": -414,
        "y": 1734,
        "statementChildrenIds": [
          "858A5999-B15D-489D-9935-E3A16941E1DF",
          "02E98CD1-1D92-4110-803C-6024431DA22D",
          "839EABF9-16B0-430A-9E6D-09746411D44E",
          "FFD0F1E4-EF87-4577-92B1-4DCC0BF1E65F",
          "3080EEBD-2F98-4F66-94C9-AFD94E3C485C",
          "214D26B1-9712-4B6E-B6D4-E7F5B02D36A2",
          "569187F5-616B-40CA-979C-982E5CA43053"
        ],
        "defaultChildId": null
      },
      {
        "id": "63512C62-BD28-4259-9066-99C7C3C9C417",
        "type": "IfElseBlock",
        "disabled": false,
        "name": "condition19",
        "displayName": "Condition 19",
        "comment": "If a source string is found",
        "childId": "3505EA30-1556-4B0D-ACAE-3EC897EE225A",
        "inputs": [
          {
            "id": "conditions",
            "value": {
              "mode": "all",
              "conditions": [
                {
                  "input1": "{$.sourceString}",
                  "input2": null,
                  "operator": "notEmpty"
                }
              ]
            },
            "type": "custom",
            "structure": []
          }
        ],
        "settings": [],
        "collapsed": [
          { "name": "both", "isCollapsed": false },
          { "name": "yes", "isCollapsed": false },
          { "name": "no", "isCollapsed": false }
        ],
        "x": -433,
        "y": 2436,
        "childTrueId": "96B50B31-D976-4B41-90DD-AEE5C78DA575",
        "childFalseId": null
      },
      {
        "id": "3505EA30-1556-4B0D-ACAE-3EC897EE225A",
        "type": "VariableBlock",
        "disabled": false,
        "name": "sourceString",
        "displayName": "Variable - sourceString",
        "comment": "Empty source string",
        "childId": null,
        "inputs": [],
        "settings": [],
        "collapsed": [{ "name": "loop", "isCollapsed": false }],
        "x": 360,
        "y": 5460,
        "variableGuid": "3949C04E-2CFD-498D-8687-A1EE10F31B85",
        "operations": [
          {
            "id": "empty",
            "key": "CD27F66A-7DE2-4598-9655-CF04E3AFB337",
            "name": "Empty { variable }",
            "value": null
          }
        ]
      },
      {
        "id": "96B50B31-D976-4B41-90DD-AEE5C78DA575",
        "type": "EndpointBlock",
        "disabled": false,
        "name": "GetAnalyticsAppLoadScript3",
        "displayName": "Qlik Platform Operations - Get Analytics App Load Script 3",
        "comment": "",
        "childId": "D14C5C59-50AB-4068-A8DA-ACE70FAF56AF",
        "inputs": [
          {
            "id": "ba92e3f0-b772-11ed-a6ef-3b1c3b9e8452",
            "value": "{ $.parentTenant }",
            "type": "string",
            "structure": []
          },
          {
            "id": "ba69fbe0-b772-11ed-8af6-35087ac02480",
            "value": "{$.importAppFromBase64EncodedFile2.attributes.id}",
            "type": "string",
            "structure": []
          },
          {
            "id": "ba85c7e0-b772-11ed-b61a-cb2f3dca33ee",
            "value": "current",
            "type": "string",
            "structure": []
          }
        ],
        "settings": [
          {
            "id": "datasource",
            "value": "e649bbb1-4b70-42fa-88ee-11d1aa9a7119",
            "type": "select",
            "structure": []
          },
          {
            "id": "blendr_on_error",
            "value": "stop",
            "type": "select",
            "structure": []
          },
          { "id": "cache", "value": "0", "type": "select", "structure": [] },
          {
            "id": "automations_censor_data",
            "value": false,
            "type": "checkbox",
            "structure": []
          }
        ],
        "collapsed": [{ "name": "loop", "isCollapsed": false }],
        "x": 360,
        "y": 3000,
        "datasourcetype_guid": "c7e48240-e0f2-11ec-ada1-d5ef75014b77",
        "endpoint_guid": "ba528340-b772-11ed-b492-8bb1aac9fe46",
        "endpoint_role": "get"
      },
      {
        "id": "886B55AE-619C-4643-911C-529EC40D8A9B",
        "type": "VariableBlock",
        "disabled": false,
        "name": "loadScript",
        "displayName": "Variable - loadScript",
        "comment": "",
        "childId": "73C6AA57-C763-4088-825E-46FF6337B76A",
        "inputs": [],
        "settings": [],
        "collapsed": [{ "name": "loop", "isCollapsed": false }],
        "x": 840,
        "y": 13660,
        "variableGuid": "5E7CBF8D-37A3-46B1-94B2-610F596A58FF",
        "operations": [
          {
            "id": "set_value",
            "key": "A70B9F8A-F9F1-4031-87B6-EFE0867F2FF3",
            "name": "Set value of { variable }",
            "value": "{replace: {$.GetAnalyticsAppLoadScript3.script}, $.sourceString, $.targetString}"
          }
        ]
      },
      {
        "id": "73C6AA57-C763-4088-825E-46FF6337B76A",
        "type": "EndpointBlock",
        "disabled": false,
        "name": "SetAnalyticsAppLoadScript3",
        "displayName": "Qlik Platform Operations - Set Analytics App Load Script 3",
        "comment": "",
        "childId": null,
        "inputs": [
          {
            "id": "ce746780-9804-11ed-841e-8ba110309b96",
            "value": "{ $.parentTenant }",
            "type": "string",
            "structure": []
          },
          {
            "id": "ce837c60-9804-11ed-9eaa-5f6c7b914ae0",
            "value": "{$.importAppFromBase64EncodedFile2.attributes.id}",
            "type": "string",
            "structure": []
          },
          {
            "id": "fc378110-9804-11ed-a489-fbcf3a0b3371",
            "value": "{$.loadScript}",
            "type": "string",
            "structure": []
          },
          {
            "id": "0472b770-9805-11ed-a046-33cb6161aefa",
            "value": "Updating value for {$.loop8.item.attribute}",
            "type": "string",
            "structure": []
          }
        ],
        "settings": [
          {
            "id": "datasource",
            "value": "e649bbb1-4b70-42fa-88ee-11d1aa9a7119",
            "type": "select",
            "structure": []
          },
          {
            "id": "blendr_on_error",
            "value": "stop",
            "type": "select",
            "structure": []
          },
          {
            "id": "automations_censor_data",
            "value": false,
            "type": "checkbox",
            "structure": []
          }
        ],
        "collapsed": [{ "name": "loop", "isCollapsed": false }],
        "x": 821,
        "y": 1880,
        "datasourcetype_guid": "c7e48240-e0f2-11ec-ada1-d5ef75014b77",
        "endpoint_guid": "ce3b7a60-9804-11ed-bbe1-49da94237f4e",
        "endpoint_role": "create"
      },
      {
        "id": "3227E372-959D-47C3-8345-E8DD0E9B8103",
        "type": "VariableBlock",
        "disabled": false,
        "name": "targetString",
        "displayName": "Variable - targetString",
        "comment": "",
        "childId": null,
        "inputs": [],
        "settings": [],
        "collapsed": [{ "name": "loop", "isCollapsed": false }],
        "x": 960,
        "y": 11400,
        "variableGuid": "78C37A26-6056-40F7-A857-E84298458883",
        "operations": [
          {
            "id": "set_value",
            "key": "AF1A1AA1-D4D2-4FA6-AE3A-8636BB541D12",
            "name": "Set value of { variable }",
            "value": "SET vu_tenant_fqdn = '{ $.parentTenant }'; // comment out rest of this line"
          }
        ]
      },
      {
        "id": "0E9FD2FB-98FF-4384-A63A-14CC9332FD04",
        "type": "VariableBlock",
        "disabled": false,
        "name": "targetString",
        "displayName": "Variable - targetString",
        "comment": "",
        "childId": null,
        "inputs": [],
        "settings": [],
        "collapsed": [{ "name": "loop", "isCollapsed": false }],
        "x": 1080,
        "y": 12240,
        "variableGuid": "78C37A26-6056-40F7-A857-E84298458883",
        "operations": [
          {
            "id": "set_value",
            "key": "AF1A1AA1-D4D2-4FA6-AE3A-8636BB541D12",
            "name": "Set value of { variable }",
            "value": "SET vu_rest_connection = ''; // comment out rest of this line"
          }
        ]
      },
      {
        "id": "839EABF9-16B0-430A-9E6D-09746411D44E",
        "type": "VariableBlock",
        "disabled": false,
        "name": "targetString",
        "displayName": "Variable - targetString",
        "comment": "",
        "childId": null,
        "inputs": [],
        "settings": [],
        "collapsed": [{ "name": "loop", "isCollapsed": false }],
        "x": 960,
        "y": 12280,
        "variableGuid": "78C37A26-6056-40F7-A857-E84298458883",
        "operations": [
          {
            "id": "set_value",
            "key": "AF1A1AA1-D4D2-4FA6-AE3A-8636BB541D12",
            "name": "Set value of { variable }",
            "value": "SET vu_qlik_meta_collection_parent_dir = 'lib://{ $.sharedSpaceName }:DataFiles'; // comment out rest of this line"
          }
        ]
      },
      {
        "id": "D381FF6F-CD81-4E63-82C9-62984CB5DCF9",
        "type": "VariableBlock",
        "disabled": false,
        "name": "targetString",
        "displayName": "Variable - targetString",
        "comment": "",
        "childId": null,
        "inputs": [],
        "settings": [],
        "collapsed": [{ "name": "loop", "isCollapsed": false }],
        "x": 960,
        "y": 12280,
        "variableGuid": "78C37A26-6056-40F7-A857-E84298458883",
        "operations": [
          {
            "id": "set_value",
            "key": "AF1A1AA1-D4D2-4FA6-AE3A-8636BB541D12",
            "name": "Set value of { variable }",
            "value": "SET vu_is_parent_app = 0; // comment out rest of this line"
          }
        ]
      },
      {
        "id": "3080EEBD-2F98-4F66-94C9-AFD94E3C485C",
        "type": "VariableBlock",
        "disabled": false,
        "name": "targetString",
        "displayName": "Variable - targetString",
        "comment": "",
        "childId": null,
        "inputs": [],
        "settings": [],
        "collapsed": [{ "name": "loop", "isCollapsed": false }],
        "x": 480,
        "y": 2960,
        "variableGuid": "78C37A26-6056-40F7-A857-E84298458883",
        "operations": [
          {
            "id": "set_value",
            "key": "AF1A1AA1-D4D2-4FA6-AE3A-8636BB541D12",
            "name": "Set value of { variable }",
            "value": "SET vConsoleSettingsCollector = 1; // comment out rest of this line"
          }
        ]
      },
      {
        "id": "214D26B1-9712-4B6E-B6D4-E7F5B02D36A2",
        "type": "VariableBlock",
        "disabled": false,
        "name": "targetString",
        "displayName": "Variable - targetString",
        "comment": "",
        "childId": null,
        "inputs": [],
        "settings": [],
        "collapsed": [{ "name": "loop", "isCollapsed": false }],
        "x": 840,
        "y": 13360,
        "variableGuid": "78C37A26-6056-40F7-A857-E84298458883",
        "operations": [
          {
            "id": "set_value",
            "key": "AF1A1AA1-D4D2-4FA6-AE3A-8636BB541D12",
            "name": "Set value of { variable }",
            "value": "Set vu_multi_tenant_enabled = 1; // comment out rest of this line"
          }
        ]
      },
      {
        "id": "4344B0B1-B024-4EF5-B698-35E266B3DB41",
        "type": "EndpointBlock",
        "disabled": false,
        "name": "importAppFromBase64EncodedFile2",
        "displayName": "Qlik Platform Operations - Import App From Base 64 Encoded File 2",
        "comment": "",
        "childId": "3F7B19BF-F56B-4A20-B8B9-1A6D743B7788",
        "inputs": [
          {
            "id": "4be04370-fc5b-11ec-8758-ddba95fb24da",
            "value": "{ $.parentTenant }",
            "type": "string",
            "structure": []
          },
          {
            "id": "4bce30a0-fc5b-11ec-ab0b-cb01fdfeeec0",
            "value": "{$.lookupItemInList4.file}",
            "type": "string",
            "structure": []
          },
          {
            "id": "a7fab740-fc5b-11ec-9e27-8d6654541393",
            "value": "{$.loop7.item.name}",
            "type": "string",
            "structure": []
          },
          {
            "id": "cfd90fa0-fc5b-11ec-81c3-ef55794fd2e8",
            "value": "{ $.createSpaceIfNotExisting.id }",
            "type": "string",
            "structure": []
          }
        ],
        "settings": [
          {
            "id": "datasource",
            "value": "e649bbb1-4b70-42fa-88ee-11d1aa9a7119",
            "type": "select",
            "structure": []
          },
          {
            "id": "blendr_on_error",
            "value": "stop",
            "type": "select",
            "structure": []
          },
          {
            "id": "automations_censor_data",
            "value": false,
            "type": "checkbox",
            "structure": []
          }
        ],
        "collapsed": [{ "name": "loop", "isCollapsed": false }],
        "x": 600,
        "y": 10280,
        "datasourcetype_guid": "c7e48240-e0f2-11ec-ada1-d5ef75014b77",
        "endpoint_guid": "4bbfdf70-fc5b-11ec-b1c1-311f2248f446",
        "endpoint_role": "create"
      },
      {
        "id": "A61AAC41-A685-4856-BA4C-0481F78BC844",
        "type": "EndpointBlock",
        "disabled": false,
        "name": "listItems4",
        "displayName": "Qlik Platform Operations - List Items 4",
        "comment": "",
        "childId": "F439A085-93D1-4AA4-ACEE-53E69E19AC21",
        "inputs": [
          {
            "id": "5e0e39f0-e8e9-11ed-a235-bd0d5c4d2a7d",
            "value": "{ $.parentTenant }",
            "type": "string",
            "structure": []
          },
          {
            "id": "5dacfe40-e8e9-11ed-881b-63200467c94e",
            "value": null,
            "type": "string",
            "structure": []
          },
          {
            "id": "5df5f3c0-e8e9-11ed-9d3e-c9f4d4df756b",
            "value": "{ $.createSpaceIfNotExisting.id }",
            "type": "string",
            "structure": []
          },
          {
            "id": "5e15df30-e8e9-11ed-a3f8-cb18adbc30f4",
            "value": "{$.loop7.item.name}",
            "type": "string",
            "structure": []
          },
          {
            "id": "5e0555e0-e8e9-11ed-98f4-6f2549cb2159",
            "value": "6a901320-e8ee-11ed-a332-1130811a9539",
            "type": "select",
            "displayValue": "app",
            "structure": []
          },
          {
            "id": "abbe1b80-e8ef-11ed-b94c-a7318c3a8be2",
            "value": null,
            "type": "string",
            "structure": []
          },
          {
            "id": "4a2febc0-e8f0-11ed-9b5c-e5241d8bd3ff",
            "value": null,
            "type": "string",
            "structure": []
          },
          {
            "id": "4da4cf20-e8f3-11ed-a2b2-3d0a759d2c53",
            "value": null,
            "type": "string",
            "structure": []
          },
          {
            "id": "6bf47050-e8f3-11ed-ada8-15943bf3383c",
            "value": null,
            "type": "string",
            "structure": []
          },
          {
            "id": "8aaacee0-e8f3-11ed-a504-0f903858bba2",
            "value": null,
            "type": "string",
            "structure": []
          },
          {
            "id": "a4d8b9d0-e8f3-11ed-800e-d70f72eda0ef",
            "value": null,
            "type": "select",
            "structure": []
          }
        ],
        "settings": [
          {
            "id": "datasource",
            "value": "e649bbb1-4b70-42fa-88ee-11d1aa9a7119",
            "type": "select",
            "structure": []
          },
          {
            "id": "maxitemcount",
            "value": "",
            "type": "string",
            "structure": []
          },
          {
            "id": "blendr_on_error",
            "value": "stop",
            "type": "select",
            "structure": []
          },
          { "id": "cache", "value": "0", "type": "select", "structure": [] },
          {
            "id": "automations_censor_data",
            "value": false,
            "type": "checkbox",
            "structure": []
          }
        ],
        "collapsed": [{ "name": "loop", "isCollapsed": false }],
        "x": 600,
        "y": 10680,
        "loopBlockId": "35AB855C-019E-4461-A9E2-E10475D4CBAF",
        "datasourcetype_guid": "c7e48240-e0f2-11ec-ada1-d5ef75014b77",
        "endpoint_guid": "5d8264a0-e8e9-11ed-bf7e-a7275b075e61",
        "endpoint_role": "list"
      },
      {
        "id": "9F4BC319-AD7E-4EDB-A1D9-EAD7C0F4E595",
        "type": "IfElseBlock",
        "disabled": false,
        "name": "condition21",
        "displayName": "Condition 21",
        "comment": "Is the app not the correct version, or are there multiple copies, or redeploy app set",
        "childId": null,
        "inputs": [
          {
            "id": "conditions",
            "value": {
              "mode": "some",
              "conditions": [
                {
                  "input1": "{$.listApps3.item.meta.tags[*].name}",
                  "input2": "{$.loop7.item.version}",
                  "operator": "notInList"
                },
                {
                  "input1": "{count: {$.listApps3}}",
                  "input2": "1",
                  "operator": ">"
                },
                { "input1": "{ $.redeployApp }", "input2": "1", "operator": "=" }
              ]
            },
            "type": "custom",
            "structure": []
          }
        ],
        "settings": [],
        "collapsed": [
          { "name": "both", "isCollapsed": false },
          { "name": "yes", "isCollapsed": false },
          { "name": "no", "isCollapsed": false }
        ],
        "x": 797,
        "y": 5000,
        "childTrueId": "D8CCAC5B-D77A-4E8B-BED2-E76DD0C011AB",
        "childFalseId": "3F93BDD6-B1E4-45AA-9509-DA578420D587"
      },
      {
        "id": "76E247DF-6190-4E63-8760-4B2D3D15E5B2",
        "type": "EndpointBlock",
        "disabled": false,
        "name": "deleteApp3",
        "displayName": "Qlik Platform Operations - Delete App 3",
        "comment": "",
        "childId": "C679193F-1B75-44C1-A2B7-3C8C59DD5F45",
        "inputs": [
          {
            "id": "90135170-7af2-11ed-9f08-83898fe69c8e",
            "value": "{ $.parentTenant }",
            "type": "string",
            "structure": []
          },
          {
            "id": "8ffab0c0-7af2-11ed-8815-3d11c1ad6c97",
            "value": "{ $.listApps3.item.resourceAttributes.id }",
            "type": "string",
            "structure": []
          }
        ],
        "settings": [
          {
            "id": "datasource",
            "value": "e649bbb1-4b70-42fa-88ee-11d1aa9a7119",
            "type": "select",
            "structure": []
          },
          {
            "id": "blendr_on_error",
            "value": "stop",
            "type": "select",
            "structure": []
          },
          {
            "id": "automations_censor_data",
            "value": false,
            "type": "checkbox",
            "structure": []
          }
        ],
        "collapsed": [{ "name": "loop", "isCollapsed": false }],
        "x": -373,
        "y": 5115,
        "datasourcetype_guid": "c7e48240-e0f2-11ec-ada1-d5ef75014b77",
        "endpoint_guid": "8fdd2c60-7af2-11ed-bff4-0d91d2a3f5e0",
        "endpoint_role": "delete"
      },
      {
        "id": "C679193F-1B75-44C1-A2B7-3C8C59DD5F45",
        "type": "VariableBlock",
        "disabled": false,
        "name": "redeployApp",
        "displayName": "Variable - redeployApp",
        "comment": "",
        "childId": null,
        "inputs": [],
        "settings": [],
        "collapsed": [{ "name": "loop", "isCollapsed": false }],
        "x": 720,
        "y": 9560,
        "variableGuid": "BAA5B8AA-EC89-427E-A3D3-390061BDD136",
        "operations": [
          {
            "id": "set_value",
            "key": "8B117449-C436-480D-9FD1-0EFEA1E090F8",
            "name": "Set value of { variable }",
            "value": "1"
          }
        ]
      },
      {
        "id": "F8781128-3670-4823-BA0D-D229D3B1C897",
        "type": "FilterListBlock",
        "disabled": false,
        "name": "filterList4",
        "displayName": "Filter over Qlik Platform Operations - List Data Connections - Filter List 4",
        "comment": "",
        "childId": null,
        "inputs": [
          {
            "id": "list",
            "value": "{ $.listDataConnections }",
            "type": "string",
            "structure": []
          },
          {
            "id": "conditions",
            "value": {
              "mode": "some",
              "conditions": [
                {
                  "input1": "qName",
                  "input2": "{ $.restConnectorName }-{ $.loopTenant }",
                  "operator": "="
                }
              ]
            },
            "type": "custom",
            "structure": []
          }
        ],
        "settings": [
          {
            "id": "automations_censor_data",
            "value": false,
            "type": "checkbox",
            "structure": []
          }
        ],
        "collapsed": [{ "name": "loop", "isCollapsed": false }],
        "x": 360,
        "y": 5280,
        "loopBlockId": "A9827659-D927-4F0F-AD75-6C0149D5C114"
      },
      {
        "id": "DE73FA04-D1A0-41F6-BEBD-66C89D6087B7",
        "type": "VariableBlock",
        "disabled": false,
        "name": "recreateConnections",
        "displayName": "Variable - recreateConnections",
        "comment": "Set to 0 for no actions, 1 to recreate data connections on run.",
        "childId": "3E2AC43B-4658-4E31-8F05-8E8B0768044F",
        "inputs": [],
        "settings": [],
        "collapsed": [{ "name": "loop", "isCollapsed": false }],
        "x": 0,
        "y": 360,
        "variableGuid": "1103231C-BFB8-4426-9C14-ADCC798B8FEA",
        "operations": [
          {
            "id": "set_value",
            "key": "1D8A1E1E-78F1-4A10-8531-9612EC322A34",
            "name": "Set value of { variable }",
            "value": "1"
          }
        ]
      },
      {
        "id": "99E8F459-3747-4D47-A931-A2447280294B",
        "type": "IfElseBlock",
        "disabled": false,
        "name": "condition",
        "displayName": "Condition",
        "comment": "If delete connections set",
        "childId": "BE430E56-DB40-4F29-805E-087BAD434435",
        "inputs": [
          {
            "id": "conditions",
            "value": {
              "mode": "all",
              "conditions": [
                {
                  "input1": "{ $.recreateConnections }",
                  "input2": "1",
                  "operator": "="
                }
              ]
            },
            "type": "custom",
            "structure": []
          }
        ],
        "settings": [],
        "collapsed": [
          { "name": "both", "isCollapsed": false },
          { "name": "yes", "isCollapsed": false },
          { "name": "no", "isCollapsed": false }
        ],
        "x": 639,
        "y": 4000,
        "childTrueId": "F8781128-3670-4823-BA0D-D229D3B1C897",
        "childFalseId": null
      },
      {
        "id": "A9827659-D927-4F0F-AD75-6C0149D5C114",
        "type": "EndpointBlock",
        "disabled": false,
        "name": "deleteDataConnection",
        "displayName": "Qlik Platform Operations - Delete Data Connection",
        "comment": "",
        "childId": null,
        "inputs": [
          {
            "id": "9e9a5c20-ce39-11ed-8e30-39178a211127",
            "value": "{ $.parentTenant }",
            "type": "string",
            "structure": []
          },
          {
            "id": "9ea1c1b0-ce39-11ed-9976-c5d449ec39f1",
            "value": "{ $.filterList4.item.id }",
            "type": "string",
            "structure": []
          }
        ],
        "settings": [
          {
            "id": "datasource",
            "value": "e649bbb1-4b70-42fa-88ee-11d1aa9a7119",
            "type": "select",
            "structure": []
          },
          {
            "id": "blendr_on_error",
            "value": "stop",
            "type": "select",
            "structure": []
          },
          {
            "id": "automations_censor_data",
            "value": false,
            "type": "checkbox",
            "structure": []
          }
        ],
        "collapsed": [{ "name": "loop", "isCollapsed": false }],
        "x": -286,
        "y": 4334,
        "datasourcetype_guid": "c7e48240-e0f2-11ec-ada1-d5ef75014b77",
        "endpoint_guid": "9e81fbe0-ce39-11ed-9e38-7ffc25cf714f",
        "endpoint_role": "delete"
      },
      {
        "id": "8196067B-D152-4CDD-B2E2-4C2861D3B1F6",
        "type": "VariableBlock",
        "disabled": false,
        "name": "loopRedeployFlag",
        "displayName": "Variable - loopRedeployFlag",
        "comment": "",
        "childId": "F5AE4168-C97F-4845-B79E-58A2C5CD1800",
        "inputs": [],
        "settings": [],
        "collapsed": [{ "name": "loop", "isCollapsed": false }],
        "x": 600,
        "y": 8280,
        "variableGuid": "5105E92C-2FE4-4621-9DC7-20694E0A72C5",
        "operations": [
          {
            "id": "set_value",
            "key": "77124EAB-77A3-40B1-9409-9F6236FB4E3E",
            "name": "Set value of { variable }",
            "value": "1"
          }
        ]
      },
      {
        "id": "5EE9DB99-6FB9-4D61-A5F3-90F0ECCCDAD6",
        "type": "VariableBlock",
        "disabled": false,
        "name": "loopRedeployFlag",
        "displayName": "Variable - loopRedeployFlag",
        "comment": "",
        "childId": "33B0FCA1-2D13-490D-A0DE-F5E384E62391",
        "inputs": [],
        "settings": [],
        "collapsed": [{ "name": "loop", "isCollapsed": false }],
        "x": 360,
        "y": 6540,
        "variableGuid": "5105E92C-2FE4-4621-9DC7-20694E0A72C5",
        "operations": [
          {
            "id": "set_value",
            "key": "77124EAB-77A3-40B1-9409-9F6236FB4E3E",
            "name": "Set value of { variable }",
            "value": "0"
          }
        ]
      },
      {
        "id": "165B3E09-21E4-4BFB-A153-0E22C91CD835",
        "type": "EndpointBlock",
        "disabled": false,
        "name": "listTermsByGlossary",
        "displayName": "Qlik Cloud Services - List Terms By Glossary",
        "comment": "",
        "childId": "1FC63304-4689-4FEF-9D39-5AF06D38574E",
        "inputs": [
          {
            "id": "33887aa0-5630-11ee-be89-01948642bdbb",
            "value": "{$.glossaryId}",
            "type": "string",
            "structure": []
          }
        ],
        "settings": [
          {
            "id": "maxitemcount",
            "value": "",
            "type": "string",
            "structure": []
          },
          {
            "id": "blendr_on_error",
            "value": "stop",
            "type": "select",
            "structure": []
          },
          { "id": "cache", "value": "0", "type": "select", "structure": [] },
          {
            "id": "automations_censor_data",
            "value": false,
            "type": "checkbox",
            "structure": []
          }
        ],
        "collapsed": [{ "name": "loop", "isCollapsed": true }],
        "x": 382,
        "y": 1865,
        "loopBlockId": null,
        "datasourcetype_guid": "61a87510-c7a3-11ea-95da-0fb0c241e75c",
        "endpoint_guid": "33758560-5630-11ee-b86b-d9ef817cf95b",
        "endpoint_role": "list"
      },
      {
        "id": "4394BC5C-655D-4BC3-9767-1A4D00351713",
        "type": "FilterListBlock",
        "disabled": false,
        "name": "filterList6",
        "displayName": "Filter List 6",
        "comment": "Load the multiple tenant apps for the current subscription type",
        "childId": "D1028969-2CEC-4E00-9942-861D91055273",
        "inputs": [
          {
            "id": "list",
            "value": "{$.callURL}",
            "type": "string",
            "structure": []
          },
          {
            "id": "conditions",
            "value": {
              "mode": "all",
              "conditions": [
                {
                  "input1": "multipleTenantInstaller",
                  "input2": null,
                  "operator": "isTrue"
                },
                {
                  "input1": "subscriptionTypes",
                  "input2": "{$.subscriptionType}",
                  "operator": "inList"
                }
              ]
            },
            "type": "custom",
            "structure": []
          }
        ],
        "settings": [
          {
            "id": "automations_censor_data",
            "value": false,
            "type": "checkbox",
            "structure": []
          }
        ],
        "collapsed": [{ "name": "loop", "isCollapsed": false }],
        "x": 0,
        "y": 3440,
        "loopBlockId": "F1DB0E91-A51C-40FE-BFF4-78D4A7CE57EA"
      },
      {
        "id": "5DAB135A-A166-493A-B647-8A6DC18E6764",
        "type": "VariableBlock",
        "disabled": false,
        "name": "loopTenantType",
        "displayName": "Variable - loopTenantType",
        "comment": "Determine if targeted tenant is parent or child",
        "childId": "B6259E2E-14C4-42D9-BC66-5C9B21F1C289",
        "inputs": [],
        "settings": [],
        "collapsed": [{ "name": "loop", "isCollapsed": false }],
        "x": 120,
        "y": 4380,
        "variableGuid": "7C3C9241-D7CC-4450-B3B7-94DE96AACC67",
        "operations": [
          {
            "id": "set_value",
            "key": "4424D5FB-85D7-4ED5-90EB-A2B45FF3DF50",
            "name": "Set value of { variable }",
            "value": "{ if: {$.loopTenant} = {$.parentTenant}, 'parent', 'child' }"
          }
        ]
      },
      {
        "id": "ACA726EB-6C99-4E47-A309-2AA1C150A1F4",
        "type": "TransformListBlock",
        "disabled": false,
        "name": "transformList",
        "displayName": "Transform List",
        "comment": "Prepare tenantList formatting",
        "childId": "E9B50FF1-F75F-4C51-8635-107FBC9EA86C",
        "inputs": [
          {
            "id": "list",
            "value": "{$.tenantList}",
            "type": "string",
            "structure": []
          },
          {
            "id": "mapping",
            "value": [
              { "key": "hostname", "value": "{$.transformList.item.name}" }
            ],
            "type": "object",
            "mode": "keyValue",
            "structure": []
          }
        ],
        "settings": [
          {
            "id": "automations_censor_data",
            "value": false,
            "type": "checkbox",
            "structure": []
          }
        ],
        "collapsed": [{ "name": "loop", "isCollapsed": true }],
        "x": 0,
        "y": 2800,
        "loopBlockId": null
      },
      {
        "id": "E9B50FF1-F75F-4C51-8635-107FBC9EA86C",
        "type": "VariableBlock",
        "disabled": false,
        "name": "tenantList",
        "displayName": "Variable - tenantList",
        "comment": "",
        "childId": "E9D15206-6B5A-473C-BE01-82C38F32A5D5",
        "inputs": [],
        "settings": [],
        "collapsed": [{ "name": "loop", "isCollapsed": false }],
        "x": 120,
        "y": 3120,
        "variableGuid": "47CCFA4B-0ADC-40F3-95AC-FCEDD886EC94",
        "operations": [
          {
            "id": "empty",
            "key": "564691B8-D141-4883-BF6C-53A3AA13F4C7",
            "name": "Empty { variable }",
            "value": null
          },
          {
            "id": "merge",
            "key": "196D3458-253C-4281-A086-1071C28EA467",
            "name": "Merge other list into { variable }",
            "value": "{$.transformList}",
            "allow_duplicates": "no"
          }
        ]
      },
      {
        "id": "B6259E2E-14C4-42D9-BC66-5C9B21F1C289",
        "type": "VariableBlock",
        "disabled": false,
        "name": "loopSpaceName",
        "displayName": "Variable - loopSpaceName",
        "comment": "Set space name based on loopTenantType",
        "childId": "2B9B4334-2422-414B-972E-B3184EAC9735",
        "inputs": [],
        "settings": [],
        "collapsed": [{ "name": "loop", "isCollapsed": false }],
        "x": 120,
        "y": 4380,
        "variableGuid": "A6B260C4-E449-44CA-B958-E6BB6130E064",
        "operations": [
          {
            "id": "set_value",
            "key": "4424D5FB-85D7-4ED5-90EB-A2B45FF3DF50",
            "name": "Set value of { variable }",
            "value": "{if: {$.loopTenantType} = 'child', '{$.sharedSpaceName} ({$.loopTenant})', $.sharedSpaceName}"
          }
        ]
      },
      {
        "id": "858A5999-B15D-489D-9935-E3A16941E1DF",
        "type": "IfElseBlock",
        "disabled": false,
        "name": "condition3",
        "displayName": "Condition 3",
        "comment": "If loop tenant type = parent",
        "childId": null,
        "inputs": [
          {
            "id": "conditions",
            "value": {
              "mode": "all",
              "conditions": [
                {
                  "input1": "{$.loopTenantType}",
                  "input2": "parent",
                  "operator": "="
                }
              ]
            },
            "type": "custom",
            "structure": []
          }
        ],
        "settings": [],
        "collapsed": [
          { "name": "both", "isCollapsed": false },
          { "name": "yes", "isCollapsed": false },
          { "name": "no", "isCollapsed": false }
        ],
        "x": -414,
        "y": 11199,
        "childTrueId": "3227E372-959D-47C3-8345-E8DD0E9B8103",
        "childFalseId": "DFD9F539-02EE-45B1-986E-8178DEAA5432"
      },
      {
        "id": "DFD9F539-02EE-45B1-986E-8178DEAA5432",
        "type": "VariableBlock",
        "disabled": false,
        "name": "targetString",
        "displayName": "Variable - targetString",
        "comment": "",
        "childId": null,
        "inputs": [],
        "settings": [],
        "collapsed": [{ "name": "loop", "isCollapsed": false }],
        "x": 1210,
        "y": 11400,
        "variableGuid": "78C37A26-6056-40F7-A857-E84298458883",
        "operations": [
          {
            "id": "set_value",
            "key": "AF1A1AA1-D4D2-4FA6-AE3A-8636BB541D12",
            "name": "Set value of { variable }",
            "value": "SET vu_tenant_fqdn = '{$.loopTenant}'; // comment out rest of this line"
          }
        ]
      },
      {
        "id": "FFD0F1E4-EF87-4577-92B1-4DCC0BF1E65F",
        "type": "IfElseBlock",
        "disabled": false,
        "name": "condition11",
        "displayName": "Condition 11",
        "comment": "If loop tenant type = parent",
        "childId": null,
        "inputs": [
          {
            "id": "conditions",
            "value": {
              "mode": "all",
              "conditions": [
                {
                  "input1": "{$.loopTenantType}",
                  "input2": "parent",
                  "operator": "="
                }
              ]
            },
            "type": "custom",
            "structure": []
          }
        ],
        "settings": [],
        "collapsed": [
          { "name": "both", "isCollapsed": false },
          { "name": "yes", "isCollapsed": false },
          { "name": "no", "isCollapsed": false }
        ],
        "x": 1129,
        "y": 11989,
        "childTrueId": "429EDB83-94EB-40EE-9E60-DBA2E8A2A63C",
        "childFalseId": "D381FF6F-CD81-4E63-82C9-62984CB5DCF9"
      },
      {
        "id": "C630467A-9757-4112-BAC2-B0E0214C5623",
        "type": "VariableBlock",
        "disabled": false,
        "name": "iterApps",
        "displayName": "Variable - iterApps",
        "comment": "App iterator",
        "childId": "4FBF5D86-955C-43D4-900B-1F366B81DB61",
        "inputs": [],
        "settings": [],
        "collapsed": [{ "name": "loop", "isCollapsed": false }],
        "x": 0,
        "y": 4180,
        "variableGuid": "065DA746-CADF-4E58-B325-83499A7A66DE",
        "operations": [
          {
            "id": "set_value",
            "key": "46CFD80F-1E11-4955-9EE7-F2A2C9C7DCC5",
            "name": "Set value of { variable }",
            "value": "0"
          }
        ]
      },
      {
        "id": "951F5367-0564-4D4D-8346-A20C58BE637D",
        "type": "VariableBlock",
        "disabled": false,
        "name": "iterApps",
        "displayName": "Variable - iterApps",
        "comment": "",
        "childId": "4344B0B1-B024-4EF5-B698-35E266B3DB41",
        "inputs": [],
        "settings": [],
        "collapsed": [{ "name": "loop", "isCollapsed": false }],
        "x": 1129,
        "y": 10333,
        "variableGuid": "065DA746-CADF-4E58-B325-83499A7A66DE",
        "operations": [
          {
            "id": "add",
            "key": "81B768A6-B677-4AB4-88C1-52B1DFB943C8",
            "name": "Add to { variable }",
            "value": "1"
          }
        ]
      },
      {
        "id": "5C6B977E-5F82-4083-B0CC-5875C9B06718",
        "type": "IfElseBlock",
        "disabled": false,
        "name": "condition5",
        "displayName": "Condition 5",
        "comment": "If app matches tenant type or is deployed to both",
        "childId": null,
        "inputs": [
          {
            "id": "conditions",
            "value": {
              "mode": "some",
              "conditions": [
                {
                  "input1": "{$.loop7.item.multipleTenantAppType}",
                  "input2": "both",
                  "operator": "="
                },
                {
                  "input1": "{$.loop7.item.multipleTenantAppType}",
                  "input2": "{ $.loopTenantType }",
                  "operator": "="
                }
              ]
            },
            "type": "custom",
            "structure": []
          }
        ],
        "settings": [],
        "collapsed": [
          { "name": "both", "isCollapsed": false },
          { "name": "yes", "isCollapsed": false },
          { "name": "no", "isCollapsed": false }
        ],
        "x": 1011,
        "y": 7909,
        "childTrueId": "A58E6D24-2609-48AB-88CF-41F69E95D9B4",
        "childFalseId": "2A536657-741B-4D02-85E0-4AD1262D90AD"
      },
      {
        "id": "D14C5C59-50AB-4068-A8DA-ACE70FAF56AF",
        "type": "IfElseBlock",
        "disabled": false,
        "name": "condition7",
        "displayName": "Condition 7",
        "comment": "If text not found, exit as app may have changed",
        "childId": null,
        "inputs": [
          {
            "id": "conditions",
            "value": {
              "mode": "all",
              "conditions": [
                {
                  "input1": "{ $.GetAnalyticsAppLoadScript3.script }",
                  "input2": "{$.sourceString}",
                  "operator": "doesntContain"
                }
              ]
            },
            "type": "custom",
            "structure": []
          }
        ],
        "settings": [],
        "collapsed": [
          { "name": "both", "isCollapsed": false },
          { "name": "yes", "isCollapsed": false },
          { "name": "no", "isCollapsed": false }
        ],
        "x": -358,
        "y": 13309,
        "childTrueId": "29BFC479-C72A-4954-901E-D84545FA8BB5",
        "childFalseId": "886B55AE-619C-4643-911C-529EC40D8A9B"
      },
      {
        "id": "53563ACC-9153-4E19-97A4-FA2C670C8BA4",
        "type": "ErrorBlock",
        "disabled": false,
        "name": "error2",
        "displayName": "Error 2",
        "comment": "",
        "childId": null,
        "inputs": [
          {
            "id": "message",
            "value": "Could not find [{ $.sourceString }] in [{ $.loop7.item.name }].",
            "type": "string",
            "structure": []
          },
          { "id": "action", "value": "stop", "type": "select", "structure": [] }
        ],
        "settings": [],
        "collapsed": [{ "name": "loop", "isCollapsed": false }],
        "x": -345,
        "y": 13315
      },
      {
        "id": "29BFC479-C72A-4954-901E-D84545FA8BB5",
        "type": "EndpointBlock",
        "disabled": false,
        "name": "deleteApp",
        "displayName": "Qlik Platform Operations - Delete App",
        "comment": "",
        "childId": "53563ACC-9153-4E19-97A4-FA2C670C8BA4",
        "inputs": [
          {
            "id": "90135170-7af2-11ed-9f08-83898fe69c8e",
            "value": "{ $.parentTenant }",
            "type": "string",
            "structure": []
          },
          {
            "id": "8ffab0c0-7af2-11ed-8815-3d11c1ad6c97",
            "value": "{$.importAppFromBase64EncodedFile2.attributes.id}",
            "type": "string",
            "structure": []
          }
        ],
        "settings": [
          {
            "id": "datasource",
            "value": "e649bbb1-4b70-42fa-88ee-11d1aa9a7119",
            "type": "select",
            "structure": []
          },
          {
            "id": "blendr_on_error",
            "value": "stop",
            "type": "select",
            "structure": []
          },
          {
            "id": "automations_censor_data",
            "value": false,
            "type": "checkbox",
            "structure": []
          }
        ],
        "collapsed": [{ "name": "loop", "isCollapsed": false }],
        "x": -391,
        "y": 13607,
        "datasourcetype_guid": "c7e48240-e0f2-11ec-ada1-d5ef75014b77",
        "endpoint_guid": "8fdd2c60-7af2-11ed-bff4-0d91d2a3f5e0",
        "endpoint_role": "delete"
      },
      {
        "id": "F4D45158-9782-4A88-AD42-834FFC45750C",
        "type": "EndpointBlock",
        "disabled": false,
        "name": "CreateAnalyticsDataConnection",
        "displayName": "Qlik Platform Operations - Create Analytics Data Connection",
        "comment": "",
        "childId": null,
        "inputs": [
          {
            "id": "4c0ab960-d6de-11ee-8d82-4942a223c1bb",
            "value": "{ $.parentTenant }",
            "type": "string",
            "structure": []
          },
          {
            "id": "9d78cac0-d6df-11ee-9df0-bdc8c8cf0c37",
            "value": "{ $.restConnectorName }-{ $.loopTenant }",
            "type": "string",
            "structure": []
          },
          {
            "id": "d6e56fa0-d6df-11ee-848e-91feaabc3a5c",
            "value": "rest",
            "type": "string",
            "structure": []
          },
          {
            "id": "f4971ca0-d6df-11ee-934c-251b0309fb36",
            "value": "{\n\"url\": \"https://{$.loopTenant}/api/v1/items\",\n\"queryHeaders\": [\n{\n\"name\": \"Authorization\",\n\"value\": \"Bearer {$.createAPIKey.token}\"\n}\n],\n\"allowWithConnection\": \"true\"\n}",
            "type": "string",
            "structure": []
          },
          {
            "id": "a70a54e0-d6df-11ee-9f52-c9cf0415b92e",
            "value": "{ $.createSpaceIfNotExisting.id }",
            "type": "string",
            "structure": []
          },
          {
            "id": "c2fe0120-d6df-11ee-95e7-5deb95ee9665",
            "value": "c88ad920-d6df-11ee-a3c0-bbaecf517f87",
            "type": "select",
            "displayValue": "false",
            "structure": []
          },
          {
            "id": "6bc304e0-d6e7-11ee-91f4-d9e1a547e378",
            "value": "[\"multipleTenantInstaller\"]",
            "type": "string",
            "structure": []
          }
        ],
        "settings": [
          {
            "id": "datasource",
            "value": "e649bbb1-4b70-42fa-88ee-11d1aa9a7119",
            "type": "select",
            "structure": []
          },
          {
            "id": "blendr_on_error",
            "value": "stop",
            "type": "select",
            "structure": []
          },
          {
            "id": "automations_censor_data",
            "value": false,
            "type": "checkbox",
            "structure": []
          }
        ],
        "collapsed": [{ "name": "loop", "isCollapsed": false }],
        "x": 360,
        "y": 9900,
        "datasourcetype_guid": "c7e48240-e0f2-11ec-ada1-d5ef75014b77",
        "endpoint_guid": "4bf2fbe0-d6de-11ee-bb93-8515374f2012",
        "endpoint_role": "create"
      },
      {
        "id": "E9D15206-6B5A-473C-BE01-82C38F32A5D5",
        "type": "EndpointBlock",
        "disabled": false,
        "name": "GetLicenseOverview",
        "displayName": "Qlik Platform Operations - Get License Overview",
        "comment": "Get current tenant license to determine model type",
        "childId": "C95C98EB-4C29-4150-882B-943F8FAB837D",
        "inputs": [
          {
            "id": "6ee8e9c0-9d78-11ed-9bc8-9be121ac3db0",
            "value": "{$.parentTenant}",
            "type": "string",
            "structure": []
          }
        ],
        "settings": [
          {
            "id": "datasource",
            "value": "e649bbb1-4b70-42fa-88ee-11d1aa9a7119",
            "type": "select",
            "structure": []
          },
          {
            "id": "blendr_on_error",
            "value": "stop",
            "type": "select",
            "structure": []
          },
          { "id": "cache", "value": "0", "type": "select", "structure": [] },
          {
            "id": "automations_censor_data",
            "value": false,
            "type": "checkbox",
            "structure": []
          }
        ],
        "collapsed": [{ "name": "loop", "isCollapsed": false }],
        "x": 556,
        "y": 2864,
        "datasourcetype_guid": "c7e48240-e0f2-11ec-ada1-d5ef75014b77",
        "endpoint_guid": "6ea9fa20-9d78-11ed-a228-a3d1b7dd2e0f",
        "endpoint_role": "get"
      },
      {
        "id": "C95C98EB-4C29-4150-882B-943F8FAB837D",
        "type": "IfElseBlock",
        "disabled": false,
        "name": "condition10",
        "displayName": "Condition 10",
        "comment": "Determine and set the subscriptionType as user or capacity",
        "childId": "B0F53EA8-15FC-482D-9612-E2756224D632",
        "inputs": [
          {
            "id": "conditions",
            "value": {
              "mode": "all",
              "conditions": [
                {
                  "input1": "{$.GetLicenseOverview.allotments[*].name}",
                  "input2": "fullUser",
                  "operator": "inList"
                }
              ]
            },
            "type": "custom",
            "structure": []
          }
        ],
        "settings": [],
        "collapsed": [
          { "name": "both", "isCollapsed": false },
          { "name": "yes", "isCollapsed": false },
          { "name": "no", "isCollapsed": false }
        ],
        "x": -400,
        "y": 4553,
        "childTrueId": "1DC51199-4D45-414D-8895-8EB87E88C3F3",
        "childFalseId": "F35448D5-331A-463B-8CA6-89D6B51F1BD5"
      },
      {
        "id": "1DC51199-4D45-414D-8895-8EB87E88C3F3",
        "type": "VariableBlock",
        "disabled": false,
        "name": "subscriptionType",
        "displayName": "Variable - subscriptionType",
        "comment": "",
        "childId": null,
        "inputs": [],
        "settings": [],
        "collapsed": [{ "name": "loop", "isCollapsed": false }],
        "x": 240,
        "y": 4700,
        "variableGuid": "65330171-12DB-47EB-98CB-8FB805DF6719",
        "operations": [
          {
            "id": "set_value",
            "key": "4424D5FB-85D7-4ED5-90EB-A2B45FF3DF50",
            "name": "Set value of { variable }",
            "value": "capacity"
          }
        ]
      },
      {
        "id": "F35448D5-331A-463B-8CA6-89D6B51F1BD5",
        "type": "VariableBlock",
        "disabled": false,
        "name": "subscriptionType",
        "displayName": "Variable - subscriptionType",
        "comment": "",
        "childId": null,
        "inputs": [],
        "settings": [],
        "collapsed": [{ "name": "loop", "isCollapsed": false }],
        "x": 120,
        "y": 2680,
        "variableGuid": "65330171-12DB-47EB-98CB-8FB805DF6719",
        "operations": [
          {
            "id": "set_value",
            "key": "4424D5FB-85D7-4ED5-90EB-A2B45FF3DF50",
            "name": "Set value of { variable }",
            "value": "user"
          }
        ]
      },
      {
        "id": "7A6E4308-9662-4E20-9C99-C794C49F3FBF",
        "type": "EndpointBlock",
        "disabled": false,
        "name": "listGlossaries",
        "displayName": "Qlik Cloud Services - List Glossaries",
        "comment": "",
        "childId": "7B0F0466-9C0E-4449-83E7-BCA415566645",
        "inputs": [],
        "settings": [
          {
            "id": "maxitemcount",
            "value": "",
            "type": "string",
            "structure": []
          },
          {
            "id": "blendr_on_error",
            "value": "stop",
            "type": "select",
            "structure": []
          },
          { "id": "cache", "value": "0", "type": "select", "structure": [] },
          {
            "id": "automations_censor_data",
            "value": false,
            "type": "checkbox",
            "structure": []
          }
        ],
        "collapsed": [{ "name": "loop", "isCollapsed": true }],
        "x": -411,
        "y": 911,
        "loopBlockId": null,
        "datasourcetype_guid": "61a87510-c7a3-11ea-95da-0fb0c241e75c",
        "endpoint_guid": "df689160-53bc-11ee-b8e0-4d2494612b78",
        "endpoint_role": "list"
      },
      {
        "id": "7B0F0466-9C0E-4449-83E7-BCA415566645",
        "type": "FilterListBlock",
        "disabled": false,
        "name": "filterList",
        "displayName": "Filter over Qlik Cloud Services - List Glossaries - Filter List",
        "comment": "",
        "childId": "184E1FA9-6D7B-4781-A32F-09668BFEA978",
        "inputs": [
          {
            "id": "list",
            "value": "{ $.listGlossaries }",
            "type": "string",
            "structure": []
          },
          {
            "id": "conditions",
            "value": {
              "mode": "all",
              "conditions": [
                {
                  "input1": "name",
                  "input2": "{$.glossaryName}",
                  "operator": "="
                }
              ]
            },
            "type": "custom",
            "structure": []
          }
        ],
        "settings": [
          {
            "id": "automations_censor_data",
            "value": false,
            "type": "checkbox",
            "structure": []
          }
        ],
        "collapsed": [{ "name": "loop", "isCollapsed": true }],
        "x": 149,
        "y": 1005,
        "loopBlockId": null
      },
      {
        "id": "184E1FA9-6D7B-4781-A32F-09668BFEA978",
        "type": "IfElseBlock",
        "disabled": false,
        "name": "condition17",
        "displayName": "Condition 17",
        "comment": "If glossary exists",
        "childId": "165B3E09-21E4-4BFB-A153-0E22C91CD835",
        "inputs": [
          {
            "id": "conditions",
            "value": {
              "mode": "all",
              "conditions": [
                {
                  "input1": "{count: {$.filterList}}",
                  "input2": "1",
                  "operator": "="
                }
              ]
            },
            "type": "custom",
            "structure": []
          }
        ],
        "settings": [],
        "collapsed": [
          { "name": "both", "isCollapsed": false },
          { "name": "yes", "isCollapsed": false },
          { "name": "no", "isCollapsed": false }
        ],
        "x": -428,
        "y": 1370,
        "childTrueId": "9BD3791C-64AA-4383-AA5A-63AA2D6C8811",
        "childFalseId": "620D4E68-F326-4866-9D76-22145CE26C43"
      },
      {
        "id": "9BD3791C-64AA-4383-AA5A-63AA2D6C8811",
        "type": "VariableBlock",
        "disabled": false,
        "name": "glossaryId",
        "displayName": "Variable - glossaryId",
        "comment": "",
        "childId": null,
        "inputs": [],
        "settings": [],
        "collapsed": [{ "name": "loop", "isCollapsed": false }],
        "x": 120,
        "y": 1640,
        "variableGuid": "2AE59D02-913F-4BD3-875D-FB8B063C136F",
        "operations": [
          {
            "id": "set_value",
            "key": "1F238C0D-6F30-4302-BE72-3795E8505D85",
            "name": "Set value of { variable }",
            "value": "{$.filterList[0].id}"
          }
        ]
      },
      {
        "id": "620D4E68-F326-4866-9D76-22145CE26C43",
        "type": "EndpointBlock",
        "disabled": false,
        "name": "createGlossary",
        "displayName": "Qlik Cloud Services - Create Glossary",
        "comment": "",
        "childId": "1830CE19-5F0E-4CE5-8FD2-567B925E25CA",
        "inputs": [
          {
            "id": "b772d1e0-5609-11ee-9194-27d723b3c3a8",
            "value": "{$.glossaryName}",
            "type": "string",
            "structure": []
          },
          {
            "id": "b7810170-5609-11ee-90e4-d3646ac7e81c",
            "value": "A list of tenants used by the multiple tenant monitoring app installer. Specify a tenant URL as the name of a new term, and tag the term with either parent (monitoring or orchestration tenant) or child (end customer tenant).",
            "type": "string",
            "structure": []
          },
          {
            "id": "b790c2b0-5609-11ee-82da-95f092925895",
            "value": null,
            "type": "string",
            "structure": []
          }
        ],
        "settings": [
          {
            "id": "blendr_on_error",
            "value": "stop",
            "type": "select",
            "structure": []
          },
          {
            "id": "automations_censor_data",
            "value": false,
            "type": "checkbox",
            "structure": []
          }
        ],
        "collapsed": [{ "name": "loop", "isCollapsed": false }],
        "x": -376,
        "y": 1605,
        "datasourcetype_guid": "61a87510-c7a3-11ea-95da-0fb0c241e75c",
        "endpoint_guid": "b752cb40-5609-11ee-9bb1-014aa10c2b62",
        "endpoint_role": "create"
      },
      {
        "id": "8C489E58-8C52-4D93-8E69-3853B4AE145F",
        "type": "VariableBlock",
        "disabled": false,
        "name": "glossaryId",
        "displayName": "Variable - glossaryId",
        "comment": "",
        "childId": "61C195DB-0BEF-4EA8-B75A-91F34D649225",
        "inputs": [],
        "settings": [],
        "collapsed": [{ "name": "loop", "isCollapsed": false }],
        "x": 120,
        "y": 2280,
        "variableGuid": "2AE59D02-913F-4BD3-875D-FB8B063C136F",
        "operations": [
          {
            "id": "set_value",
            "key": "1F238C0D-6F30-4302-BE72-3795E8505D85",
            "name": "Set value of { variable }",
            "value": "{$.createGlossary.id}"
          }
        ]
      },
      {
        "id": "61C195DB-0BEF-4EA8-B75A-91F34D649225",
        "type": "ShowBlock",
        "disabled": false,
        "name": "output4",
        "displayName": "Output 4",
        "comment": "",
        "childId": null,
        "inputs": [
          {
            "id": "input",
            "value": "## Initializing\n\nGlossary containing tenant list not found. Created new glossary: [{$.createGlossary.name}](https://{if: {$.getCurrentTenantInfo.hostnames[1]} notEmpty , $.getCurrentTenantInfo.hostnames[1], $.getCurrentTenantInfo.hostnames[0]}/glossary/{$.createGlossary.id}) in current user's personal space, and added current tenant hostname.",
            "type": "string",
            "structure": []
          }
        ],
        "settings": [
          {
            "id": "display_mode",
            "value": "add",
            "type": "select",
            "structure": []
          }
        ],
        "collapsed": [{ "name": "loop", "isCollapsed": false }],
        "x": -354,
        "y": 1397
      },
      {
        "id": "1830CE19-5F0E-4CE5-8FD2-567B925E25CA",
        "type": "EndpointBlock",
        "disabled": false,
        "name": "createTerm",
        "displayName": "Qlik Cloud Services - Create Term",
        "comment": "",
        "childId": "8C489E58-8C52-4D93-8E69-3853B4AE145F",
        "inputs": [
          {
            "id": "8253b200-5630-11ee-b2fd-350e5f792573",
            "value": "{$.createGlossary.id}",
            "type": "string",
            "structure": []
          },
          {
            "id": "c58d35e0-5630-11ee-a6e7-db6b6498f098",
            "value": "{$.getCurrentTenantInfo.hostnames[0]}",
            "type": "string",
            "structure": []
          },
          {
            "id": "dda04000-5630-11ee-befb-8fbf9676df42",
            "value": null,
            "type": "string",
            "structure": []
          },
          {
            "id": "f0683590-5630-11ee-bc41-87f09bdb7cb1",
            "value": null,
            "type": "string",
            "structure": []
          },
          {
            "id": "fc259e70-5630-11ee-a52f-1fa41edbebb5",
            "value": null,
            "type": "string",
            "structure": []
          },
          {
            "id": "0dc39800-5631-11ee-be4f-83abc7829d44",
            "value": null,
            "type": "string",
            "structure": []
          },
          {
            "id": "2030ec50-5631-11ee-9c17-45161d913a0d",
            "value": null,
            "type": "string",
            "structure": []
          },
          {
            "id": "30788ec0-5631-11ee-a358-ffcea70b8008",
            "value": null,
            "type": "string",
            "structure": []
          },
          {
            "id": "3fe038d0-5631-11ee-9cc0-4d24c1965989",
            "value": null,
            "type": "string",
            "structure": []
          },
          {
            "id": "4980a610-5631-11ee-8f70-9764de6e36dd",
            "value": null,
            "type": "string",
            "structure": []
          }
        ],
        "settings": [
          {
            "id": "blendr_on_error",
            "value": "stop",
            "type": "select",
            "structure": []
          },
          {
            "id": "automations_censor_data",
            "value": false,
            "type": "checkbox",
            "structure": []
          }
        ],
        "collapsed": [{ "name": "loop", "isCollapsed": false }],
        "x": 466,
        "y": 2102,
        "datasourcetype_guid": "61a87510-c7a3-11ea-95da-0fb0c241e75c",
        "endpoint_guid": "82432160-5630-11ee-b2f4-3b97c6c1c76e",
        "endpoint_role": "create"
      },
      {
        "id": "E1CD3346-92AC-44CA-8A3D-3C6B5A7BF981",
        "type": "EndpointBlock",
        "disabled": false,
        "name": "getCurrentTenantInfo",
        "displayName": "Qlik Cloud Services - Get Current Tenant Info",
        "comment": "",
        "childId": "95E63B22-D2BE-4670-B6EA-1A957641F598",
        "inputs": [],
        "settings": [
          {
            "id": "blendr_on_error",
            "value": "stop",
            "type": "select",
            "structure": []
          },
          { "id": "cache", "value": "0", "type": "select", "structure": [] },
          {
            "id": "automations_censor_data",
            "value": false,
            "type": "checkbox",
            "structure": []
          }
        ],
        "collapsed": [{ "name": "loop", "isCollapsed": false }],
        "x": 548,
        "y": 1321,
        "datasourcetype_guid": "61a87510-c7a3-11ea-95da-0fb0c241e75c",
        "endpoint_guid": "55051480-cb86-11ec-b746-892c1d04114e",
        "endpoint_role": "get"
      },
      {
        "id": "D415F6E5-6A63-4687-9537-9EB06A0C835C",
        "type": "VariableBlock",
        "disabled": false,
        "name": "glossaryName",
        "displayName": "Variable - glossaryName",
        "comment": "Specify which glossary to get tenant list from",
        "childId": "DA684624-B2A8-468D-B3D5-544F5C2393D2",
        "inputs": [],
        "settings": [],
        "collapsed": [{ "name": "loop", "isCollapsed": false }],
        "x": 223.62066593534504,
        "y": 881.3698231980388,
        "variableGuid": "C65E4AE0-B0C9-40BD-AAE6-438324B545A4",
        "operations": [
          {
            "id": "set_value",
            "key": "FD6DC736-182B-413C-A045-F97D399CB461",
            "name": "Set value of { variable }",
            "value": "TenantList"
          }
        ]
      },
      {
        "id": "0B055B29-89B7-4FFB-9A17-B6B004941D72",
        "type": "IfElseBlock",
        "disabled": false,
        "name": "condition22",
        "displayName": "Condition 22",
        "comment": "If API key not active, exit. Likely due to expiry being an invalid duration.",
        "childId": "C95E46BD-C17F-45B0-9E6B-DFDBE311F6CB",
        "inputs": [
          {
            "id": "conditions",
            "value": {
              "mode": "all",
              "conditions": [
                {
                  "input1": "{$.createAPIKey.status}",
                  "input2": "active",
                  "operator": "!="
                }
              ]
            },
            "type": "custom",
            "structure": []
          }
        ],
        "settings": [],
        "collapsed": [
          { "name": "both", "isCollapsed": false },
          { "name": "yes", "isCollapsed": false },
          { "name": "no", "isCollapsed": false }
        ],
        "x": -406,
        "y": 9098,
        "childTrueId": "F92683FE-AEA7-4886-B30A-81F398FE5128",
        "childFalseId": "F4D45158-9782-4A88-AD42-834FFC45750C"
      },
      {
        "id": "F92683FE-AEA7-4886-B30A-81F398FE5128",
        "type": "ErrorBlock",
        "disabled": false,
        "name": "error3",
        "displayName": "Error 3",
        "comment": "",
        "childId": null,
        "inputs": [
          {
            "id": "message",
            "value": "API key creation error for {$.loopTenant}. This is sometimes caused by requesting an API key with a very long expiry.",
            "type": "string",
            "structure": []
          },
          { "id": "action", "value": "stop", "type": "select", "structure": [] }
        ],
        "settings": [],
        "collapsed": [{ "name": "loop", "isCollapsed": false }],
        "x": -411,
        "y": 9245
      },
      {
        "id": "33E323BF-67C3-4FF0-A19D-AB95FB0A1FCE",
        "type": "SnippetBlock",
        "disabled": false,
        "name": "CountRemainingAPIKeys",
        "displayName": "Qlik Platform Operations - Count Remaining API Keys",
        "comment": "",
        "childId": "F09A85E5-6A42-4C1F-BFB6-BCA33EA36110",
        "inputs": [
          {
            "id": "80a65ff0-d570-11ee-bf54-fd6364168594",
            "value": "{$.loopTenant}",
            "type": "string",
            "structure": []
          }
        ],
        "settings": [
          {
            "id": "datasource",
            "value": "e649bbb1-4b70-42fa-88ee-11d1aa9a7119",
            "type": "select",
            "structure": []
          },
          {
            "id": "blendr_on_error",
            "value": "stop",
            "type": "select",
            "structure": []
          },
          {
            "id": "automations_censor_data",
            "value": false,
            "type": "checkbox",
            "structure": []
          }
        ],
        "collapsed": [{ "name": "loop", "isCollapsed": false }],
        "x": 1021.1620115635347,
        "y": 8712.047416758081,
        "datasourcetype_guid": "c7e48240-e0f2-11ec-ada1-d5ef75014b77",
        "snippet_guid": "f96bc780-d552-11ee-944d-a3153a5c7ca0"
      },
      {
        "id": "E56177FC-87D9-454C-B99B-02CEB39F1500",
        "type": "VariableBlock",
        "disabled": false,
        "name": "parentTenant",
        "displayName": "Variable - parentTenant",
        "comment": "Set parent tenant to this tenant",
        "childId": "7A6E4308-9662-4E20-9C99-C794C49F3FBF",
        "inputs": [],
        "settings": [],
        "collapsed": [{ "name": "loop", "isCollapsed": false }],
        "x": 508,
        "y": 1286,
        "variableGuid": "7F782E8A-190C-4911-BC05-2C9913FBEAE9",
        "operations": [
          {
            "id": "set_value",
            "key": "ECC7358A-2CB3-4524-8E1C-B54E818A6F60",
            "name": "Set value of { variable }",
            "value": "{$.getCurrentTenantInfo.hostnames[0]}"
          }
        ]
      },
      {
        "id": "02E98CD1-1D92-4110-803C-6024431DA22D",
        "type": "IfElseBlock",
        "disabled": false,
        "name": "condition9",
        "displayName": "Condition 9",
        "comment": "If loop tenant type = parent",
        "childId": null,
        "inputs": [
          {
            "id": "conditions",
            "value": {
              "mode": "all",
              "conditions": [
                {
                  "input1": "{$.loopTenantType}",
                  "input2": "parent",
                  "operator": "="
                }
              ]
            },
            "type": "custom",
            "structure": []
          }
        ],
        "settings": [],
        "collapsed": [
          { "name": "both", "isCollapsed": false },
          { "name": "yes", "isCollapsed": false },
          { "name": "no", "isCollapsed": false }
        ],
        "x": 1287,
        "y": 12013,
        "childTrueId": "0E9FD2FB-98FF-4384-A63A-14CC9332FD04",
        "childFalseId": "D5BD151B-7403-4494-A4D9-D98142C0D1A8"
      },
      {
        "id": "D5BD151B-7403-4494-A4D9-D98142C0D1A8",
        "type": "VariableBlock",
        "disabled": false,
        "name": "targetString",
        "displayName": "Variable - targetString",
        "comment": "",
        "childId": null,
        "inputs": [],
        "settings": [],
        "collapsed": [{ "name": "loop", "isCollapsed": false }],
        "x": 1330,
        "y": 12240,
        "variableGuid": "78C37A26-6056-40F7-A857-E84298458883",
        "operations": [
          {
            "id": "set_value",
            "key": "AF1A1AA1-D4D2-4FA6-AE3A-8636BB541D12",
            "name": "Set value of { variable }",
            "value": "SET vu_rest_connection = ':{$.restConnectorName}-{$.loopTenant}'; // comment out rest of this line"
          }
        ]
      },
      {
        "id": "E77E7939-E019-47D9-A3E6-16478B0F09B0",
        "type": "ShowBlock",
        "disabled": false,
        "name": "output5",
        "displayName": "Output 5",
        "comment": "Output config",
        "childId": "52638FB0-8EE1-4B35-87DA-BC400AA00D04",
        "inputs": [
          {
            "id": "input",
            "value": "## Multiple tenant monitoring app manager\n\n### Configuration\n\n| Param | Value |\n|------------------------|---------------------------|\n| Glossary name | {$.glossaryName} |\n| Manifest URL | {$.manifestUrl} |\n| Parent tenant | {$.parentTenant} |\n| Recreate connections | { if: {$.recreateConnections} = 1, '*All REST connections & API keys being recreated*', 'No changes made to existing REST connections or API keys' } |\n| Replace all apps | { if: {$.replaceAllApps} = 1, '*All apps being fully replaced due to override*', 'Replacing outdated apps only' } |\n| API key expiration override | { if: {$.setMaxApiKey} notEmpty , '*Will set all tenants to { $.setMaxApiKey }*', 'Current tenant settings will be used' } |\n| Automatic tenant cleanup | { if: { $.autoTenantCleanup } = 1, '*Auto delete missing tenant data*', 'No' } |\n| REST connector name | {$.restConnectorName} |\n| Shared space base name | {$.sharedSpaceName} |\n| Subscription type | {$.subscriptionType} |\n| Tenant count | {count: {$.tenantList}}|\n| Version | {$.qcmamtVersion} |",
            "type": "string",
            "structure": []
          }
        ],
        "settings": [
          {
            "id": "display_mode",
            "value": "add",
            "type": "select",
            "structure": []
          }
        ],
        "collapsed": [{ "name": "loop", "isCollapsed": false }],
        "x": 0,
        "y": 4400
      },
      {
        "id": "B0F53EA8-15FC-482D-9612-E2756224D632",
        "type": "VariableBlock",
        "disabled": false,
        "name": "manifestUrl",
        "displayName": "Variable - manifestUrl",
        "comment": "",
        "childId": "E77E7939-E019-47D9-A3E6-16478B0F09B0",
        "inputs": [],
        "settings": [],
        "collapsed": [{ "name": "loop", "isCollapsed": false }],
        "x": 250,
        "y": 3080,
        "variableGuid": "5C1A8781-B67B-4D16-AD4F-BE978AB2BB60",
        "operations": [
          {
            "id": "set_value",
            "key": "4424D5FB-85D7-4ED5-90EB-A2B45FF3DF50",
            "name": "Set value of { variable }",
            "value": "https://github.com/qlik-oss/qlik-cloud-monitoring-apps/raw/refs/heads/main/manifests/resources.json"
          }
        ]
      },
      {
        "id": "33B0FCA1-2D13-490D-A0DE-F5E384E62391",
        "type": "SnippetBlock",
        "disabled": false,
        "name": "CreateTagIfNotExisting",
        "displayName": "Qlik Platform Operations - Create Tag If Not Existing",
        "comment": "",
        "childId": "7C3D6725-C881-450B-8104-382494E85315",
        "inputs": [
          {
            "id": "f05e2c20-481e-11ef-8ce4-0b179d1a2861",
            "value": "{ $.parentTenant }",
            "type": "string",
            "structure": []
          },
          {
            "id": "7f0c8220-4da2-11ef-a05a-89c50f594b4e",
            "value": "autoDeployMonitoringApps-{$.loopSpaceName}",
            "type": "string",
            "structure": []
          }
        ],
        "settings": [
          {
            "id": "datasource",
            "value": "e649bbb1-4b70-42fa-88ee-11d1aa9a7119",
            "type": "select",
            "structure": []
          },
          {
            "id": "blendr_on_error",
            "value": "stop",
            "type": "select",
            "structure": []
          },
          {
            "id": "automations_censor_data",
            "value": false,
            "type": "checkbox",
            "structure": []
          }
        ],
        "collapsed": [{ "name": "loop", "isCollapsed": false }],
        "x": -338,
        "y": 7505,
        "datasourcetype_guid": "c7e48240-e0f2-11ec-ada1-d5ef75014b77",
        "snippet_guid": "f0587940-481e-11ef-85d6-75c3687046d0"
      },
      {
        "id": "6D7DB8F9-8555-45BF-9C10-E6092566A794",
        "type": "ShowBlock",
        "disabled": false,
        "name": "output6",
        "displayName": "Output 6",
        "comment": "Output apps table header",
        "childId": "4394BC5C-655D-4BC3-9767-1A4D00351713",
        "inputs": [
          {
            "id": "input",
            "value": "### Available apps\n\n| App name | Version |\n|------------------------|---------------------------|",
            "type": "string",
            "structure": []
          }
        ],
        "settings": [
          {
            "id": "display_mode",
            "value": "add",
            "type": "select",
            "structure": []
          }
        ],
        "collapsed": [{ "name": "loop", "isCollapsed": false }],
        "x": 0,
        "y": 3320
      },
      {
        "id": "F91709AC-C27A-46E1-AB38-122EE9E68615",
        "type": "ShowBlock",
        "disabled": false,
        "name": "output8",
        "displayName": "Output 8",
        "comment": "Output config",
        "childId": null,
        "inputs": [
          {
            "id": "input",
            "value": "| {$.filterList6.item.name} | {$.filterList6.item.version} |",
            "type": "string",
            "structure": []
          }
        ],
        "settings": [
          {
            "id": "display_mode",
            "value": "add",
            "type": "select",
            "structure": []
          }
        ],
        "collapsed": [{ "name": "loop", "isCollapsed": false }],
        "x": 250,
        "y": 3320
      },
      {
        "id": "4FBF5D86-955C-43D4-900B-1F366B81DB61",
        "type": "ShowBlock",
        "disabled": false,
        "name": "output9",
        "displayName": "Output 9",
        "comment": "Output deployment table header",
        "childId": "D60AA6BA-E349-479B-87A1-5CADE55DF810",
        "inputs": [
          {
            "id": "input",
            "value": "### Deployments\n\n| # | Tenant Hostname | User ID | Space | REST connection |{implode: {$.filterList6[*].name}, '|'}|\n|-----|-----|-----|-----|-----|{regexreplace: {implode: {$.filterList6[*].name}, '|'}, '[^|]+', '---'}|",
            "type": "string",
            "structure": []
          }
        ],
        "settings": [
          {
            "id": "display_mode",
            "value": "add",
            "type": "select",
            "structure": []
          }
        ],
        "collapsed": [{ "name": "loop", "isCollapsed": false }],
        "x": 0,
        "y": 4300
      },
      {
        "id": "12C5F24F-DB03-46F5-9972-87C1ADA82A9F",
        "type": "VariableBlock",
        "disabled": false,
        "name": "outputRow",
        "displayName": "Variable - outputRow",
        "comment": "Output row builder for table",
        "childId": "B97E3A59-5759-42A4-9B63-BEF5CDA6BA04",
        "inputs": [],
        "settings": [],
        "collapsed": [{ "name": "loop", "isCollapsed": false }],
        "x": 603,
        "y": 5836,
        "variableGuid": "05EFE0DB-E887-420D-8F2E-27735E36B40C",
        "operations": [
          {
            "id": "set_value",
            "key": "17119AC9-28BC-4B0B-9B5C-197BAE48BCD1",
            "name": "Set value of { variable }",
            "value": "{$.iter} | [{$.loopTenant}](https://{$.loopTenant}) | { $.GetUserId } | [{ $.loopSpaceName }](https://{ $.parentTenant }/analytics/catalog?space_filter={ $.createSpaceIfNotExisting.id }) |"
          }
        ]
      },
      {
        "id": "BE430E56-DB40-4F29-805E-087BAD434435",
        "type": "IfElseBlock",
        "disabled": false,
        "name": "condition12",
        "displayName": "Condition 12",
        "comment": "If child tenant space",
        "childId": "5EE9DB99-6FB9-4D61-A5F3-90F0ECCCDAD6",
        "inputs": [
          {
            "id": "conditions",
            "value": {
              "mode": "all",
              "conditions": [
                {
                  "input1": "{ $.loopTenantType }",
                  "input2": "child",
                  "operator": "="
                }
              ]
            },
            "type": "custom",
            "structure": []
          }
        ],
        "settings": [],
        "collapsed": [
          { "name": "both", "isCollapsed": false },
          { "name": "yes", "isCollapsed": false },
          { "name": "no", "isCollapsed": false }
        ],
        "x": 360,
        "y": 6300,
        "childTrueId": "0FB8C177-55A1-4825-BAB1-0A69866AC91F",
        "childFalseId": "D0873ABD-39CC-4395-A803-D44557AF0638"
      },
      {
        "id": "C95E46BD-C17F-45B0-9E6B-DFDBE311F6CB",
        "type": "VariableBlock",
        "disabled": false,
        "name": "outputRow",
        "displayName": "Variable - outputRow",
        "comment": "Output row builder for table",
        "childId": null,
        "inputs": [],
        "settings": [],
        "collapsed": [{ "name": "loop", "isCollapsed": false }],
        "x": 480,
        "y": 7920,
        "variableGuid": "05EFE0DB-E887-420D-8F2E-27735E36B40C",
        "operations": [
          {
            "id": "set_value",
            "key": "C815A1C3-34FA-45E3-BD0E-20CD6C782FDF",
            "name": "Set value of { variable }",
            "value": "{ $.outputRow } { if: { $.listDataConnections[*].qName } notInList { $.restConnectorName }-{ $.loopTenant }, 'Created', 'Recreated' } |"
          }
        ]
      },
      {
        "id": "D0873ABD-39CC-4395-A803-D44557AF0638",
        "type": "VariableBlock",
        "disabled": false,
        "name": "outputRow",
        "displayName": "Variable - outputRow",
        "comment": "Output row builder for table",
        "childId": null,
        "inputs": [],
        "settings": [],
        "collapsed": [{ "name": "loop", "isCollapsed": false }],
        "x": 360,
        "y": 8320,
        "variableGuid": "05EFE0DB-E887-420D-8F2E-27735E36B40C",
        "operations": [
          {
            "id": "set_value",
            "key": "C815A1C3-34FA-45E3-BD0E-20CD6C782FDF",
            "name": "Set value of { variable }",
            "value": "{ $.outputRow } N/A |"
          }
        ]
      },
      {
        "id": "BC0FE9D3-F9F8-4397-A0CC-FFEDA087A21A",
        "type": "VariableBlock",
        "disabled": false,
        "name": "outputRow",
        "displayName": "Variable - outputRow",
        "comment": "Output row builder for table",
        "childId": null,
        "inputs": [],
        "settings": [],
        "collapsed": [{ "name": "loop", "isCollapsed": false }],
        "x": 730,
        "y": 7920,
        "variableGuid": "05EFE0DB-E887-420D-8F2E-27735E36B40C",
        "operations": [
          {
            "id": "set_value",
            "key": "C815A1C3-34FA-45E3-BD0E-20CD6C782FDF",
            "name": "Set value of { variable }",
            "value": "{ $.outputRow } Skipped |"
          }
        ]
      },
      {
        "id": "D8CCAC5B-D77A-4E8B-BED2-E76DD0C011AB",
        "type": "VariableBlock",
        "disabled": false,
        "name": "outputRow",
        "displayName": "Variable - outputRow",
        "comment": "Output row builder for table",
        "childId": "76E247DF-6190-4E63-8760-4B2D3D15E5B2",
        "inputs": [],
        "settings": [],
        "collapsed": [{ "name": "loop", "isCollapsed": false }],
        "x": 720,
        "y": 9320,
        "variableGuid": "05EFE0DB-E887-420D-8F2E-27735E36B40C",
        "operations": [
          {
            "id": "set_value",
            "key": "C815A1C3-34FA-45E3-BD0E-20CD6C782FDF",
            "name": "Set value of { variable }",
            "value": "{ $.outputRow } [{implode: {$.listApps3.item.meta.tags[*].name}, ','}] vs [{$.loop7.item.version}] |"
          }
        ]
      },
      {
        "id": "7D554635-3108-4E90-B6C3-112C595FDEDF",
        "type": "VariableBlock",
        "disabled": false,
        "name": "outputRow",
        "displayName": "Variable - outputRow",
        "comment": "Output row builder for table",
        "childId": null,
        "inputs": [],
        "settings": [],
        "collapsed": [{ "name": "loop", "isCollapsed": false }],
        "x": 600,
        "y": 14360,
        "variableGuid": "05EFE0DB-E887-420D-8F2E-27735E36B40C",
        "operations": [
          {
            "id": "set_value",
            "key": "C815A1C3-34FA-45E3-BD0E-20CD6C782FDF",
            "name": "Set value of { variable }",
            "value": "{ $.outputRow } Skipped, up to date [{$.loop7.item.version}] |"
          }
        ]
      },
      {
        "id": "F5AE4168-C97F-4845-B79E-58A2C5CD1800",
        "type": "IfElseBlock",
        "disabled": false,
        "name": "condition2",
        "displayName": "Condition 2",
        "comment": "If a new deployment, custom output prep",
        "childId": "951F5367-0564-4D4D-8346-A20C58BE637D",
        "inputs": [
          {
            "id": "conditions",
            "value": {
              "mode": "all",
              "conditions": [
                {
                  "input1": "{count: {$.listApps3}}",
                  "input2": "0",
                  "operator": "="
                }
              ]
            },
            "type": "custom",
            "structure": []
          }
        ],
        "settings": [],
        "collapsed": [
          { "name": "both", "isCollapsed": false },
          { "name": "yes", "isCollapsed": false },
          { "name": "no", "isCollapsed": false }
        ],
        "x": -422,
        "y": 9540,
        "childTrueId": "8234E09F-7B24-4E21-AD26-9C4EBC034ABC",
        "childFalseId": null
      },
      {
        "id": "8234E09F-7B24-4E21-AD26-9C4EBC034ABC",
        "type": "VariableBlock",
        "disabled": false,
        "name": "outputRow",
        "displayName": "Variable - outputRow",
        "comment": "Output row builder for table",
        "childId": null,
        "inputs": [],
        "settings": [],
        "collapsed": [{ "name": "loop", "isCollapsed": false }],
        "x": 970,
        "y": 9320,
        "variableGuid": "05EFE0DB-E887-420D-8F2E-27735E36B40C",
        "operations": [
          {
            "id": "set_value",
            "key": "C815A1C3-34FA-45E3-BD0E-20CD6C782FDF",
            "name": "Set value of { variable }",
            "value": "{ $.outputRow } Deployed [{$.loop7.item.version}] |"
          }
        ]
      },
      {
        "id": "35AB855C-019E-4461-A9E2-E10475D4CBAF",
        "type": "SnippetBlock",
        "disabled": false,
        "name": "AddTagToItemByName",
        "displayName": "Qlik Platform Operations - Add Tag To Item By Name",
        "comment": "Add version tag",
        "childId": "AD20DF22-1045-4075-AAA3-21A490E6BC9F",
        "inputs": [
          {
            "id": "85c7de70-44dc-11ef-b55d-31f49487adbf",
            "value": "{ $.parentTenant }",
            "type": "string",
            "structure": []
          },
          {
            "id": "85c83a10-44dc-11ef-8fb6-9127ffa3db3d",
            "value": "{ $.listItems4.item.id }",
            "type": "string",
            "structure": []
          },
          {
            "id": "85c86e00-44dc-11ef-94f5-05c727f96e22",
            "value": "{ $.loop7.item.version }",
            "type": "string",
            "structure": []
          }
        ],
        "settings": [
          {
            "id": "datasource",
            "value": "e649bbb1-4b70-42fa-88ee-11d1aa9a7119",
            "type": "select",
            "structure": []
          },
          {
            "id": "blendr_on_error",
            "value": "stop",
            "type": "select",
            "structure": []
          },
          {
            "id": "automations_censor_data",
            "value": false,
            "type": "checkbox",
            "structure": []
          }
        ],
        "collapsed": [{ "name": "loop", "isCollapsed": false }],
        "x": 720,
        "y": 10900,
        "datasourcetype_guid": "c7e48240-e0f2-11ec-ada1-d5ef75014b77",
        "snippet_guid": "85c38020-44dc-11ef-ba34-b984c74c5e2a"
      },
      {
        "id": "5FE6B65F-FA10-44E0-A038-536C3D312A9C",
        "type": "ErrorBlock",
        "disabled": false,
        "name": "error",
        "displayName": "Error",
        "comment": "",
        "childId": null,
        "inputs": [
          {
            "id": "message",
            "value": "Can't access tenant { $.loopTenant }",
            "type": "string",
            "structure": []
          },
          {
            "id": "action",
            "value": "continue",
            "type": "select",
            "displayValue": "Continue the Automation",
            "structure": []
          }
        ],
        "settings": [],
        "collapsed": [{ "name": "loop", "isCollapsed": false }],
        "x": -432,
        "y": 14381
      },
      {
        "id": "2A536657-741B-4D02-85E0-4AD1262D90AD",
        "type": "VariableBlock",
        "disabled": false,
        "name": "outputRow",
        "displayName": "Variable - outputRow",
        "comment": "Output row builder for table",
        "childId": null,
        "inputs": [],
        "settings": [],
        "collapsed": [{ "name": "loop", "isCollapsed": false }],
        "x": 850,
        "y": 14360,
        "variableGuid": "05EFE0DB-E887-420D-8F2E-27735E36B40C",
        "operations": [
          {
            "id": "set_value",
            "key": "C815A1C3-34FA-45E3-BD0E-20CD6C782FDF",
            "name": "Set value of { variable }",
            "value": "{$.outputRow} N/A |"
          }
        ]
      },
      {
        "id": "7FF6A4FD-06E6-497C-8B42-A21718BCBFFB",
        "type": "VariableBlock",
        "disabled": false,
        "name": "doReload",
        "displayName": "Variable - doReload",
        "comment": "Set to 0 for no action, 1 to trigger an immediate reload.",
        "childId": "D415F6E5-6A63-4687-9537-9EB06A0C835C",
        "inputs": [],
        "settings": [],
        "collapsed": [{ "name": "loop", "isCollapsed": false }],
        "x": 250,
        "y": 240,
        "variableGuid": "5000C2B1-5FEE-4607-B840-B7D5410E3605",
        "operations": [
          {
            "id": "set_value",
            "key": "1D8A1E1E-78F1-4A10-8531-9612EC322A34",
            "name": "Set value of { variable }",
            "value": "1"
          }
        ]
      },
      {
        "id": "C063000F-C001-43D8-9411-46532D940112",
        "type": "IfElseBlock",
        "disabled": false,
        "name": "condition4",
        "displayName": "Condition 4",
        "comment": "If do reload & an app found",
        "childId": null,
        "inputs": [
          {
            "id": "conditions",
            "value": {
              "mode": "all",
              "conditions": [
                {
                  "input1": "{ $.loopReloadAppId }",
                  "input2": null,
                  "operator": "notEmpty"
                },
                { "input1": "{$.doReload}", "input2": "1", "operator": "=" }
              ]
            },
            "type": "custom",
            "structure": []
          }
        ],
        "settings": [],
        "collapsed": [
          { "name": "both", "isCollapsed": false },
          { "name": "yes", "isCollapsed": false },
          { "name": "no", "isCollapsed": false }
        ],
        "x": 480,
        "y": 15680,
        "childTrueId": "CB1096A2-2C94-43F3-ADCD-50FA3764FA8D",
        "childFalseId": null
      },
      {
        "id": "3F93BDD6-B1E4-45AA-9509-DA578420D587",
        "type": "VariableBlock",
        "disabled": false,
        "name": "loopReloadAppId",
        "displayName": "Variable - loopReloadAppId",
        "comment": "",
        "childId": null,
        "inputs": [],
        "settings": [],
        "collapsed": [{ "name": "loop", "isCollapsed": false }],
        "x": 720,
        "y": 9720,
        "variableGuid": "9A0C1661-6568-45DC-8C41-9A5F514E566E",
        "operations": [
          {
            "id": "set_value",
            "key": "11A1D12F-C6A3-4815-8603-D7AF691785E3",
            "name": "Set value of { variable }",
            "value": "{$.listApps3.item.resourceId}"
          }
        ]
      },
      {
        "id": "3F7B19BF-F56B-4A20-B8B9-1A6D743B7788",
        "type": "VariableBlock",
        "disabled": false,
        "name": "loopReloadAppId",
        "displayName": "Variable - loopReloadAppId",
        "comment": "",
        "childId": "A61AAC41-A685-4856-BA4C-0481F78BC844",
        "inputs": [],
        "settings": [],
        "collapsed": [{ "name": "loop", "isCollapsed": false }],
        "x": 1165,
        "y": 10250,
        "variableGuid": "9A0C1661-6568-45DC-8C41-9A5F514E566E",
        "operations": [
          {
            "id": "set_value",
            "key": "11A1D12F-C6A3-4815-8603-D7AF691785E3",
            "name": "Set value of { variable }",
            "value": "{$.importAppFromBase64EncodedFile2.attributes.id}"
          }
        ]
      },
      {
        "id": "AD20DF22-1045-4075-AAA3-21A490E6BC9F",
        "type": "SnippetBlock",
        "disabled": false,
        "name": "AddTagToItemByName2",
        "displayName": "Qlik Platform Operations - Add Tag To Item By Name 2",
        "comment": "Add version tag",
        "childId": null,
        "inputs": [
          {
            "id": "85c7de70-44dc-11ef-b55d-31f49487adbf",
            "value": "{ $.parentTenant }",
            "type": "string",
            "structure": []
          },
          {
            "id": "85c83a10-44dc-11ef-8fb6-9127ffa3db3d",
            "value": "{ $.listItems4.item.id }",
            "type": "string",
            "structure": []
          },
          {
            "id": "85c86e00-44dc-11ef-94f5-05c727f96e22",
            "value": "qcmtma-{ $.loopTenantType }-{ $.loopTenant }",
            "type": "string",
            "structure": []
          }
        ],
        "settings": [
          {
            "id": "datasource",
            "value": "e649bbb1-4b70-42fa-88ee-11d1aa9a7119",
            "type": "select",
            "structure": []
          },
          {
            "id": "blendr_on_error",
            "value": "stop",
            "type": "select",
            "structure": []
          },
          {
            "id": "automations_censor_data",
            "value": false,
            "type": "checkbox",
            "structure": []
          }
        ],
        "collapsed": [{ "name": "loop", "isCollapsed": false }],
        "x": 970,
        "y": 10900,
        "datasourcetype_guid": "c7e48240-e0f2-11ec-ada1-d5ef75014b77",
        "snippet_guid": "85c38020-44dc-11ef-ba34-b984c74c5e2a"
      },
      {
        "id": "DB96F31B-B0D0-4A1A-9337-5E53D1C50907",
        "type": "VariableBlock",
        "disabled": false,
        "name": "loopReloadAppId",
        "displayName": "Variable - loopReloadAppId",
        "comment": "",
        "childId": "8BD97D74-D764-424A-9405-BD6CBAD47C4A",
        "inputs": [],
        "settings": [],
        "collapsed": [{ "name": "loop", "isCollapsed": false }],
        "x": 1003,
        "y": 9134,
        "variableGuid": "9A0C1661-6568-45DC-8C41-9A5F514E566E",
        "operations": [
          {
            "id": "empty",
            "key": "B75F7A48-634F-4C8C-AB9E-E5C43AB9F64E",
            "name": "Empty { variable }",
            "value": null
          }
        ]
      },
      {
        "id": "CB1096A2-2C94-43F3-ADCD-50FA3764FA8D",
        "type": "EndpointBlock",
        "disabled": false,
        "name": "ReloadApp",
        "displayName": "Qlik Platform Operations - Reload App",
        "comment": "",
        "childId": null,
        "inputs": [
          {
            "id": "316c8ec0-7bbe-11ed-8141-37424be44416",
            "value": "{ $.parentTenant }",
            "type": "string",
            "structure": []
          },
          {
            "id": "3163ed10-7bbe-11ed-a20a-c1bddb313708",
            "value": "{ $.loopReloadAppId }",
            "type": "string",
            "structure": []
          },
          {
            "id": "31766c00-7bbe-11ed-847c-db5006ec70d4",
            "value": "71f395f0-7bbe-11ed-89cc-97553192a0f2",
            "type": "select",
            "displayValue": "false",
            "structure": []
          }
        ],
        "settings": [
          {
            "id": "datasource",
            "value": "e649bbb1-4b70-42fa-88ee-11d1aa9a7119",
            "type": "select",
            "structure": []
          },
          {
            "id": "blendr_on_error",
            "value": "warning",
            "type": "select",
            "displayValue": "Warning - Continue Automation and report errors",
            "structure": []
          },
          {
            "id": "automations_censor_data",
            "value": false,
            "type": "checkbox",
            "structure": []
          }
        ],
        "collapsed": [{ "name": "loop", "isCollapsed": false }],
        "x": -385,
        "y": 14811,
        "datasourcetype_guid": "c7e48240-e0f2-11ec-ada1-d5ef75014b77",
        "endpoint_guid": "314f2e80-7bbe-11ed-8fc4-ed797f9ebbae",
        "endpoint_role": "create"
      },
      {
        "id": "569187F5-616B-40CA-979C-982E5CA43053",
        "type": "VariableBlock",
        "disabled": false,
        "name": "targetString",
        "displayName": "Variable - targetString",
        "comment": "Workaround for QB-30587",
        "childId": null,
        "inputs": [],
        "settings": [],
        "collapsed": [{ "name": "loop", "isCollapsed": false }],
        "x": 1090,
        "y": 13360,
        "variableGuid": "78C37A26-6056-40F7-A857-E84298458883",
        "operations": [
          {
            "id": "set_value",
            "key": "AF1A1AA1-D4D2-4FA6-AE3A-8636BB541D12",
            "name": "Set value of { variable }",
            "value": "For Each Dir in DirList('$(vDirLocation)/QlikMetaCollection/Tenants/')\n    Let Dir = If(Right('$(Dir)',1)<>'/', '$(Dir)/', '$(Dir)');"
          }
        ]
      },
      {
        "id": "989B5186-B49C-48C4-8E23-2E264E8FB2E5",
        "type": "VariableBlock",
        "disabled": false,
        "name": "addCurrentUserToSpaces",
        "displayName": "Variable - addCurrentUserToSpaces",
        "comment": "Set to 0 for no actions, 1 to add the user running the automation to spaces with full access.",
        "childId": "DE73FA04-D1A0-41F6-BEBD-66C89D6087B7",
        "inputs": [],
        "settings": [],
        "collapsed": [{ "name": "loop", "isCollapsed": false }],
        "x": 565,
        "y": 224,
        "variableGuid": "2BA36287-3CD5-4CEC-BDA7-F7D3C30C8A7F",
        "operations": [
          {
            "id": "set_value",
            "key": "1D8A1E1E-78F1-4A10-8531-9612EC322A34",
            "name": "Set value of { variable }",
            "value": "1"
          }
        ]
      },
      {
        "id": "20FF7791-E1CB-472C-A0CF-6E1EC463E62E",
        "type": "IfElseBlock",
        "disabled": false,
        "name": "condition13",
        "displayName": "Condition 13",
        "comment": "Add current user to space if configured",
        "childId": "12C5F24F-DB03-46F5-9972-87C1ADA82A9F",
        "inputs": [
          {
            "id": "conditions",
            "value": {
              "mode": "all",
              "conditions": [
                {
                  "input1": "{ $.addCurrentUserToSpaces }",
                  "input2": "1",
                  "operator": "="
                }
              ]
            },
            "type": "custom",
            "structure": []
          }
        ],
        "settings": [],
        "collapsed": [
          { "name": "both", "isCollapsed": false },
          { "name": "yes", "isCollapsed": false },
          { "name": "no", "isCollapsed": false }
        ],
        "x": -603,
        "y": 5534,
        "childTrueId": "2785D49B-8E6C-47AC-8BEB-E4DDAED478B3",
        "childFalseId": null
      },
      {
        "id": "2785D49B-8E6C-47AC-8BEB-E4DDAED478B3",
        "type": "SnippetBlock",
        "disabled": false,
        "name": "AddMemberToSpaceWithAllRoles",
        "displayName": "Qlik Platform Operations - Add Member To Space With All Roles",
        "comment": "",
        "childId": null,
        "inputs": [
          {
            "id": "01f7fb00-e5c7-11ed-92b8-8730312b5bc2",
            "value": "{$.parentTenant}",
            "type": "string",
            "structure": []
          },
          {
            "id": "01f92f60-e5c7-11ed-9a48-ebadb38fcbc0",
            "value": "{ $.createSpaceIfNotExisting.id }",
            "type": "string",
            "structure": []
          },
          {
            "id": "01f9a860-e5c7-11ed-90e5-435c61b16db9",
            "value": "{ $.getCurrentUserId }",
            "type": "string",
            "structure": []
          },
          {
            "id": "2cb75640-0511-11ee-b9aa-0379e9278f39",
            "value": "user",
            "type": "select",
            "displayValue": "user",
            "structure": []
          }
        ],
        "settings": [
          {
            "id": "datasource",
            "value": "e649bbb1-4b70-42fa-88ee-11d1aa9a7119",
            "type": "select",
            "structure": []
          },
          {
            "id": "blendr_on_error",
            "value": "stop",
            "type": "select",
            "structure": []
          },
          {
            "id": "automations_censor_data",
            "value": false,
            "type": "checkbox",
            "structure": []
          }
        ],
        "collapsed": [{ "name": "loop", "isCollapsed": false }],
        "x": 675,
        "y": 5555,
        "datasourcetype_guid": "c7e48240-e0f2-11ec-ada1-d5ef75014b77",
        "snippet_guid": "ebf86390-e5bc-11ed-b4d6-877460d526d5"
      },
      {
        "id": "95E63B22-D2BE-4670-B6EA-1A957641F598",
        "type": "EndpointBlock",
        "disabled": false,
        "name": "getCurrentUserId",
        "displayName": "Qlik Cloud Services - Get Current User Id",
        "comment": "",
        "childId": "E56177FC-87D9-454C-B99B-02CEB39F1500",
        "inputs": [],
        "settings": [
          {
            "id": "blendr_on_error",
            "value": "stop",
            "type": "select",
            "structure": []
          },
          { "id": "cache", "value": "0", "type": "select", "structure": [] },
          {
            "id": "automations_censor_data",
            "value": false,
            "type": "checkbox",
            "structure": []
          }
        ],
        "collapsed": [{ "name": "loop", "isCollapsed": false }],
        "x": -703,
        "y": 739,
        "datasourcetype_guid": "61a87510-c7a3-11ea-95da-0fb0c241e75c",
        "endpoint_guid": "6e9dbaa0-c7a4-11ea-9bd3-0da55b4cbed9",
        "endpoint_role": "get"
      },
      {
        "id": "3E2AC43B-4658-4E31-8F05-8E8B0768044F",
        "type": "VariableBlock",
        "disabled": false,
        "name": "createSchedule",
        "displayName": "Variable - createSchedule",
        "comment": "Set to 0 for no actions, 1 to recreate app reload schedule.",
        "childId": "7FF6A4FD-06E6-497C-8B42-A21718BCBFFB",
        "inputs": [],
        "settings": [],
        "collapsed": [{ "name": "loop", "isCollapsed": false }],
        "x": 250,
        "y": 360,
        "variableGuid": "CDB69F4D-01F2-467E-BCCA-36ABF7812F31",
        "operations": [
          {
            "id": "set_value",
            "key": "1D8A1E1E-78F1-4A10-8531-9612EC322A34",
            "name": "Set value of { variable }",
            "value": "1"
          }
        ]
      },
      {
        "id": "DAA17B4F-CA7D-4ED5-A2D8-317BE97E1612",
        "type": "IfElseBlock",
        "disabled": false,
        "name": "condition15",
        "displayName": "Condition 15",
        "comment": "If set schedule & an app found",
        "childId": "C063000F-C001-43D8-9411-46532D940112",
        "inputs": [
          {
            "id": "conditions",
            "value": {
              "mode": "all",
              "conditions": [
                {
                  "input1": "{ $.loopReloadAppId }",
                  "input2": null,
                  "operator": "notEmpty"
                },
                {
                  "input1": "{ $.createSchedule }",
                  "input2": "1",
                  "operator": "="
                }
              ]
            },
            "type": "custom",
            "structure": []
          }
        ],
        "settings": [],
        "collapsed": [
          { "name": "both", "isCollapsed": false },
          { "name": "yes", "isCollapsed": false },
          { "name": "no", "isCollapsed": false }
        ],
        "x": 730,
        "y": 15680,
        "childTrueId": "F11D799A-5B35-4146-9E2D-2E5CB5C9D074",
        "childFalseId": null
      },
      {
        "id": "F11D799A-5B35-4146-9E2D-2E5CB5C9D074",
        "type": "EndpointBlock",
        "disabled": false,
        "name": "ListReloadTasks",
        "displayName": "Qlik Platform Operations - List Reload Tasks",
        "comment": "",
        "childId": "CE95F4E2-BDEE-4D55-BE60-C455E5CDFD29",
        "inputs": [
          {
            "id": "57828bb0-443f-11ef-893e-bd01d93b9ff8",
            "value": "{ $.parentTenant }",
            "type": "string",
            "structure": []
          },
          {
            "id": "578c56b0-443f-11ef-a9e6-d593a1344084",
            "value": "{ $.loopReloadAppId }",
            "type": "string",
            "structure": []
          },
          {
            "id": "57912830-443f-11ef-a823-a1b23e458bb2",
            "value": null,
            "type": "select",
            "structure": []
          }
        ],
        "settings": [
          {
            "id": "datasource",
            "value": "e649bbb1-4b70-42fa-88ee-11d1aa9a7119",
            "type": "select",
            "structure": []
          },
          {
            "id": "maxitemcount",
            "value": "",
            "type": "string",
            "structure": []
          },
          {
            "id": "blendr_on_error",
            "value": "stop",
            "type": "select",
            "structure": []
          },
          { "id": "cache", "value": "0", "type": "select", "structure": [] },
          {
            "id": "automations_censor_data",
            "value": false,
            "type": "checkbox",
            "structure": []
          }
        ],
        "collapsed": [{ "name": "loop", "isCollapsed": false }],
        "x": -138,
        "y": 15975,
        "loopBlockId": "386D9F7C-BE6A-430C-8283-79AE72B2318F",
        "datasourcetype_guid": "c7e48240-e0f2-11ec-ada1-d5ef75014b77",
        "endpoint_guid": "576c5870-443f-11ef-8139-935d17eeda25",
        "endpoint_role": "list"
      },
      {
        "id": "386D9F7C-BE6A-430C-8283-79AE72B2318F",
        "type": "EndpointBlock",
        "disabled": false,
        "name": "DeleteReloadTask",
        "displayName": "Qlik Platform Operations - Delete Reload Task",
        "comment": "",
        "childId": null,
        "inputs": [
          {
            "id": "ef648470-7fa8-11ed-9bbf-8738dc1d5370",
            "value": "{ $.parentTenant }",
            "type": "string",
            "structure": []
          },
          {
            "id": "ef5bb110-7fa8-11ed-9d19-23fa18fd4902",
            "value": "{ $.ListReloadTasks.item.id }",
            "type": "string",
            "structure": []
          }
        ],
        "settings": [
          {
            "id": "datasource",
            "value": "e649bbb1-4b70-42fa-88ee-11d1aa9a7119",
            "type": "select",
            "structure": []
          },
          {
            "id": "blendr_on_error",
            "value": "stop",
            "type": "select",
            "structure": []
          },
          {
            "id": "automations_censor_data",
            "value": false,
            "type": "checkbox",
            "structure": []
          }
        ],
        "collapsed": [{ "name": "loop", "isCollapsed": false }],
        "x": -121,
        "y": 15880,
        "datasourcetype_guid": "c7e48240-e0f2-11ec-ada1-d5ef75014b77",
        "endpoint_guid": "ef46afb0-7fa8-11ed-ac93-576cd9be1aa8",
        "endpoint_role": "delete"
      },
      {
        "id": "CE95F4E2-BDEE-4D55-BE60-C455E5CDFD29",
        "type": "EndpointBlock",
        "disabled": false,
        "name": "CreateReloadTask",
        "displayName": "Qlik Platform Operations - Create Reload Task",
        "comment": "Set daily schedule at 2000 GMT",
        "childId": null,
        "inputs": [
          {
            "id": "794b7af0-7fa6-11ed-bc02-e9fdd28565e4",
            "value": "{ $.parentTenant }",
            "type": "string",
            "structure": []
          },
          {
            "id": "793baa60-7fa6-11ed-bf1a-f9229eb5a2b8",
            "value": "{ $.loopReloadAppId }",
            "type": "string",
            "structure": []
          },
          {
            "id": "795b2100-7fa6-11ed-ac1d-41d0709d6bdc",
            "value": null,
            "type": "select",
            "structure": []
          },
          {
            "id": "a7f4bb90-7fa6-11ed-9668-795b107bb85e",
            "value": "Europe/London",
            "type": "string",
            "structure": []
          },
          {
            "id": "b4a03050-7fa6-11ed-bb82-41dfe1293c1d",
            "value": "ba894960-7fa6-11ed-8635-edd88b554504",
            "type": "select",
            "displayValue": "false",
            "structure": []
          },
          {
            "id": "d69f20e0-7fa6-11ed-b805-1331a10c4dcf",
            "value": "[\"RRULE:FREQ=DAILY;INTERVAL=1;BYHOUR=20;BYMINUTE=0;BYSECOND=0\"]",
            "type": "string",
            "structure": []
          },
          {
            "id": "f1a02390-7fa6-11ed-abef-fd3ddbd36630",
            "value": "2025-01-29T06:00:00",
            "type": "string",
            "structure": []
          },
          {
            "id": "240fa7e0-7fa7-11ed-b3a5-c3192ef479f3",
            "value": null,
            "type": "string",
            "structure": []
          },
          {
            "id": "372835d0-7fa7-11ed-b047-ed5a2be3ef8c",
            "value": "3e7edae0-7fa7-11ed-844a-811554648717",
            "type": "select",
            "displayValue": "false",
            "structure": []
          }
        ],
        "settings": [
          {
            "id": "datasource",
            "value": "e649bbb1-4b70-42fa-88ee-11d1aa9a7119",
            "type": "select",
            "structure": []
          },
          {
            "id": "blendr_on_error",
            "value": "stop",
            "type": "select",
            "structure": []
          },
          {
            "id": "automations_censor_data",
            "value": false,
            "type": "checkbox",
            "structure": []
          }
        ],
        "collapsed": [{ "name": "loop", "isCollapsed": false }],
        "x": -165,
        "y": 15747,
        "datasourcetype_guid": "c7e48240-e0f2-11ec-ada1-d5ef75014b77",
        "endpoint_guid": "7928cff0-7fa6-11ed-a71d-83f3403a9a79",
        "endpoint_role": "create"
      },
      {
        "id": "A2DE5D81-1C2C-473D-888D-6F4BFC8AB617",
        "type": "CallUrlBlock",
        "disabled": false,
        "name": "callURL3",
        "displayName": "Call URL 3",
        "comment": "Retrieve manifest for installer versions",
        "childId": "52BDEF44-8C72-45E6-ADF5-9FE0AE651322",
        "inputs": [
          {
            "id": "url",
            "value": "https://github.com/qlik-oss/qlik-cloud-monitoring-apps/raw/refs/heads/main/manifests/installers.json",
            "type": "string",
            "structure": []
          },
          { "id": "method", "value": "GET", "type": "select", "structure": [] },
          { "id": "timeout", "value": "", "type": "string", "structure": [] },
          {
            "id": "params",
            "value": null,
            "type": "object",
            "mode": "keyValue",
            "structure": []
          },
          {
            "id": "headers",
            "value": null,
            "type": "object",
            "mode": "keyValue",
            "structure": []
          },
          { "id": "encoding", "value": "", "type": "string", "structure": [] }
        ],
        "settings": [
          {
            "id": "blendr_on_error",
            "value": "stop",
            "type": "select",
            "structure": []
          },
          {
            "id": "full_response",
            "value": null,
            "type": "checkbox",
            "structure": []
          },
          {
            "id": "capitalize_headers",
            "value": true,
            "type": "checkbox",
            "structure": []
          },
          {
            "id": "automations_censor_data",
            "value": false,
            "type": "checkbox",
            "structure": []
          }
        ],
        "collapsed": [{ "name": "loop", "isCollapsed": false }],
        "x": 0,
        "y": 1440
      },
      {
        "id": "52BDEF44-8C72-45E6-ADF5-9FE0AE651322",
        "type": "FilterListBlock",
        "disabled": false,
        "name": "filterList3",
        "displayName": "Filter List 3",
        "comment": "Look for qcmamt installer config",
        "childId": "5CD8C755-9D61-4DC6-A037-FECB25C852DC",
        "inputs": [
          {
            "id": "list",
            "value": "{ $.callURL3.installers }",
            "type": "string",
            "structure": []
          },
          {
            "id": "conditions",
            "value": {
              "mode": "all",
              "conditions": [
                { "input1": "template", "input2": "qcmamt", "operator": "=" }
              ]
            },
            "type": "custom",
            "structure": []
          }
        ],
        "settings": [
          {
            "id": "automations_censor_data",
            "value": false,
            "type": "checkbox",
            "structure": []
          }
        ],
        "collapsed": [{ "name": "loop", "isCollapsed": true }],
        "x": 621,
        "y": 581,
        "loopBlockId": null
      },
      {
        "id": "4AAE24C2-3138-498A-9380-F4C69C35524B",
        "type": "IfElseBlock",
        "disabled": false,
        "name": "condition16",
        "displayName": "Condition 16",
        "comment": "If manifest installer found, and version is newer, exit this automation",
        "childId": "E1CD3346-92AC-44CA-8A3D-3C6B5A7BF981",
        "inputs": [
          {
            "id": "conditions",
            "value": {
              "mode": "some",
              "conditions": [
                {
                  "input1": "{ count: { $.filterList3 } }",
                  "input2": "1",
                  "operator": "!="
                },
                {
                  "input1": "{ $.filterList3[0].version }",
                  "input2": "{ $.qcmamtVersion }",
                  "operator": ">"
                }
              ]
            },
            "type": "custom",
            "structure": []
          }
        ],
        "settings": [],
        "collapsed": [
          { "name": "both", "isCollapsed": false },
          { "name": "yes", "isCollapsed": false },
          { "name": "no", "isCollapsed": true }
        ],
        "x": 120,
        "y": 1180,
        "childTrueId": "FD3A9017-0630-41E0-B70A-C106DB7497E2",
        "childFalseId": null
      },
      {
        "id": "5CD8C755-9D61-4DC6-A037-FECB25C852DC",
        "type": "VariableBlock",
        "disabled": false,
        "name": "qcmamtVersion",
        "displayName": "Variable - qcmamtVersion",
        "comment": "Version of this installer",
        "childId": "8F905835-3240-4683-9936-ECF53AEB190B",
        "inputs": [],
        "settings": [],
        "collapsed": [{ "name": "loop", "isCollapsed": false }],
        "x": 250,
        "y": 840,
        "variableGuid": "CDE824C4-AABC-4462-914A-256E9FB3757A",
        "operations": [
          {
            "id": "set_value",
            "key": "B11B770E-A35F-450A-A3CE-3F9C71AAA06C",
            "name": "Set value of { variable }",
            "value": "2"
          }
        ]
      },
      {
        "id": "40957338-75A5-4104-84FC-060E5D3A3AFD",
        "type": "ErrorBlock",
        "disabled": false,
        "name": "error4",
        "displayName": "Error 4",
        "comment": "",
        "childId": null,
        "inputs": [
          {
            "id": "message",
            "value": "This installer is version {$.qcmamtVersion}. This is either out of date, or the relevant manifest could not be found. Please check https://github.com/qlik-oss/qlik-cloud-monitoring-apps for updates.",
            "type": "string",
            "structure": []
          },
          { "id": "action", "value": "stop", "type": "select", "structure": [] }
        ],
        "settings": [],
        "collapsed": [{ "name": "loop", "isCollapsed": false }],
        "x": -501,
        "y": 1254
      },
      {
        "id": "FD3A9017-0630-41E0-B70A-C106DB7497E2",
        "type": "UpdateJobBlock",
        "disabled": false,
        "name": "updateRunTitle2",
        "displayName": "Update Run Title 2",
        "comment": "",
        "childId": "3E771AD7-7B2F-42E6-8F7A-30DF705DCF44",
        "inputs": [
          {
            "id": "title",
            "value": "Cancelled. Update available.",
            "type": "string",
            "structure": []
          }
        ],
        "settings": [
          {
            "id": "automations_censor_data",
            "value": false,
            "type": "checkbox",
            "structure": []
          }
        ],
        "collapsed": [{ "name": "loop", "isCollapsed": false }],
        "x": -369,
        "y": 1215
      },
      {
        "id": "3E771AD7-7B2F-42E6-8F7A-30DF705DCF44",
        "type": "ShowBlock",
        "disabled": false,
        "name": "output2",
        "displayName": "Output 2",
        "comment": "",
        "childId": "40957338-75A5-4104-84FC-060E5D3A3AFD",
        "inputs": [
          {
            "id": "input",
            "value": "This installer is version { $.qcmamtVersion }. This is either out of date, or the relevant manifest could not be found. Please check the [Qlik Cloud Monitoring Apps repository](https://github.com/qlik-oss/qlik-cloud-monitoring-apps) for updates.",
            "type": "string",
            "structure": []
          }
        ],
        "settings": [
          {
            "id": "display_mode",
            "value": "add",
            "type": "select",
            "structure": []
          }
        ],
        "collapsed": [{ "name": "loop", "isCollapsed": false }],
        "x": -349,
        "y": 1302
      },
      {
        "id": "DA684624-B2A8-468D-B3D5-544F5C2393D2",
        "type": "VariableBlock",
        "disabled": false,
        "name": "setMaxApiKey",
        "displayName": "Variable - setMaxApiKey",
        "comment": "Set to a value to reconfigure the tenant's max API key expiry to this value when the automation runs. Any generated API key will match this value. (e.g. \"P30D\"). ",
        "childId": "8C6401B5-71A0-4BB9-A3BB-F8E1FDEA1AC8",
        "inputs": [],
        "settings": [],
        "collapsed": [{ "name": "loop", "isCollapsed": false }],
        "x": 0,
        "y": 960,
        "variableGuid": "84920D7D-15FF-4307-B8AC-8211589DE746",
        "operations": [
          {
            "id": "set_value",
            "key": "FD6DC736-182B-413C-A045-F97D399CB461",
            "name": "Set value of { variable }",
            "value": "P999D"
          }
        ]
      },
      {
        "id": "8C6401B5-71A0-4BB9-A3BB-F8E1FDEA1AC8",
        "type": "VariableBlock",
        "disabled": false,
        "name": "replaceAllApps",
        "displayName": "Variable - replaceAllApps",
        "comment": "Set to 0 for no action, 1 to replace all apps irrespective of whether they need an upgrade or not.",
        "childId": "FA63A453-B674-4016-AD3F-160D0E0A36AE",
        "inputs": [],
        "settings": [],
        "collapsed": [{ "name": "loop", "isCollapsed": false }],
        "x": 0,
        "y": 1080,
        "variableGuid": "41A84EF7-6F6C-4FDA-A9E0-434A962F9111",
        "operations": [
          {
            "id": "set_value",
            "key": "3F0C0854-853E-479E-A7DF-0D8C598FBF3D",
            "name": "Set value of { variable }",
            "value": "0"
          }
        ]
      },
      {
        "id": "FA63A453-B674-4016-AD3F-160D0E0A36AE",
        "type": "VariableBlock",
        "disabled": false,
        "name": "autoTenantCleanup",
        "displayName": "Variable - autoTenantCleanup",
        "comment": "Set to 0 for no action, 1 to automatically remove any tenants not found in glossary list. This will delete any spaces matching the template pattern, as well as tenant-specific log files.",
        "childId": "A3AD1F3D-F625-43C9-A6DD-BF8310EC498F",
        "inputs": [],
        "settings": [],
        "collapsed": [{ "name": "loop", "isCollapsed": false }],
        "x": 0,
        "y": 1200,
        "variableGuid": "079A8AEF-DD70-4167-BBF0-C51F55ABC843",
        "operations": [
          {
            "id": "set_value",
            "key": "3F0C0854-853E-479E-A7DF-0D8C598FBF3D",
            "name": "Set value of { variable }",
            "value": "0"
          }
        ]
      },
      {
        "id": "D60AA6BA-E349-479B-87A1-5CADE55DF810",
        "type": "EndpointBlock",
        "disabled": false,
        "name": "searchSpaces",
        "displayName": "Qlik Cloud Services - Search Spaces",
        "comment": "Retrieve existing spaces that this automation will attempt to manage to help with space tidy-up",
        "childId": "CB0B8A73-1611-4459-8D99-5ECCFF2B7391",
        "inputs": [
          {
            "id": "592e21a0-6d2e-11eb-9985-3ff14fb3335f",
            "value": "shared",
            "type": "string",
            "structure": []
          },
          {
            "id": "5935dec0-6d2e-11eb-8365-ab8493d4c237",
            "value": null,
            "type": "string",
            "structure": []
          },
          {
            "id": "593c5340-6d2e-11eb-a82b-e17cfa6c8a6d",
            "value": null,
            "type": "string",
            "structure": []
          },
          {
            "id": "59429c60-6d2e-11eb-b7b1-e7ca1f22830c",
            "value": "{ $.sharedSpaceName } -",
            "type": "string",
            "structure": []
          },
          {
            "id": "5949c230-6d2e-11eb-b345-99be61e9908c",
            "value": null,
            "type": "string",
            "structure": []
          }
        ],
        "settings": [
          {
            "id": "maxitemcount",
            "value": "",
            "type": "string",
            "structure": []
          },
          {
            "id": "blendr_on_error",
            "value": "stop",
            "type": "select",
            "structure": []
          },
          {
            "id": "automations_censor_data",
            "value": false,
            "type": "checkbox",
            "structure": []
          }
        ],
        "collapsed": [{ "name": "loop", "isCollapsed": true }],
        "x": 578.311141311229,
        "y": 5992.167463605931,
        "datasourcetype_guid": "61a87510-c7a3-11ea-95da-0fb0c241e75c",
        "endpoint_guid": "590a1a20-6d2e-11eb-9714-df1bbaac055d",
        "endpoint_role": "search"
      },
      {
        "id": "72435EE7-A709-4FDC-9ED2-304E6FA9E7AD",
        "type": "IfElseBlock",
        "disabled": false,
        "name": "condition20",
        "displayName": "Condition 20",
        "comment": "Change API key config if variable set and doesn't match",
        "childId": "4C61F723-A0DA-483C-887F-80561B098A1F",
        "inputs": [
          {
            "id": "conditions",
            "value": {
              "mode": "all",
              "conditions": [
                {
                  "input1": "{ $.setMaxApiKey }",
                  "input2": "{ $.GetAPIKeySettings2.max_api_key_expiry }",
                  "operator": "!="
                },
                {
                  "input1": "{ $.setMaxApiKey }",
                  "input2": null,
                  "operator": "notEmpty"
                }
              ]
            },
            "type": "custom",
            "structure": []
          }
        ],
        "settings": [],
        "collapsed": [
          { "name": "both", "isCollapsed": false },
          { "name": "yes", "isCollapsed": false },
          { "name": "no", "isCollapsed": false }
        ],
        "x": 996.5637383106468,
        "y": 8584.109469594116,
        "childTrueId": "C7AD8B3C-71F0-4134-9FC8-0D75A3D5CB2D",
        "childFalseId": null
      },
      {
        "id": "95E1A381-5CDF-468E-9F92-13F9C4DD2B43",
        "type": "SnippetBlock",
        "disabled": false,
        "name": "UpdateAPIKeySettings",
        "displayName": "Qlik Platform Operations - Update API Key Settings",
        "comment": "",
        "childId": null,
        "inputs": [
          {
            "id": "d8cd5780-b5fd-11ee-8f38-c36332697da5",
            "value": "{$.loopTenant}",
            "type": "string",
            "structure": []
          },
          {
            "id": "1b52f510-b5fe-11ee-a69c-a7aa54966fac",
            "value": "true",
            "type": "select",
            "displayValue": "true",
            "structure": []
          },
          {
            "id": "1b54a470-b5fe-11ee-905e-0f791df52bcb",
            "value": "{if: { $.setMaxApiKey } notEmpty , $.setMaxApiKey, $.GetAPIKeySettings2.max_api_key_expiry}",
            "type": "string",
            "structure": []
          },
          {
            "id": "1b555170-b5fe-11ee-bc88-d191ed4eebdb",
            "value": "{ if: {$.CountRemainingAPIKeys.deployedKeys} > {$.CountRemainingAPIKeys.maxKeys}, { add: {$.CountRemainingAPIKeys.deployedKeys}, 1 }, { add: {$.CountRemainingAPIKeys.maxKeys}, 1 } }",
            "type": "string",
            "structure": []
          }
        ],
        "settings": [
          {
            "id": "datasource",
            "value": "e649bbb1-4b70-42fa-88ee-11d1aa9a7119",
            "type": "select",
            "structure": []
          },
          {
            "id": "blendr_on_error",
            "value": "stop",
            "type": "select",
            "structure": []
          },
          {
            "id": "automations_censor_data",
            "value": false,
            "type": "checkbox",
            "structure": []
          }
        ],
        "collapsed": [{ "name": "loop", "isCollapsed": false }],
        "x": 600,
        "y": 9300,
        "datasourcetype_guid": "c7e48240-e0f2-11ec-ada1-d5ef75014b77",
        "snippet_guid": "d8bb26a0-b5fd-11ee-a358-7d252eeef155"
      },
      {
        "id": "90B4E0A4-FB1E-4497-A8C7-C3E4F26BD374",
        "type": "VariableBlock",
        "disabled": false,
        "name": "loopUpdateAPIKeySettings",
        "displayName": "Variable - loopUpdateAPIKeySettings",
        "comment": "",
        "childId": "72435EE7-A709-4FDC-9ED2-304E6FA9E7AD",
        "inputs": [],
        "settings": [],
        "collapsed": [{ "name": "loop", "isCollapsed": false }],
        "x": 480,
        "y": 8700,
        "variableGuid": "5574FD9D-5763-4351-8986-774586728936",
        "operations": [
          {
            "id": "set_value",
            "key": "92FD3ED6-5041-4B86-B9DE-9676319EF1EE",
            "name": "Set value of { variable }",
            "value": "0"
          }
        ]
      },
      {
        "id": "C7AD8B3C-71F0-4134-9FC8-0D75A3D5CB2D",
        "type": "VariableBlock",
        "disabled": false,
        "name": "loopUpdateAPIKeySettings",
        "displayName": "Variable - loopUpdateAPIKeySettings",
        "comment": "",
        "childId": null,
        "inputs": [],
        "settings": [],
        "collapsed": [{ "name": "loop", "isCollapsed": false }],
        "x": 730,
        "y": 8700,
        "variableGuid": "5574FD9D-5763-4351-8986-774586728936",
        "operations": [
          {
            "id": "set_value",
            "key": "92FD3ED6-5041-4B86-B9DE-9676319EF1EE",
            "name": "Set value of { variable }",
            "value": "1"
          }
        ]
      },
      {
        "id": "A3AD1F3D-F625-43C9-A6DD-BF8310EC498F",
        "type": "VariableBlock",
        "disabled": false,
        "name": "skipToTenantNumber",
        "displayName": "Variable - skipToTenantNumber",
        "comment": "Set to 0 for no action, or an integer to start updating from that tenant. If you update the glossary, tenant order might change.",
        "childId": "A2DE5D81-1C2C-473D-888D-6F4BFC8AB617",
        "inputs": [],
        "settings": [],
        "collapsed": [{ "name": "loop", "isCollapsed": false }],
        "x": 250,
        "y": 1200,
        "variableGuid": "8F994758-D377-47C2-B764-C2F7D62FCEE5",
        "operations": [
          {
            "id": "set_value",
            "key": "3F0C0854-853E-479E-A7DF-0D8C598FBF3D",
            "name": "Set value of { variable }",
            "value": "0"
          }
        ]
      }
    ],
    "variables": [
      {
        "guid": "47CCFA4B-0ADC-40F3-95AC-FCEDD886EC94",
        "name": "tenantList",
        "type": "list"
      },
      {
        "guid": "F08D6858-C076-408D-A99B-C4DE12BFBF37",
        "name": "appSource",
        "type": "object"
      },
      {
        "guid": "CC701ED4-984D-4E17-896A-89FA869476A3",
        "name": "appList",
        "type": "list"
      },
      {
        "guid": "3949C04E-2CFD-498D-8687-A1EE10F31B85",
        "name": "sourceString",
        "type": "string"
      },
      {
        "guid": "78C37A26-6056-40F7-A857-E84298458883",
        "name": "targetString",
        "type": "string"
      },
      {
        "guid": "5E7CBF8D-37A3-46B1-94B2-610F596A58FF",
        "name": "loadScript",
        "type": "string"
      },
      {
        "guid": "469E38D5-E35C-4E16-A02B-783248CA9FE3",
        "name": "iter",
        "type": "number"
      },
      {
        "guid": "201224E7-61F1-4C18-8918-D9C8AF71886C",
        "name": "sharedSpaceName",
        "type": "string"
      },
      {
        "guid": "BAA5B8AA-EC89-427E-A3D3-390061BDD136",
        "name": "redeployApp",
        "type": "number"
      },
      {
        "guid": "25260FCD-A9A2-4741-9836-4CACEE15B966",
        "name": "spaceId",
        "type": "string"
      },
      {
        "guid": "835538BA-69D7-4A81-9FC5-9D30F5F1C544",
        "name": "inputTargetTenant",
        "type": "string"
      },
      {
        "guid": "AFCCC997-C4F7-4B12-84F8-A87D8EA34023",
        "name": "loopTenant",
        "type": "string"
      },
      {
        "guid": "8020627D-CEE4-4E7E-A665-387EC0A7ED59",
        "name": "restConnectorName",
        "type": "string"
      },
      {
        "guid": "1D73E6B7-06D0-4D68-876D-24D27A7D85E8",
        "name": "fileConnectorConfig",
        "type": "string"
      },
      {
        "guid": "1103231C-BFB8-4426-9C14-ADCC798B8FEA",
        "name": "recreateConnections",
        "type": "number"
      },
      {
        "guid": "5105E92C-2FE4-4621-9DC7-20694E0A72C5",
        "name": "loopRedeployFlag",
        "type": "number"
      },
      {
        "guid": "7C3C9241-D7CC-4450-B3B7-94DE96AACC67",
        "name": "loopTenantType",
        "type": "string"
      },
      {
        "guid": "A6B260C4-E449-44CA-B958-E6BB6130E064",
        "name": "loopSpaceName",
        "type": "string"
      },
      {
        "guid": "065DA746-CADF-4E58-B325-83499A7A66DE",
        "name": "iterApps",
        "type": "number"
      },
      {
        "guid": "65330171-12DB-47EB-98CB-8FB805DF6719",
        "name": "subscriptionType",
        "type": "string"
      },
      {
        "guid": "2AE59D02-913F-4BD3-875D-FB8B063C136F",
        "name": "glossaryId",
        "type": "string"
      },
      {
        "guid": "C65E4AE0-B0C9-40BD-AAE6-438324B545A4",
        "name": "glossaryName",
        "type": "string"
      },
      {
        "guid": "7F782E8A-190C-4911-BC05-2C9913FBEAE9",
        "name": "parentTenant",
        "type": "string"
      },
      {
        "guid": "5C1A8781-B67B-4D16-AD4F-BE978AB2BB60",
        "name": "manifestUrl",
        "type": "string"
      },
      {
        "guid": "05EFE0DB-E887-420D-8F2E-27735E36B40C",
        "name": "outputRow",
        "type": "string"
      },
      {
        "guid": "5000C2B1-5FEE-4607-B840-B7D5410E3605",
        "name": "doReload",
        "type": "number"
      },
      {
        "guid": "9A0C1661-6568-45DC-8C41-9A5F514E566E",
        "name": "loopReloadAppId",
        "type": "string"
      },
      {
        "guid": "2BA36287-3CD5-4CEC-BDA7-F7D3C30C8A7F",
        "name": "addCurrentUserToSpaces",
        "type": "number"
      },
      {
        "guid": "CDB69F4D-01F2-467E-BCCA-36ABF7812F31",
        "name": "createSchedule",
        "type": "number"
      },
      {
        "guid": "CDE824C4-AABC-4462-914A-256E9FB3757A",
        "name": "qcmamtVersion",
        "type": "number"
      },
      {
        "guid": "84920D7D-15FF-4307-B8AC-8211589DE746",
        "name": "setMaxApiKey",
        "type": "string"
      },
      {
        "guid": "41A84EF7-6F6C-4FDA-A9E0-434A962F9111",
        "name": "replaceAllApps",
        "type": "number"
      },
      {
        "guid": "079A8AEF-DD70-4167-BBF0-C51F55ABC843",
        "name": "autoTenantCleanup",
        "type": "number"
      },
      {
        "guid": "5574FD9D-5763-4351-8986-774586728936",
        "name": "loopUpdateAPIKeySettings",
        "type": "number"
      },
      {
        "guid": "8F994758-D377-47C2-B764-C2F7D62FCEE5",
        "name": "skipToTenantNumber",
        "type": "number"
      }
    ]
  }
  
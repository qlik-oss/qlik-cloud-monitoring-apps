{
  "blocks": [
    {
      "id": "6841B156-73A9-4B99-AF20-87BE64A92442",
      "type": "StartBlock",
      "disabled": false,
      "name": "Start",
      "displayName": "Start",
      "comment": "",
      "childId": "E71CFD36-7B6D-4CFC-8F5F-AF73409624B4",
      "inputs": [
        {
          "id": "run_mode",
          "value": "manual",
          "type": "select",
          "structure": {}
        }
      ],
      "settings": [],
      "collapsed": [{ "name": "loop", "isCollapsed": false }],
      "x": -802,
      "y": -2832
    },
    {
      "id": "E71CFD36-7B6D-4CFC-8F5F-AF73409624B4",
      "type": "ShowBlock",
      "disabled": false,
      "name": "output",
      "displayName": "Output",
      "comment": "README: Check the variables below, perform a test run, then schedule the run daily around midday Central European time.",
      "childId": "2E327220-1609-47A0-8385-6B40E70A7CFB",
      "inputs": [
        {
          "id": "input",
          "value": "## Qlik Cloud Monitoring App deployer\n\nThe Qlik Cloud monitoring app deployer automates the installation and update of the monitoring apps from the Qlik managed repository at https://github.com/qlik-oss/qlik-cloud-monitoring-apps. Check the variables below, then run manually, or schedule for when you'd like your apps updated.\n\n**Some apps require specific license entitlements and will not be installed if these criteria are not met.**",
          "type": "string",
          "structure": []
        }
      ],
      "settings": [
        {
          "id": "display_mode",
          "value": "add",
          "type": "select",
          "structure": []
        }
      ],
      "collapsed": [{ "name": "loop", "isCollapsed": false }],
      "x": -802,
      "y": -2712
    },
    {
      "id": "6AC0239B-01A8-47F9-AD4C-ED09CCB2B83F",
      "type": "VariableBlock",
      "disabled": false,
      "name": "sharedSpaceName",
      "displayName": "Variable - sharedSpaceName",
      "comment": "Enter a space name to use as the staging space. A space will be created if it does not exist.",
      "childId": "816EE781-6447-4CB2-AE71-07512C23A11E",
      "inputs": [],
      "settings": [],
      "collapsed": [{ "name": "loop", "isCollapsed": false }],
      "x": -802,
      "y": -2112,
      "variableGuid": "E3084D5D-4DE7-428E-BDE0-440DCD055EDD",
      "operations": [
        {
          "id": "set_value",
          "key": "14252438-DA6C-489E-BA9F-97F75C4BF373",
          "name": "Set value of { variable }",
          "value": "Monitoring apps - staging"
        }
      ]
    },
    {
      "id": "816EE781-6447-4CB2-AE71-07512C23A11E",
      "type": "VariableBlock",
      "disabled": false,
      "name": "managedSpaceName",
      "displayName": "Variable - managedSpaceName",
      "comment": "Enter a space name to use as the managed space. A space will be created if it does not exist.",
      "childId": "749BB890-520A-4E81-8C75-5738241F7586",
      "inputs": [],
      "settings": [],
      "collapsed": [{ "name": "loop", "isCollapsed": false }],
      "x": -802,
      "y": -1992,
      "variableGuid": "247B71DE-30E7-4526-AC3D-BE5E17AA9194",
      "operations": [
        {
          "id": "set_value",
          "key": "14252438-DA6C-489E-BA9F-97F75C4BF373",
          "name": "Set value of { variable }",
          "value": "Monitoring"
        }
      ]
    },
    {
      "id": "749BB890-520A-4E81-8C75-5738241F7586",
      "type": "VariableBlock",
      "disabled": false,
      "name": "versionsToKeep",
      "displayName": "Variable - versionsToKeep",
      "comment": "If you wish to keep previously deployed apps in the staging space, enter a number of apps to keep. Set to 0 to always delete all apps from the shared space. Default = 0",
      "childId": "F9DCB126-6ED4-4D9A-BF35-CFD7A6D9CECD",
      "inputs": [],
      "settings": [],
      "collapsed": [{ "name": "loop", "isCollapsed": false }],
      "x": -802,
      "y": -1872,
      "variableGuid": "9679AB7C-F7EB-4A7F-A217-B2F9F14CE7E5",
      "operations": [
        {
          "id": "set_value",
          "key": "1CC6616E-100F-4B1E-AB18-98A204CBE862",
          "name": "Set value of { variable }",
          "value": "0"
        }
      ]
    },
    {
      "id": "F9DCB126-6ED4-4D9A-BF35-CFD7A6D9CECD",
      "type": "EndpointBlock",
      "disabled": false,
      "name": "getCurrentUserId",
      "displayName": "Qlik Cloud Services - Get Current User Id",
      "comment": "Find current user ID.",
      "childId": "BB38C4E9-A2B4-428B-BAAF-903E14CB56B1",
      "inputs": [],
      "settings": [
        {
          "id": "blendr_on_error",
          "value": "stop",
          "type": "select",
          "structure": []
        },
        { "id": "cache", "value": "0", "type": "select", "structure": [] },
        {
          "id": "automations_censor_data",
          "value": false,
          "type": "checkbox",
          "structure": []
        }
      ],
      "collapsed": [{ "name": "loop", "isCollapsed": false }],
      "x": -802,
      "y": -1752,
      "datasourcetype_guid": "61a87510-c7a3-11ea-95da-0fb0c241e75c",
      "endpoint_guid": "6e9dbaa0-c7a4-11ea-9bd3-0da55b4cbed9",
      "endpoint_role": "get"
    },
    {
      "id": "BB38C4E9-A2B4-428B-BAAF-903E14CB56B1",
      "type": "EndpointBlock",
      "disabled": false,
      "name": "getUser",
      "displayName": "Qlik Cloud Services - Get User",
      "comment": "Get record for the current user.",
      "childId": "43D8ED19-F455-48F9-9CC4-7FE2A93B1884",
      "inputs": [
        {
          "id": "8eedf1d0-c7a5-11ea-9022-0fb2ce625902",
          "value": "{$.getCurrentUserId}",
          "type": "string",
          "structure": []
        }
      ],
      "settings": [
        {
          "id": "blendr_on_error",
          "value": "stop",
          "type": "select",
          "structure": []
        },
        { "id": "cache", "value": "0", "type": "select", "structure": [] },
        {
          "id": "automations_censor_data",
          "value": false,
          "type": "checkbox",
          "structure": []
        }
      ],
      "collapsed": [{ "name": "loop", "isCollapsed": false }],
      "x": -802,
      "y": -1632,
      "datasourcetype_guid": "61a87510-c7a3-11ea-95da-0fb0c241e75c",
      "endpoint_guid": "7e670290-c7a5-11ea-9a9c-6dd2b282df86",
      "endpoint_role": "get"
    },
    {
      "id": "E9A1664E-7B3A-4333-9DCA-65E34A43AD2D",
      "type": "ShowBlock",
      "disabled": false,
      "name": "output2",
      "displayName": "Output 2",
      "comment": "Status output.",
      "childId": "C199B1F5-97A8-493A-BA22-0632702923FD",
      "inputs": [
        {
          "id": "input",
          "value": "| Variable | Value |\n| -------- | ------- |\n| monitoringAppsToInstall | { implode: {$.configuredMonitoringApps}, ',' } |\n| refreshConnectorCredentials | {$.refreshConnectorCredentials} |\n| sharedSpaceName | {$.sharedSpaceName} |\n| managedSpaceName | {$.managedSpaceName} | \n| versionsToKeep | {$.versionsToKeep} |\n| Current User | {$.getUser.id} |\n| Tenant hostname | {$.tenantHostname} |\n| Template version | {$.currentTemplateVersionNum} |",
          "type": "string",
          "structure": []
        }
      ],
      "settings": [
        {
          "id": "display_mode",
          "value": "add",
          "type": "select",
          "structure": []
        }
      ],
      "collapsed": [{ "name": "loop", "isCollapsed": false }],
      "x": -802,
      "y": -1032
    },
    {
      "id": "D0E7DF6C-C216-4DB6-8502-1F3C4ADF5AFE",
      "type": "IfElseBlock",
      "disabled": false,
      "name": "condition",
      "displayName": "Condition",
      "comment": "Ensures that the current user has the TenantAdmin role. This is required for license checks and the detail app.",
      "childId": "948CF475-AF52-4C8B-AF9E-07DD7DE82F45",
      "inputs": [
        {
          "id": "conditions",
          "value": {
            "mode": "all",
            "conditions": [
              {
                "input1": "{$.getUser.assignedRoles[*].name}",
                "operator": "notInList",
                "input2": "TenantAdmin"
              },
              {
                "input1": "{$.getUser.assignedGroups[*].assignedRoles[*].name}",
                "operator": "notInList",
                "input2": "TenantAdmin"
              }
            ]
          },
          "type": "custom",
          "structure": []
        }
      ],
      "settings": [],
      "collapsed": [
        { "name": "yes", "isCollapsed": false },
        { "name": "no", "isCollapsed": false }
      ],
      "x": -802,
      "y": -352,
      "childTrueId": "BE7F53B8-B1FD-48DF-A8A5-D6638F74FA2C",
      "childFalseId": null
    },
    {
      "id": "9C6779A3-FFA8-49D8-B3AE-ADA3D57BA1D5",
      "type": "EndpointBlock",
      "disabled": false,
      "name": "getLicenseOverview",
      "displayName": "Qlik Cloud Services - Get License Overview",
      "comment": "Get license to check for capacity-based flags.",
      "childId": "6AB100F2-DB70-49EC-AA91-33C3F4639953",
      "inputs": [],
      "settings": [
        {
          "id": "blendr_on_error",
          "value": "stop",
          "type": "select",
          "structure": []
        },
        { "id": "cache", "value": "0", "type": "select", "structure": [] },
        {
          "id": "automations_censor_data",
          "value": false,
          "type": "checkbox",
          "structure": []
        }
      ],
      "collapsed": [{ "name": "loop", "isCollapsed": false }],
      "x": -802,
      "y": 1428,
      "datasourcetype_guid": "61a87510-c7a3-11ea-95da-0fb0c241e75c",
      "endpoint_guid": "0e6d4530-3291-11ed-a2e9-3bc221fc190c",
      "endpoint_role": "get"
    },
    {
      "id": "6C0A56A0-B3A3-4740-858E-57ABB5BF2CAC",
      "type": "ShowBlock",
      "disabled": false,
      "name": "output3",
      "displayName": "Output 3",
      "comment": "Status output.",
      "childId": "7BB23A76-A47D-4859-AE1D-D5532E49031D",
      "inputs": [
        {
          "id": "input",
          "value": "## Deployment progress\n\nDeployment is in progress. Status will be updated below.\n\n| Step | Status |\n| -------- | ------- |",
          "type": "string",
          "structure": []
        }
      ],
      "settings": [
        {
          "id": "display_mode",
          "value": "add",
          "type": "select",
          "structure": []
        }
      ],
      "collapsed": [{ "name": "loop", "isCollapsed": false }],
      "x": -802,
      "y": 3148
    },
    {
      "id": "F718EF32-99B6-49C3-A5A5-6996F86B0B87",
      "type": "EndpointBlock",
      "disabled": false,
      "name": "searchSpaces",
      "displayName": "Qlik Cloud Services - Search Spaces",
      "comment": "Look for shared space.",
      "childId": "FEA21EF3-D8E8-48DF-9013-8DC36FE5A54D",
      "inputs": [
        {
          "id": "592e21a0-6d2e-11eb-9985-3ff14fb3335f",
          "value": null,
          "type": "string",
          "structure": []
        },
        {
          "id": "5935dec0-6d2e-11eb-8365-ab8493d4c237",
          "value": null,
          "type": "string",
          "structure": []
        },
        {
          "id": "593c5340-6d2e-11eb-a82b-e17cfa6c8a6d",
          "value": null,
          "type": "string",
          "structure": []
        },
        {
          "id": "59429c60-6d2e-11eb-b7b1-e7ca1f22830c",
          "value": "{$.sharedSpaceName}",
          "type": "string",
          "structure": []
        },
        {
          "id": "5949c230-6d2e-11eb-b345-99be61e9908c",
          "value": null,
          "type": "string",
          "structure": []
        }
      ],
      "settings": [
        {
          "id": "maxitemcount",
          "value": "",
          "type": "string",
          "structure": []
        },
        {
          "id": "blendr_on_error",
          "value": "stop",
          "type": "select",
          "structure": []
        },
        {
          "id": "automations_censor_data",
          "value": false,
          "type": "checkbox",
          "structure": []
        }
      ],
      "collapsed": [{ "name": "loop", "isCollapsed": false }],
      "x": -802,
      "y": 6168,
      "loopBlockId": null,
      "datasourcetype_guid": "61a87510-c7a3-11ea-95da-0fb0c241e75c",
      "endpoint_guid": "590a1a20-6d2e-11eb-9714-df1bbaac055d",
      "endpoint_role": "search"
    },
    {
      "id": "FEA21EF3-D8E8-48DF-9013-8DC36FE5A54D",
      "type": "VariableBlock",
      "disabled": false,
      "name": "sharedSpaceId",
      "displayName": "Variable - sharedSpaceId",
      "comment": "Initialise the variable.",
      "childId": "34B88617-9583-4EA4-948E-D580D65F3C49",
      "inputs": [],
      "settings": [],
      "collapsed": [{ "name": "loop", "isCollapsed": false }],
      "x": -802,
      "y": 6328,
      "variableGuid": "DE390532-B1F9-4098-BBE0-B7E6101BD502",
      "operations": [
        {
          "id": "empty",
          "key": "D491693B-F764-49C2-94C2-C893014C604B",
          "name": "Empty { variable }",
          "value": null
        }
      ]
    },
    {
      "id": "EB27466E-BFCB-4FFC-8B1A-3AA517AB3F4F",
      "type": "ShowBlock",
      "disabled": false,
      "name": "output4",
      "displayName": "Output 4",
      "comment": "Status output.",
      "childId": "3C37421F-9C07-4344-AD2E-1022C48BADF9",
      "inputs": [
        {
          "id": "input",
          "value": "| Shared space lookup | Found {$.filterList.item.type} space matching name [{$.sharedSpaceName}]({$.tenantHostname}analytics/catalog?space_filter={$.sharedSpaceId}). |",
          "type": "string",
          "structure": []
        }
      ],
      "settings": [
        {
          "id": "display_mode",
          "value": "add",
          "type": "select",
          "structure": []
        }
      ],
      "collapsed": [{ "name": "loop", "isCollapsed": false }],
      "x": -682,
      "y": 6668
    },
    {
      "id": "34B88617-9583-4EA4-948E-D580D65F3C49",
      "type": "FilterListBlock",
      "disabled": false,
      "name": "filterList",
      "displayName": "Filter over Qlik Cloud Services - Search Spaces - Filter List",
      "comment": "Filter for exact name match for shared space.",
      "childId": "E14426D0-F329-44A1-B59F-A27869D8920F",
      "inputs": [
        {
          "id": "list",
          "value": "{ $.searchSpaces }",
          "type": "string",
          "structure": []
        },
        {
          "id": "conditions",
          "value": {
            "mode": "all",
            "conditions": [
              {
                "input1": "name",
                "input2": "{$.sharedSpaceName}",
                "operator": "="
              }
            ]
          },
          "type": "custom",
          "structure": []
        }
      ],
      "settings": [
        {
          "id": "automations_censor_data",
          "value": false,
          "type": "checkbox",
          "structure": []
        }
      ],
      "collapsed": [{ "name": "loop", "isCollapsed": false }],
      "x": -802,
      "y": 6448,
      "loopBlockId": "7E7CFBF2-F088-4F93-9BA8-DE932E22956E"
    },
    {
      "id": "7E7CFBF2-F088-4F93-9BA8-DE932E22956E",
      "type": "VariableBlock",
      "disabled": false,
      "name": "sharedSpaceId",
      "displayName": "Variable - sharedSpaceId",
      "comment": "Store shared space ID.",
      "childId": "EB27466E-BFCB-4FFC-8B1A-3AA517AB3F4F",
      "inputs": [],
      "settings": [],
      "collapsed": [{ "name": "loop", "isCollapsed": false }],
      "x": -682,
      "y": 6548,
      "variableGuid": "DE390532-B1F9-4098-BBE0-B7E6101BD502",
      "operations": [
        {
          "id": "set_value",
          "key": "112D67F1-764F-46E4-8CD8-79B8735F30E9",
          "name": "Set value of { variable }",
          "value": "{ $.filterList.item.id }"
        }
      ]
    },
    {
      "id": "3C37421F-9C07-4344-AD2E-1022C48BADF9",
      "type": "IfElseBlock",
      "disabled": false,
      "name": "condition3",
      "displayName": "Condition 3",
      "comment": "If the space type is not shared, exit; otherwise, apply the Can Manage role.",
      "childId": null,
      "inputs": [
        {
          "id": "conditions",
          "value": {
            "mode": "all",
            "conditions": [
              {
                "input1": "{$.filterList[0].type}",
                "input2": "shared",
                "operator": "!="
              }
            ]
          },
          "type": "custom",
          "structure": []
        }
      ],
      "settings": [],
      "collapsed": [
        { "name": "yes", "isCollapsed": false },
        { "name": "no", "isCollapsed": false }
      ],
      "x": -682,
      "y": 6788,
      "childTrueId": "A29FDF70-7705-4848-B467-90DD6CD8F293",
      "childFalseId": "EABD8111-E99F-4C5B-A67D-3D7F0ACE778E"
    },
    {
      "id": "A29FDF70-7705-4848-B467-90DD6CD8F293",
      "type": "VariableBlock",
      "disabled": false,
      "name": "errorTitle",
      "displayName": "Variable - errorTitle",
      "comment": "A space of the wrong type was found with the configured shared space name.",
      "childId": "6A1F7D55-1177-4CED-96ED-C5EAB1EF473C",
      "inputs": [],
      "settings": [],
      "collapsed": [{ "name": "loop", "isCollapsed": false }],
      "x": -562,
      "y": 6868,
      "variableGuid": "407730A6-EC96-4337-BE80-CF4C0D552F08",
      "operations": [
        {
          "id": "set_value",
          "key": "1BC10F4C-68C2-42E9-9000-25865B076073",
          "name": "Set value of { variable }",
          "value": "A space of the wrong type was found with the configured shared space name."
        }
      ]
    },
    {
      "id": "6A1F7D55-1177-4CED-96ED-C5EAB1EF473C",
      "type": "VariableBlock",
      "disabled": false,
      "name": "errorDetail",
      "displayName": "Variable - errorDetail",
      "comment": "Variable to store detailed error message.",
      "childId": "4B13B3CA-4EE2-4F26-A4E4-ECBE8AD13378",
      "inputs": [],
      "settings": [],
      "collapsed": [{ "name": "loop", "isCollapsed": false }],
      "x": -562,
      "y": 6988,
      "variableGuid": "1BF2068B-106E-4D58-BC51-884F1810F03C",
      "operations": [
        {
          "id": "set_value",
          "key": "1BC10F4C-68C2-42E9-9000-25865B076073",
          "name": "Set value of { variable }",
          "value": "Exiting, an existing space with a type other than `shared` was found for the provided shared space name. Try another shared space name."
        }
      ]
    },
    {
      "id": "4B13B3CA-4EE2-4F26-A4E4-ECBE8AD13378",
      "type": "GotoBlock",
      "disabled": false,
      "name": "goToLabel",
      "displayName": "Go To Label",
      "comment": "Go to the label named error.",
      "childId": null,
      "inputs": [
        {
          "id": "label",
          "value": "EF82AD29-E2CF-44C9-A7DB-24C784618756",
          "type": "select",
          "displayValue": "error",
          "structure": []
        }
      ],
      "settings": [],
      "collapsed": [{ "name": "loop", "isCollapsed": false }],
      "x": -562,
      "y": 7108
    },
    {
      "id": "EF82AD29-E2CF-44C9-A7DB-24C784618756",
      "type": "LabelBlock",
      "disabled": false,
      "name": "label",
      "displayName": "Label - error",
      "comment": "Standard error handler which provides standardized error output.",
      "childId": "D46F6E49-3856-430B-A685-0A07984CDAEB",
      "inputs": [
        { "id": "name", "value": "error", "type": "string", "structure": [] }
      ],
      "settings": [],
      "collapsed": [{ "name": "loop", "isCollapsed": false }],
      "x": -9,
      "y": -2826
    },
    {
      "id": "EABD8111-E99F-4C5B-A67D-3D7F0ACE778E",
      "type": "IfElseBlock",
      "disabled": false,
      "name": "condition4",
      "displayName": "Condition 4",
      "comment": "If not the owner, checks and updates the roles. ",
      "childId": null,
      "inputs": [
        {
          "id": "conditions",
          "value": {
            "mode": "all",
            "conditions": [
              {
                "input1": "{ $.filterList.item.ownerId }",
                "input2": "{ $.getCurrentUserId }",
                "operator": "!="
              }
            ]
          },
          "type": "custom",
          "structure": []
        }
      ],
      "settings": [],
      "collapsed": [
        { "name": "yes", "isCollapsed": false },
        { "name": "no", "isCollapsed": false }
      ],
      "x": -562,
      "y": 7268,
      "childTrueId": "478E6D39-A231-4808-A8C8-AEE1EDF3121E",
      "childFalseId": "94B0A4B3-5C6A-4958-BF8D-622F72452977"
    },
    {
      "id": "478E6D39-A231-4808-A8C8-AEE1EDF3121E",
      "type": "EndpointBlock",
      "disabled": false,
      "name": "listMembersFromSpace",
      "displayName": "Qlik Cloud Services - List Members From Space",
      "comment": "Get a list of members in the shared space.",
      "childId": "7CFB4DF1-CB8C-4302-AE53-73BCF1F8BFBC",
      "inputs": [
        {
          "id": "358ee8a0-6d34-11eb-b1f3-91a0d7274b22",
          "value": "{ $.sharedSpaceId }",
          "type": "string",
          "structure": []
        },
        {
          "id": "86f34440-dd7e-11ef-91d1-63f16d094078",
          "value": "{ $.getCurrentUserId }",
          "type": "string",
          "structure": []
        },
        {
          "id": "972a9800-dd7e-11ef-95ae-93a368f4ba58",
          "value": "9fecb2a0-dd7e-11ef-85d3-9f8aefa67848",
          "type": "select",
          "displayValue": "user",
          "structure": []
        }
      ],
      "settings": [
        {
          "id": "maxitemcount",
          "value": "",
          "type": "string",
          "structure": []
        },
        {
          "id": "blendr_on_error",
          "value": "stop",
          "type": "select",
          "structure": []
        },
        { "id": "cache", "value": "0", "type": "select", "structure": [] },
        {
          "id": "automations_censor_data",
          "value": false,
          "type": "checkbox",
          "structure": []
        }
      ],
      "collapsed": [{ "name": "loop", "isCollapsed": true }],
      "x": -442,
      "y": 7348,
      "loopBlockId": null,
      "datasourcetype_guid": "61a87510-c7a3-11ea-95da-0fb0c241e75c",
      "endpoint_guid": "ffe6d930-6d33-11eb-ad8a-334e25c5e295",
      "endpoint_role": "list"
    },
    {
      "id": "7CFB4DF1-CB8C-4302-AE53-73BCF1F8BFBC",
      "type": "IfElseBlock",
      "disabled": false,
      "name": "condition5",
      "displayName": "Condition 5",
      "comment": "If the user is found, update; otherwise, add the user to the shared space with the facilitator role.",
      "childId": null,
      "inputs": [
        {
          "id": "conditions",
          "value": {
            "mode": "all",
            "conditions": [
              {
                "input1": "{count: {$.listMembersFromSpace}}",
                "input2": "1",
                "operator": "="
              }
            ]
          },
          "type": "custom",
          "structure": []
        }
      ],
      "settings": [],
      "collapsed": [
        { "name": "yes", "isCollapsed": false },
        { "name": "no", "isCollapsed": false }
      ],
      "x": -442,
      "y": 7468,
      "childTrueId": "35CB70BA-0EC6-4883-829C-D9EF6FB850F3",
      "childFalseId": "463B5474-1CF6-490D-884A-0A2E6252F64F"
    },
    {
      "id": "35CB70BA-0EC6-4883-829C-D9EF6FB850F3",
      "type": "IfElseBlock",
      "disabled": false,
      "name": "condition6",
      "displayName": "Condition 6",
      "comment": "If the user does not have the facilitator role, add it.",
      "childId": null,
      "inputs": [
        {
          "id": "conditions",
          "value": {
            "mode": "all",
            "conditions": [
              {
                "input1": "{$.listMembersFromSpace[0].roles}",
                "input2": "facilitator",
                "operator": "notInList"
              }
            ]
          },
          "type": "custom",
          "structure": []
        }
      ],
      "settings": [],
      "collapsed": [
        { "name": "yes", "isCollapsed": false },
        { "name": "no", "isCollapsed": false }
      ],
      "x": -322,
      "y": 7548,
      "childTrueId": "824F1EDD-71E4-4833-9634-D37637283AE0",
      "childFalseId": "A99BD3FB-EB73-41C1-B684-FBFDB4CB6D28"
    },
    {
      "id": "824F1EDD-71E4-4833-9634-D37637283AE0",
      "type": "VariableBlock",
      "disabled": false,
      "name": "spaceRoles",
      "displayName": "Variable - spaceRoles",
      "comment": "List variable to add the facilitator role, along with the existing roles, to the user in the shared space.",
      "childId": "B6226FFD-EC59-4DB5-91A6-A706091A4FD6",
      "inputs": [],
      "settings": [],
      "collapsed": [{ "name": "loop", "isCollapsed": false }],
      "x": -202,
      "y": 7628,
      "variableGuid": "E413E2FB-E4E7-4AFF-8894-6D27792FA8D8",
      "operations": [
        {
          "id": "empty",
          "key": "9837B21E-F102-462E-A474-E0C7D78117CE",
          "name": "Empty { variable }",
          "value": null
        },
        {
          "id": "add_item",
          "key": "68A49E6D-72F7-47D1-BD36-892E32464CB5",
          "name": "Add item to { variable }",
          "value": "facilitator"
        },
        {
          "id": "merge",
          "key": "680DE388-428C-40C5-97E2-C4FB11F0930D",
          "name": "Merge other list into { variable }",
          "value": "{ $.listMembersFromSpace[0].roles }",
          "allow_duplicates": "no"
        }
      ]
    },
    {
      "id": "B6226FFD-EC59-4DB5-91A6-A706091A4FD6",
      "type": "EndpointBlock",
      "disabled": false,
      "name": "updateRolesOfMemberFromSpace",
      "displayName": "Qlik Cloud Services - Update Roles Of Member From Space",
      "comment": "Add the facilitator role to the user in the shared space.",
      "childId": "E4CAC506-9BC8-4BDE-8F96-7A73212BB4B1",
      "inputs": [
        {
          "id": "8c6b43e0-6d42-11eb-85f6-917131a7d145",
          "value": "{$.sharedSpaceId}",
          "type": "string",
          "structure": []
        },
        {
          "id": "8c72c230-6d42-11eb-837d-b1e5663f20d2",
          "value": "{$.listMembersFromSpace[0].id}",
          "type": "string",
          "structure": []
        },
        {
          "id": "01ac8e60-6d43-11eb-9d02-4d69db8c0501",
          "value": "{json: {$.spaceRoles}}",
          "type": "string",
          "structure": []
        }
      ],
      "settings": [
        {
          "id": "blendr_on_error",
          "value": "stop",
          "type": "select",
          "structure": []
        },
        {
          "id": "automations_censor_data",
          "value": false,
          "type": "checkbox",
          "structure": []
        }
      ],
      "collapsed": [{ "name": "loop", "isCollapsed": false }],
      "x": -202,
      "y": 7748,
      "datasourcetype_guid": "61a87510-c7a3-11ea-95da-0fb0c241e75c",
      "endpoint_guid": "8c54ade0-6d42-11eb-b3a8-75befcc89b0a",
      "endpoint_role": "update"
    },
    {
      "id": "E4CAC506-9BC8-4BDE-8F96-7A73212BB4B1",
      "type": "ShowBlock",
      "disabled": false,
      "name": "output5",
      "displayName": "Output 5",
      "comment": "Status output.",
      "childId": null,
      "inputs": [
        {
          "id": "input",
          "value": "| Shared space permissions | Added facilitator role to existing space assignment. |",
          "type": "string",
          "structure": []
        }
      ],
      "settings": [
        {
          "id": "display_mode",
          "value": "add",
          "type": "select",
          "structure": []
        }
      ],
      "collapsed": [{ "name": "loop", "isCollapsed": false }],
      "x": -202,
      "y": 7868
    },
    {
      "id": "A99BD3FB-EB73-41C1-B684-FBFDB4CB6D28",
      "type": "ShowBlock",
      "disabled": false,
      "name": "output6",
      "displayName": "Output 6",
      "comment": "Status output.",
      "childId": null,
      "inputs": [
        {
          "id": "input",
          "value": "| Shared space permissions | No changes made. |",
          "type": "string",
          "structure": []
        }
      ],
      "settings": [
        {
          "id": "display_mode",
          "value": "add",
          "type": "select",
          "structure": []
        }
      ],
      "collapsed": [{ "name": "loop", "isCollapsed": false }],
      "x": -202,
      "y": 8028
    },
    {
      "id": "463B5474-1CF6-490D-884A-0A2E6252F64F",
      "type": "EndpointBlock",
      "disabled": false,
      "name": "addMemberToSpace",
      "displayName": "Qlik Cloud Services - Add Member To Space",
      "comment": "Add user with facilitator role.",
      "childId": "D2438EC7-D532-4274-8D13-27C2EC31CAAE",
      "inputs": [
        {
          "id": "3162f740-6d33-11eb-a089-71f7ccab24b9",
          "value": "{$.sharedSpaceId}",
          "type": "string",
          "structure": []
        },
        {
          "id": "27499b00-6d31-11eb-bbe5-5b3db3c974dc",
          "value": "{$.getCurrentUserId}",
          "type": "string",
          "structure": []
        },
        {
          "id": "2751b870-6d31-11eb-9d77-41c5fae28bc5",
          "value": "[\"facilitator\"]",
          "type": "string",
          "structure": []
        },
        {
          "id": "275e2c50-6d31-11eb-8eeb-157347755492",
          "value": "aec7c5b0-6d32-11eb-a4b2-f5e181a2c241",
          "type": "select",
          "displayValue": "user",
          "structure": []
        }
      ],
      "settings": [
        {
          "id": "blendr_on_error",
          "value": "stop",
          "type": "select",
          "structure": []
        },
        {
          "id": "automations_censor_data",
          "value": false,
          "type": "checkbox",
          "structure": []
        }
      ],
      "collapsed": [{ "name": "loop", "isCollapsed": false }],
      "x": -322,
      "y": 8268,
      "datasourcetype_guid": "61a87510-c7a3-11ea-95da-0fb0c241e75c",
      "endpoint_guid": "272d9c70-6d31-11eb-870f-67624392ed86",
      "endpoint_role": "create"
    },
    {
      "id": "D2438EC7-D532-4274-8D13-27C2EC31CAAE",
      "type": "ShowBlock",
      "disabled": false,
      "name": "output7",
      "displayName": "Output 7",
      "comment": "Status output.",
      "childId": null,
      "inputs": [
        {
          "id": "input",
          "value": "| Shared space permissions | Added user to shared space. |",
          "type": "string",
          "structure": []
        }
      ],
      "settings": [
        {
          "id": "display_mode",
          "value": "add",
          "type": "select",
          "structure": []
        }
      ],
      "collapsed": [{ "name": "loop", "isCollapsed": false }],
      "x": -322,
      "y": 8388
    },
    {
      "id": "94B0A4B3-5C6A-4958-BF8D-622F72452977",
      "type": "ShowBlock",
      "disabled": false,
      "name": "output8",
      "displayName": "Output 8",
      "comment": "Status output.",
      "childId": null,
      "inputs": [
        {
          "id": "input",
          "value": "| Shared space permissions | Found user is owner of space, no permission updates required. |",
          "type": "string",
          "structure": []
        }
      ],
      "settings": [
        {
          "id": "display_mode",
          "value": "add",
          "type": "select",
          "structure": []
        }
      ],
      "collapsed": [{ "name": "loop", "isCollapsed": false }],
      "x": -442,
      "y": 8628
    },
    {
      "id": "EF5E86CE-DE0B-4961-BD90-B7355163A6E9",
      "type": "VariableBlock",
      "disabled": false,
      "name": "managedSpaceId",
      "displayName": "Variable - managedSpaceId",
      "comment": "Initialise the variable.",
      "childId": "8B32EC24-AC36-47A1-B60B-2FC217B835E3",
      "inputs": [],
      "settings": [],
      "collapsed": [{ "name": "loop", "isCollapsed": false }],
      "x": -802,
      "y": 9108,
      "variableGuid": "B6C34135-EF0E-42EF-AC0D-621D8A8A165D",
      "operations": [
        {
          "id": "empty",
          "key": "CFAB487E-9183-44D8-8990-4AD864BE24A2",
          "name": "Empty { variable }",
          "value": null
        }
      ]
    },
    {
      "id": "EA734A3A-B6F0-47F4-BB88-4D3C1DCADBE2",
      "type": "ErrorBlock",
      "disabled": false,
      "name": "error",
      "displayName": "Error",
      "comment": "Show the error message and stop the automation.",
      "childId": null,
      "inputs": [
        {
          "id": "message",
          "value": "Error: { $.errorTitle }",
          "type": "string",
          "structure": []
        },
        { "id": "action", "value": "stop", "type": "select", "structure": [] }
      ],
      "settings": [],
      "collapsed": [{ "name": "loop", "isCollapsed": false }],
      "x": -9,
      "y": -2466
    },
    {
      "id": "E14426D0-F329-44A1-B59F-A27869D8920F",
      "type": "EndpointBlock",
      "disabled": false,
      "name": "searchSpaces2",
      "displayName": "Qlik Cloud Services - Search Spaces 2",
      "comment": "Look for managed space.",
      "childId": "EF5E86CE-DE0B-4961-BD90-B7355163A6E9",
      "inputs": [
        {
          "id": "592e21a0-6d2e-11eb-9985-3ff14fb3335f",
          "value": null,
          "type": "string",
          "structure": []
        },
        {
          "id": "5935dec0-6d2e-11eb-8365-ab8493d4c237",
          "value": null,
          "type": "string",
          "structure": []
        },
        {
          "id": "593c5340-6d2e-11eb-a82b-e17cfa6c8a6d",
          "value": null,
          "type": "string",
          "structure": []
        },
        {
          "id": "59429c60-6d2e-11eb-b7b1-e7ca1f22830c",
          "value": "{$.managedSpaceName}",
          "type": "string",
          "structure": []
        },
        {
          "id": "5949c230-6d2e-11eb-b345-99be61e9908c",
          "value": null,
          "type": "string",
          "structure": []
        }
      ],
      "settings": [
        {
          "id": "maxitemcount",
          "value": "",
          "type": "string",
          "structure": []
        },
        {
          "id": "blendr_on_error",
          "value": "stop",
          "type": "select",
          "structure": []
        },
        {
          "id": "automations_censor_data",
          "value": false,
          "type": "checkbox",
          "structure": []
        }
      ],
      "collapsed": [{ "name": "loop", "isCollapsed": false }],
      "x": -802,
      "y": 8948,
      "loopBlockId": null,
      "datasourcetype_guid": "61a87510-c7a3-11ea-95da-0fb0c241e75c",
      "endpoint_guid": "590a1a20-6d2e-11eb-9714-df1bbaac055d",
      "endpoint_role": "search"
    },
    {
      "id": "8B32EC24-AC36-47A1-B60B-2FC217B835E3",
      "type": "FilterListBlock",
      "disabled": false,
      "name": "filterList2",
      "displayName": "Filter over Qlik Cloud Services - Search Spaces 2 - Filter List 2",
      "comment": "Filter for exact name match for managed space.",
      "childId": "7C0C15A5-F334-4AD6-A9D4-C0AC674CC34B",
      "inputs": [
        {
          "id": "list",
          "value": "{ $.searchSpaces2 }",
          "type": "string",
          "structure": []
        },
        {
          "id": "conditions",
          "value": {
            "mode": "all",
            "conditions": [
              {
                "input1": "name",
                "input2": "{$.managedSpaceName}",
                "operator": "="
              }
            ]
          },
          "type": "custom",
          "structure": []
        }
      ],
      "settings": [
        {
          "id": "automations_censor_data",
          "value": false,
          "type": "checkbox",
          "structure": []
        }
      ],
      "collapsed": [{ "name": "loop", "isCollapsed": false }],
      "x": -802,
      "y": 9228,
      "loopBlockId": "FCBE0570-D739-43D6-B0AD-B16A2DA6F28A"
    },
    {
      "id": "FCBE0570-D739-43D6-B0AD-B16A2DA6F28A",
      "type": "VariableBlock",
      "disabled": false,
      "name": "managedSpaceId",
      "displayName": "Variable - managedSpaceId",
      "comment": "Store managed space ID.",
      "childId": "820347D1-83F1-4F4E-A9A3-AACE4DF3685E",
      "inputs": [],
      "settings": [],
      "collapsed": [{ "name": "loop", "isCollapsed": false }],
      "x": -682,
      "y": 9328,
      "variableGuid": "B6C34135-EF0E-42EF-AC0D-621D8A8A165D",
      "operations": [
        {
          "id": "set_value",
          "key": "FF599B67-45E6-44E2-9966-4EEEE9F474D4",
          "name": "Set value of { variable }",
          "value": "{$.filterList2.item.id}"
        }
      ]
    },
    {
      "id": "820347D1-83F1-4F4E-A9A3-AACE4DF3685E",
      "type": "ShowBlock",
      "disabled": false,
      "name": "output9",
      "displayName": "Output 9",
      "comment": "Status output.",
      "childId": "B35B33BE-B45B-4749-813C-64BA4AA4FA1D",
      "inputs": [
        {
          "id": "input",
          "value": "| Managed space lookup | Found {$.filterList2.item.type} space matching name [{$.managedSpaceName}]({$.tenantHostname}analytics/catalog?space_filter={$.managedSpaceId}). |",
          "type": "string",
          "structure": []
        }
      ],
      "settings": [
        {
          "id": "display_mode",
          "value": "add",
          "type": "select",
          "structure": []
        }
      ],
      "collapsed": [{ "name": "loop", "isCollapsed": false }],
      "x": -682,
      "y": 9448
    },
    {
      "id": "B35B33BE-B45B-4749-813C-64BA4AA4FA1D",
      "type": "IfElseBlock",
      "disabled": false,
      "name": "condition7",
      "displayName": "Condition 7",
      "comment": "If the space type is not managed, exit; otherwise, ensure that the publisher role is present.",
      "childId": null,
      "inputs": [
        {
          "id": "conditions",
          "value": {
            "mode": "all",
            "conditions": [
              {
                "input1": "{$.filterList2[0].type}",
                "input2": "managed",
                "operator": "!="
              }
            ]
          },
          "type": "custom",
          "structure": []
        }
      ],
      "settings": [],
      "collapsed": [
        { "name": "yes", "isCollapsed": false },
        { "name": "no", "isCollapsed": false }
      ],
      "x": -682,
      "y": 9568,
      "childTrueId": "F0DEE5BC-C9A2-4F91-964A-EA7C64F90457",
      "childFalseId": "2FDCB00D-3E41-4B95-A904-51DBFF7345AA"
    },
    {
      "id": "F0DEE5BC-C9A2-4F91-964A-EA7C64F90457",
      "type": "VariableBlock",
      "disabled": false,
      "name": "errorTitle",
      "displayName": "Variable - errorTitle",
      "comment": "A space of the wrong type was found with the configured managed space name.",
      "childId": "CDB7C2AB-E721-492F-9238-2A91F9B67CF2",
      "inputs": [],
      "settings": [],
      "collapsed": [{ "name": "loop", "isCollapsed": false }],
      "x": -562,
      "y": 9648,
      "variableGuid": "407730A6-EC96-4337-BE80-CF4C0D552F08",
      "operations": [
        {
          "id": "set_value",
          "key": "1BC10F4C-68C2-42E9-9000-25865B076073",
          "name": "Set value of { variable }",
          "value": "A space of the wrong type was found with the configured managed space name."
        }
      ]
    },
    {
      "id": "CDB7C2AB-E721-492F-9238-2A91F9B67CF2",
      "type": "VariableBlock",
      "disabled": false,
      "name": "errorDetail",
      "displayName": "Variable - errorDetail",
      "comment": "Variable to store detailed error message.",
      "childId": "1324CB60-D99D-4A46-AB5A-734A7B31D12B",
      "inputs": [],
      "settings": [],
      "collapsed": [{ "name": "loop", "isCollapsed": false }],
      "x": -562,
      "y": 9768,
      "variableGuid": "1BF2068B-106E-4D58-BC51-884F1810F03C",
      "operations": [
        {
          "id": "set_value",
          "key": "1BC10F4C-68C2-42E9-9000-25865B076073",
          "name": "Set value of { variable }",
          "value": "Exiting, an existing space with a type other than `managed` was found for the provided managed space name. Try another managed space name."
        }
      ]
    },
    {
      "id": "1324CB60-D99D-4A46-AB5A-734A7B31D12B",
      "type": "GotoBlock",
      "disabled": false,
      "name": "goToLabel2",
      "displayName": "Go To Label 2",
      "comment": "Go to the label named error.",
      "childId": null,
      "inputs": [
        {
          "id": "label",
          "value": "EF82AD29-E2CF-44C9-A7DB-24C784618756",
          "type": "select",
          "displayValue": "error",
          "structure": []
        }
      ],
      "settings": [],
      "collapsed": [{ "name": "loop", "isCollapsed": false }],
      "x": -562,
      "y": 9888
    },
    {
      "id": "2FDCB00D-3E41-4B95-A904-51DBFF7345AA",
      "type": "IfElseBlock",
      "disabled": false,
      "name": "condition8",
      "displayName": "Condition 8",
      "comment": "If not the owner, check and update roles.",
      "childId": null,
      "inputs": [
        {
          "id": "conditions",
          "value": {
            "mode": "all",
            "conditions": [
              {
                "input1": "{ $.filterList2.item.ownerId }",
                "input2": "{ $.getCurrentUserId }",
                "operator": "!="
              }
            ]
          },
          "type": "custom",
          "structure": []
        }
      ],
      "settings": [],
      "collapsed": [
        { "name": "yes", "isCollapsed": false },
        { "name": "no", "isCollapsed": false }
      ],
      "x": -562,
      "y": 10048,
      "childTrueId": "064FC5B0-AF19-4C57-B22A-E171D71F3643",
      "childFalseId": "F37D6ACE-DF7C-4EB9-A990-E7DBCD31ABDF"
    },
    {
      "id": "064FC5B0-AF19-4C57-B22A-E171D71F3643",
      "type": "EndpointBlock",
      "disabled": false,
      "name": "listMembersFromSpace2",
      "displayName": "Qlik Cloud Services - List Members From Space 2",
      "comment": "Get a list of members in the managed space.",
      "childId": "4C669FE6-61A1-402B-9A79-357A350E8030",
      "inputs": [
        {
          "id": "358ee8a0-6d34-11eb-b1f3-91a0d7274b22",
          "value": "{ $.managedSpaceId }",
          "type": "string",
          "structure": []
        },
        {
          "id": "86f34440-dd7e-11ef-91d1-63f16d094078",
          "value": "{ $.getCurrentUserId }",
          "type": "string",
          "structure": []
        },
        {
          "id": "972a9800-dd7e-11ef-95ae-93a368f4ba58",
          "value": "9fecb2a0-dd7e-11ef-85d3-9f8aefa67848",
          "type": "select",
          "displayValue": "user",
          "structure": []
        }
      ],
      "settings": [
        {
          "id": "maxitemcount",
          "value": "",
          "type": "string",
          "structure": []
        },
        {
          "id": "blendr_on_error",
          "value": "stop",
          "type": "select",
          "structure": []
        },
        { "id": "cache", "value": "0", "type": "select", "structure": [] },
        {
          "id": "automations_censor_data",
          "value": false,
          "type": "checkbox",
          "structure": []
        }
      ],
      "collapsed": [{ "name": "loop", "isCollapsed": true }],
      "x": -442,
      "y": 10128,
      "loopBlockId": null,
      "datasourcetype_guid": "61a87510-c7a3-11ea-95da-0fb0c241e75c",
      "endpoint_guid": "ffe6d930-6d33-11eb-ad8a-334e25c5e295",
      "endpoint_role": "list"
    },
    {
      "id": "4C669FE6-61A1-402B-9A79-357A350E8030",
      "type": "IfElseBlock",
      "disabled": false,
      "name": "condition9",
      "displayName": "Condition 9",
      "comment": "If the user is found, update; otherwise, create an assignment.",
      "childId": null,
      "inputs": [
        {
          "id": "conditions",
          "value": {
            "mode": "all",
            "conditions": [
              {
                "input1": "{count: {$.listMembersFromSpace2}}",
                "input2": "1",
                "operator": "="
              }
            ]
          },
          "type": "custom",
          "structure": []
        }
      ],
      "settings": [],
      "collapsed": [
        { "name": "yes", "isCollapsed": false },
        { "name": "no", "isCollapsed": false }
      ],
      "x": -442,
      "y": 10248,
      "childTrueId": "D0EEE98C-7DA0-47F5-B8C6-31B0507505FD",
      "childFalseId": "9CC93349-E133-4BCC-860C-7AAE4991A788"
    },
    {
      "id": "D0EEE98C-7DA0-47F5-B8C6-31B0507505FD",
      "type": "IfElseBlock",
      "disabled": false,
      "name": "condition10",
      "displayName": "Condition 10",
      "comment": "If the user does not have the facilitator and publisher roles, add them.",
      "childId": null,
      "inputs": [
        {
          "id": "conditions",
          "value": {
            "mode": "some",
            "conditions": [
              {
                "input1": "{$.listMembersFromSpace2[0].roles}",
                "input2": "facilitator",
                "operator": "notInList"
              },
              {
                "input1": "{ $.listMembersFromSpace2[0].roles }",
                "input2": "publisher",
                "operator": "notInList"
              }
            ]
          },
          "type": "custom",
          "structure": []
        }
      ],
      "settings": [],
      "collapsed": [
        { "name": "yes", "isCollapsed": false },
        { "name": "no", "isCollapsed": false }
      ],
      "x": -322,
      "y": 10328,
      "childTrueId": "BE0D6DE8-CA32-466A-917B-40EA75EB91C9",
      "childFalseId": "253E7602-5CB9-473C-A66A-ABB7711934A6"
    },
    {
      "id": "BE0D6DE8-CA32-466A-917B-40EA75EB91C9",
      "type": "VariableBlock",
      "disabled": false,
      "name": "spaceRoles",
      "displayName": "Variable - spaceRoles",
      "comment": "List variable to add facilitator and publisher roles along with the existing roles, to the user in the managed space.",
      "childId": "759EE2C8-9EAF-4D15-9A14-D059BC43154C",
      "inputs": [],
      "settings": [],
      "collapsed": [{ "name": "loop", "isCollapsed": false }],
      "x": -202,
      "y": 10408,
      "variableGuid": "E413E2FB-E4E7-4AFF-8894-6D27792FA8D8",
      "operations": [
        {
          "id": "empty",
          "key": "9837B21E-F102-462E-A474-E0C7D78117CE",
          "name": "Empty { variable }",
          "value": null
        },
        {
          "id": "add_item",
          "key": "68A49E6D-72F7-47D1-BD36-892E32464CB5",
          "name": "Add item to { variable }",
          "value": "facilitator"
        },
        {
          "id": "add_item",
          "key": "17E5F253-7880-4709-BD29-6CDBC72BC2C2",
          "name": "Add item to { variable }",
          "value": "publisher"
        },
        {
          "id": "merge",
          "key": "680DE388-428C-40C5-97E2-C4FB11F0930D",
          "name": "Merge other list into { variable }",
          "value": "{ $.listMembersFromSpace2[0].roles }",
          "allow_duplicates": "no"
        }
      ]
    },
    {
      "id": "759EE2C8-9EAF-4D15-9A14-D059BC43154C",
      "type": "EndpointBlock",
      "disabled": false,
      "name": "updateRolesOfMemberFromSpace2",
      "displayName": "Qlik Cloud Services - Update Roles Of Member From Space 2",
      "comment": "Add the facilitator and publisher roles to the user in the managed space.",
      "childId": "3C75AC47-4371-4B5E-B512-BF7319CADCF4",
      "inputs": [
        {
          "id": "8c6b43e0-6d42-11eb-85f6-917131a7d145",
          "value": "{$.managedSpaceId}",
          "type": "string",
          "structure": []
        },
        {
          "id": "8c72c230-6d42-11eb-837d-b1e5663f20d2",
          "value": "{$.listMembersFromSpace2[0].id}",
          "type": "string",
          "structure": []
        },
        {
          "id": "01ac8e60-6d43-11eb-9d02-4d69db8c0501",
          "value": "{json: {$.spaceRoles}}",
          "type": "string",
          "structure": []
        }
      ],
      "settings": [
        {
          "id": "blendr_on_error",
          "value": "stop",
          "type": "select",
          "structure": []
        },
        {
          "id": "automations_censor_data",
          "value": false,
          "type": "checkbox",
          "structure": []
        }
      ],
      "collapsed": [{ "name": "loop", "isCollapsed": false }],
      "x": -202,
      "y": 10528,
      "datasourcetype_guid": "61a87510-c7a3-11ea-95da-0fb0c241e75c",
      "endpoint_guid": "8c54ade0-6d42-11eb-b3a8-75befcc89b0a",
      "endpoint_role": "update"
    },
    {
      "id": "3C75AC47-4371-4B5E-B512-BF7319CADCF4",
      "type": "ShowBlock",
      "disabled": false,
      "name": "output10",
      "displayName": "Output 10",
      "comment": "Status output.",
      "childId": null,
      "inputs": [
        {
          "id": "input",
          "value": "| Managed space permissions | Added facilitator and publisher role to existing space assignment. |",
          "type": "string",
          "structure": []
        }
      ],
      "settings": [
        {
          "id": "display_mode",
          "value": "add",
          "type": "select",
          "structure": []
        }
      ],
      "collapsed": [{ "name": "loop", "isCollapsed": false }],
      "x": -202,
      "y": 10648
    },
    {
      "id": "253E7602-5CB9-473C-A66A-ABB7711934A6",
      "type": "ShowBlock",
      "disabled": false,
      "name": "output11",
      "displayName": "Output 11",
      "comment": "Status output.",
      "childId": null,
      "inputs": [
        {
          "id": "input",
          "value": "| Managed space permissions | No changes made. |",
          "type": "string",
          "structure": []
        }
      ],
      "settings": [
        {
          "id": "display_mode",
          "value": "add",
          "type": "select",
          "structure": []
        }
      ],
      "collapsed": [{ "name": "loop", "isCollapsed": false }],
      "x": -202,
      "y": 10808
    },
    {
      "id": "9CC93349-E133-4BCC-860C-7AAE4991A788",
      "type": "EndpointBlock",
      "disabled": false,
      "name": "addMemberToSpace2",
      "displayName": "Qlik Cloud Services - Add Member To Space 2",
      "comment": "Add user with facilitator and publisher roles.",
      "childId": "DD87C70B-9C4F-4DDF-9DFA-4515A73AD2DF",
      "inputs": [
        {
          "id": "3162f740-6d33-11eb-a089-71f7ccab24b9",
          "value": "{$.managedSpaceId}",
          "type": "string",
          "structure": []
        },
        {
          "id": "27499b00-6d31-11eb-bbe5-5b3db3c974dc",
          "value": "{$.getCurrentUserId}",
          "type": "string",
          "structure": []
        },
        {
          "id": "2751b870-6d31-11eb-9d77-41c5fae28bc5",
          "value": "[\"facilitator\",\"publisher\"]",
          "type": "string",
          "structure": []
        },
        {
          "id": "275e2c50-6d31-11eb-8eeb-157347755492",
          "value": "aec7c5b0-6d32-11eb-a4b2-f5e181a2c241",
          "type": "select",
          "displayValue": "user",
          "structure": []
        }
      ],
      "settings": [
        {
          "id": "blendr_on_error",
          "value": "stop",
          "type": "select",
          "structure": []
        },
        {
          "id": "automations_censor_data",
          "value": false,
          "type": "checkbox",
          "structure": []
        }
      ],
      "collapsed": [{ "name": "loop", "isCollapsed": false }],
      "x": -322,
      "y": 11048,
      "datasourcetype_guid": "61a87510-c7a3-11ea-95da-0fb0c241e75c",
      "endpoint_guid": "272d9c70-6d31-11eb-870f-67624392ed86",
      "endpoint_role": "create"
    },
    {
      "id": "DD87C70B-9C4F-4DDF-9DFA-4515A73AD2DF",
      "type": "ShowBlock",
      "disabled": false,
      "name": "output12",
      "displayName": "Output 12",
      "comment": "Status output.",
      "childId": null,
      "inputs": [
        {
          "id": "input",
          "value": "| Managed space permissions | Added user to managed space. |",
          "type": "string",
          "structure": []
        }
      ],
      "settings": [
        {
          "id": "display_mode",
          "value": "add",
          "type": "select",
          "structure": []
        }
      ],
      "collapsed": [{ "name": "loop", "isCollapsed": false }],
      "x": -322,
      "y": 11168
    },
    {
      "id": "F37D6ACE-DF7C-4EB9-A990-E7DBCD31ABDF",
      "type": "ShowBlock",
      "disabled": false,
      "name": "output13",
      "displayName": "Output 13",
      "comment": "Status output.",
      "childId": null,
      "inputs": [
        {
          "id": "input",
          "value": "| Managed space permissions | Found user is owner of space, no permission updates required. |",
          "type": "string",
          "structure": []
        }
      ],
      "settings": [
        {
          "id": "display_mode",
          "value": "add",
          "type": "select",
          "structure": []
        }
      ],
      "collapsed": [{ "name": "loop", "isCollapsed": false }],
      "x": -442,
      "y": 11408
    },
    {
      "id": "7C0C15A5-F334-4AD6-A9D4-C0AC674CC34B",
      "type": "IfElseBlock",
      "disabled": false,
      "name": "condition11",
      "displayName": "Condition 11",
      "comment": "If no shared space is found, create it.",
      "childId": "230E3338-D040-459F-A88C-47CD38B6BD39",
      "inputs": [
        {
          "id": "conditions",
          "value": {
            "mode": "all",
            "conditions": [
              {
                "input1": "{$.sharedSpaceId}",
                "input2": null,
                "operator": "empty"
              }
            ]
          },
          "type": "custom",
          "structure": []
        }
      ],
      "settings": [],
      "collapsed": [
        { "name": "yes", "isCollapsed": false },
        { "name": "no", "isCollapsed": true },
        { "name": "both", "isCollapsed": false }
      ],
      "x": -802,
      "y": 11728,
      "childTrueId": "A835D799-19FC-450D-BF01-88DB67C89291",
      "childFalseId": null
    },
    {
      "id": "A835D799-19FC-450D-BF01-88DB67C89291",
      "type": "EndpointBlock",
      "disabled": false,
      "name": "createSpace",
      "displayName": "Qlik Cloud Services - Create Space",
      "comment": "Create shared space.",
      "childId": "19A7E512-81F6-407C-B4F5-A537C5DA9597",
      "inputs": [
        {
          "id": "f0de69a0-6d24-11eb-8c07-ebadb5af2511",
          "value": "{$.sharedSpaceName}",
          "type": "string",
          "structure": []
        },
        {
          "id": "79771850-6d25-11eb-8021-177e65e81ac9",
          "value": "shared",
          "type": "select",
          "structure": []
        },
        {
          "id": "f0ecac30-6d24-11eb-a7b6-d15be2d36858",
          "value": "Managed by the detailed consumption app automation template.",
          "type": "string",
          "structure": []
        }
      ],
      "settings": [
        {
          "id": "blendr_on_error",
          "value": "stop",
          "type": "select",
          "structure": []
        },
        {
          "id": "automations_censor_data",
          "value": false,
          "type": "checkbox",
          "structure": []
        }
      ],
      "collapsed": [{ "name": "loop", "isCollapsed": false }],
      "x": -682,
      "y": 11808,
      "datasourcetype_guid": "61a87510-c7a3-11ea-95da-0fb0c241e75c",
      "endpoint_guid": "f0c14620-6d24-11eb-aa67-c519e2671d3d",
      "endpoint_role": "create"
    },
    {
      "id": "19A7E512-81F6-407C-B4F5-A537C5DA9597",
      "type": "VariableBlock",
      "disabled": false,
      "name": "sharedSpaceId",
      "displayName": "Variable - sharedSpaceId",
      "comment": "Store the newly created shared space ID in this variable.",
      "childId": "E43BB4EB-9F53-4ACA-9649-051763575EE8",
      "inputs": [],
      "settings": [],
      "collapsed": [{ "name": "loop", "isCollapsed": false }],
      "x": -682,
      "y": 11928,
      "variableGuid": "DE390532-B1F9-4098-BBE0-B7E6101BD502",
      "operations": [
        {
          "id": "set_value",
          "key": "FF599B67-45E6-44E2-9966-4EEEE9F474D4",
          "name": "Set value of { variable }",
          "value": "{$.createSpace.id}"
        }
      ]
    },
    {
      "id": "E43BB4EB-9F53-4ACA-9649-051763575EE8",
      "type": "ShowBlock",
      "disabled": false,
      "name": "output14",
      "displayName": "Output 14",
      "comment": "Status output.",
      "childId": null,
      "inputs": [
        {
          "id": "input",
          "value": "| Shared space created | Created space [{$.sharedSpaceName}]({$.tenantHostname}analytics/catalog?space_filter={$.sharedSpaceId}). |",
          "type": "string",
          "structure": []
        }
      ],
      "settings": [
        {
          "id": "display_mode",
          "value": "add",
          "type": "select",
          "structure": []
        }
      ],
      "collapsed": [{ "name": "loop", "isCollapsed": false }],
      "x": -682,
      "y": 12048
    },
    {
      "id": "230E3338-D040-459F-A88C-47CD38B6BD39",
      "type": "IfElseBlock",
      "disabled": false,
      "name": "condition12",
      "displayName": "Condition 12",
      "comment": "If a managed space is not found, create it.",
      "childId": "F4D0DE07-AD02-4C58-9CEA-A3409E738389",
      "inputs": [
        {
          "id": "conditions",
          "value": {
            "mode": "all",
            "conditions": [
              {
                "input1": "{$.managedSpaceId}",
                "input2": null,
                "operator": "empty"
              }
            ]
          },
          "type": "custom",
          "structure": []
        }
      ],
      "settings": [],
      "collapsed": [
        { "name": "yes", "isCollapsed": false },
        { "name": "no", "isCollapsed": true },
        { "name": "both", "isCollapsed": false }
      ],
      "x": -802,
      "y": 12208,
      "childTrueId": "ED0FFFF7-7BA3-4BC5-B2CC-37F2AE4C0408",
      "childFalseId": null
    },
    {
      "id": "ED0FFFF7-7BA3-4BC5-B2CC-37F2AE4C0408",
      "type": "EndpointBlock",
      "disabled": false,
      "name": "createSpace2",
      "displayName": "Qlik Cloud Services - Create Space 2",
      "comment": "Create managed space.",
      "childId": "74016C4D-50A2-4FE0-AB21-3021ED1C263F",
      "inputs": [
        {
          "id": "f0de69a0-6d24-11eb-8c07-ebadb5af2511",
          "value": "{$.managedSpaceName}",
          "type": "string",
          "structure": []
        },
        {
          "id": "79771850-6d25-11eb-8021-177e65e81ac9",
          "value": "managed",
          "type": "select",
          "structure": []
        },
        {
          "id": "f0ecac30-6d24-11eb-a7b6-d15be2d36858",
          "value": "Managed by the detailed consumption app automation template.",
          "type": "string",
          "structure": []
        }
      ],
      "settings": [
        {
          "id": "blendr_on_error",
          "value": "stop",
          "type": "select",
          "structure": []
        },
        {
          "id": "automations_censor_data",
          "value": false,
          "type": "checkbox",
          "structure": []
        }
      ],
      "collapsed": [{ "name": "loop", "isCollapsed": false }],
      "x": -682,
      "y": 12288,
      "datasourcetype_guid": "61a87510-c7a3-11ea-95da-0fb0c241e75c",
      "endpoint_guid": "f0c14620-6d24-11eb-aa67-c519e2671d3d",
      "endpoint_role": "create"
    },
    {
      "id": "74016C4D-50A2-4FE0-AB21-3021ED1C263F",
      "type": "VariableBlock",
      "disabled": false,
      "name": "managedSpaceId",
      "displayName": "Variable - managedSpaceId",
      "comment": "Store the newly created managed space ID in this variable.",
      "childId": "8EA716DA-A818-45D1-8D97-92171239EAE3",
      "inputs": [],
      "settings": [],
      "collapsed": [{ "name": "loop", "isCollapsed": false }],
      "x": -682,
      "y": 12408,
      "variableGuid": "B6C34135-EF0E-42EF-AC0D-621D8A8A165D",
      "operations": [
        {
          "id": "set_value",
          "key": "FF599B67-45E6-44E2-9966-4EEEE9F474D4",
          "name": "Set value of { variable }",
          "value": "{$.createSpace2.id}"
        }
      ]
    },
    {
      "id": "8EA716DA-A818-45D1-8D97-92171239EAE3",
      "type": "ShowBlock",
      "disabled": false,
      "name": "output15",
      "displayName": "Output 15",
      "comment": "Status output.",
      "childId": null,
      "inputs": [
        {
          "id": "input",
          "value": "| Managed space created | Created space [{$.managedSpaceName}]({$.tenantHostname}analytics/catalog?space_filter={$.managedSpaceId}). |",
          "type": "string",
          "structure": []
        }
      ],
      "settings": [
        {
          "id": "display_mode",
          "value": "add",
          "type": "select",
          "structure": []
        }
      ],
      "collapsed": [{ "name": "loop", "isCollapsed": false }],
      "x": -682,
      "y": 12528
    },
    {
      "id": "4BE16981-95D8-4418-B598-B26CA6843820",
      "type": "VariableBlock",
      "disabled": false,
      "name": "cleanupCounter",
      "displayName": "Variable - cleanupCounter",
      "comment": "Variable to get the number of deployed apps in the shared space. Initially set the value of this variable to 0.",
      "childId": "5006AC77-27D1-4EA3-AF11-DA559F907DB8",
      "inputs": [],
      "settings": [],
      "collapsed": [{ "name": "loop", "isCollapsed": false }],
      "x": -562,
      "y": 24208,
      "variableGuid": "F6ED0768-9852-46AF-B822-2172586824B7",
      "operations": [
        {
          "id": "set_value",
          "key": "0AA127FF-539F-4311-BF88-189CFE16CC39",
          "name": "Set value of { variable }",
          "value": "0"
        }
      ]
    },
    {
      "id": "5006AC77-27D1-4EA3-AF11-DA559F907DB8",
      "type": "EndpointBlock",
      "disabled": false,
      "name": "searchItems2",
      "displayName": "Qlik Cloud Services - Search Items 2",
      "comment": "Find apps in the shared space with the app tag.",
      "childId": null,
      "inputs": [
        {
          "id": "84bbcd50-6f72-11eb-8452-c12329f7d1be",
          "value": "-createdAt",
          "type": "select",
          "structure": []
        },
        {
          "id": "b9c76ec0-6f72-11eb-ba14-4f34b1e4e6b4",
          "value": "app",
          "type": "string",
          "structure": []
        },
        {
          "id": "49786610-6f73-11eb-8f0a-2348e669c251",
          "value": null,
          "type": "string",
          "structure": []
        },
        {
          "id": "58fafe70-6f73-11eb-a310-696500e924d6",
          "value": null,
          "type": "string",
          "structure": []
        },
        {
          "id": "6eb0af00-6f73-11eb-9663-9f0b522e183f",
          "value": "{$.sharedSpaceId}",
          "type": "string",
          "structure": []
        },
        {
          "id": "a80dbc80-6f76-11eb-9648-4d8865fc84c1",
          "value": null,
          "type": "select",
          "structure": []
        },
        {
          "id": "964119b0-6f77-11eb-a576-3bf4b006d432",
          "value": "{ $.taggerIds.appTag }",
          "type": "string",
          "structure": []
        },
        {
          "id": "a7cd85c0-6f77-11eb-8511-2ba53a2a2998",
          "value": null,
          "type": "string",
          "structure": []
        },
        {
          "id": "d9032100-6f77-11eb-bffb-9bf794dfe9c7",
          "value": null,
          "type": "string",
          "structure": []
        },
        {
          "id": "fe391860-6f77-11eb-9529-afce50ac48a4",
          "value": null,
          "type": "string",
          "structure": []
        },
        {
          "id": "212f52c0-6f78-11eb-b09f-1f3e59290268",
          "value": null,
          "type": "string",
          "structure": []
        },
        {
          "id": "338287a0-6f78-11eb-a90c-152f5cce262e",
          "value": null,
          "type": "string",
          "structure": []
        },
        {
          "id": "41938660-6f78-11eb-94e2-8b5fb7dad158",
          "value": null,
          "type": "string",
          "structure": []
        },
        {
          "id": "4dc17010-6f78-11eb-9894-abf8a46a596a",
          "value": null,
          "type": "string",
          "structure": []
        }
      ],
      "settings": [
        {
          "id": "maxitemcount",
          "value": "",
          "type": "string",
          "structure": []
        },
        {
          "id": "blendr_on_error",
          "value": "stop",
          "type": "select",
          "structure": []
        },
        {
          "id": "automations_censor_data",
          "value": false,
          "type": "checkbox",
          "structure": []
        }
      ],
      "collapsed": [{ "name": "loop", "isCollapsed": false }],
      "x": -562,
      "y": 24328,
      "loopBlockId": "1B323E62-40BB-40D7-AD9A-D04DA4A5FFB6",
      "datasourcetype_guid": "61a87510-c7a3-11ea-95da-0fb0c241e75c",
      "endpoint_guid": "84ad9050-6f72-11eb-aa08-a1dda4364ef5",
      "endpoint_role": "search"
    },
    {
      "id": "1B323E62-40BB-40D7-AD9A-D04DA4A5FFB6",
      "type": "IfElseBlock",
      "disabled": false,
      "name": "condition14",
      "displayName": "Condition 14",
      "comment": "Delete if cleanupCounter value is greater than versionsToKeep value.",
      "childId": "D5570044-9796-4DC7-81B6-C6D2F937FB1F",
      "inputs": [
        {
          "id": "conditions",
          "value": {
            "mode": "all",
            "conditions": [
              {
                "input1": "{$.cleanupCounter}",
                "input2": "{$.versionsToKeep}",
                "operator": ">="
              }
            ]
          },
          "type": "custom",
          "structure": []
        }
      ],
      "settings": [],
      "collapsed": [
        { "name": "yes", "isCollapsed": false },
        { "name": "no", "isCollapsed": true }
      ],
      "x": -442,
      "y": 24428,
      "childTrueId": "1C69733A-CADE-4901-9BC2-4CDA59A50DA2",
      "childFalseId": null
    },
    {
      "id": "1C69733A-CADE-4901-9BC2-4CDA59A50DA2",
      "type": "EndpointBlock",
      "disabled": false,
      "name": "deleteApp",
      "displayName": "Qlik Cloud Services - Delete App",
      "comment": "Delete older version of app from the shared space.",
      "childId": "27388F0E-6FFB-4D16-B4E5-08174412BC75",
      "inputs": [
        {
          "id": "fcd14a20-67b2-11eb-9f5e-9113990ec3b6",
          "value": "{$.searchItems2.item.resourceAttributes.id}",
          "type": "string",
          "structure": []
        }
      ],
      "settings": [
        {
          "id": "blendr_on_error",
          "value": "stop",
          "type": "select",
          "structure": []
        },
        {
          "id": "automations_censor_data",
          "value": false,
          "type": "checkbox",
          "structure": []
        }
      ],
      "collapsed": [{ "name": "loop", "isCollapsed": false }],
      "x": -322,
      "y": 24508,
      "datasourcetype_guid": "61a87510-c7a3-11ea-95da-0fb0c241e75c",
      "endpoint_guid": "fcc108b0-67b2-11eb-806a-3957ec36f31b",
      "endpoint_role": "delete"
    },
    {
      "id": "27388F0E-6FFB-4D16-B4E5-08174412BC75",
      "type": "ShowBlock",
      "disabled": false,
      "name": "output18",
      "displayName": "Output 18",
      "comment": "Status output.",
      "childId": null,
      "inputs": [
        {
          "id": "input",
          "value": "| {$.loop2.item.name} - Cleanup | > Configured to keep {$.versionsToKeep} apps, deleted app {add: {$.cleanupCounter}, 1} from shared space: [{$.searchItems2.item.resourceAttributes.name}]. |",
          "type": "string",
          "structure": []
        }
      ],
      "settings": [
        {
          "id": "display_mode",
          "value": "add",
          "type": "select",
          "structure": []
        }
      ],
      "collapsed": [{ "name": "loop", "isCollapsed": false }],
      "x": -322,
      "y": 24628
    },
    {
      "id": "D5570044-9796-4DC7-81B6-C6D2F937FB1F",
      "type": "VariableBlock",
      "disabled": false,
      "name": "cleanupCounter",
      "displayName": "Variable - cleanupCounter",
      "comment": "Increment the variable by 1 to get the total count of apps that have been backed up in the shared space.",
      "childId": null,
      "inputs": [],
      "settings": [],
      "collapsed": [{ "name": "loop", "isCollapsed": false }],
      "x": -442,
      "y": 24788,
      "variableGuid": "F6ED0768-9852-46AF-B822-2172586824B7",
      "operations": [
        {
          "id": "add",
          "key": "5B03057A-3746-4B90-83B6-69A9F037542C",
          "name": "Add to { variable }",
          "value": "1"
        }
      ]
    },
    {
      "id": "BE7F53B8-B1FD-48DF-A8A5-D6638F74FA2C",
      "type": "VariableBlock",
      "disabled": false,
      "name": "errorTitle",
      "displayName": "Variable - errorTitle",
      "comment": "Missing the TenantAdmin role on the executing user.",
      "childId": "A8F7B895-B7BB-4F7A-9189-B757D5A85B52",
      "inputs": [],
      "settings": [],
      "collapsed": [{ "name": "loop", "isCollapsed": false }],
      "x": -682,
      "y": -272,
      "variableGuid": "407730A6-EC96-4337-BE80-CF4C0D552F08",
      "operations": [
        {
          "id": "set_value",
          "key": "1BC10F4C-68C2-42E9-9000-25865B076073",
          "name": "Set value of { variable }",
          "value": "Missing TenantAdmin role on executing user."
        }
      ]
    },
    {
      "id": "A8F7B895-B7BB-4F7A-9189-B757D5A85B52",
      "type": "VariableBlock",
      "disabled": false,
      "name": "errorDetail",
      "displayName": "Variable - errorDetail",
      "comment": "Variable to store detailed error message.",
      "childId": "1D1FB21E-ADAA-4284-8526-5C849D304B59",
      "inputs": [],
      "settings": [],
      "collapsed": [{ "name": "loop", "isCollapsed": false }],
      "x": -682,
      "y": -152,
      "variableGuid": "1BF2068B-106E-4D58-BC51-884F1810F03C",
      "operations": [
        {
          "id": "set_value",
          "key": "1BC10F4C-68C2-42E9-9000-25865B076073",
          "name": "Set value of { variable }",
          "value": "Exiting, could not find TenantAdmin role assigned to current user either via direct or group assignment."
        }
      ]
    },
    {
      "id": "1D1FB21E-ADAA-4284-8526-5C849D304B59",
      "type": "GotoBlock",
      "disabled": false,
      "name": "goToLabel5",
      "displayName": "Go To Label 5",
      "comment": "Go to the label named error.",
      "childId": null,
      "inputs": [
        {
          "id": "label",
          "value": "EF82AD29-E2CF-44C9-A7DB-24C784618756",
          "type": "select",
          "displayValue": "error",
          "structure": []
        }
      ],
      "settings": [],
      "collapsed": [{ "name": "loop", "isCollapsed": false }],
      "x": -682,
      "y": -32
    },
    {
      "id": "D46F6E49-3856-430B-A685-0A07984CDAEB",
      "type": "ShowBlock",
      "disabled": false,
      "name": "output20",
      "displayName": "Output 20",
      "comment": "Exit output.",
      "childId": "D7265A2B-A82F-47D4-B7CA-83E0EA902FCF",
      "inputs": [
        {
          "id": "input",
          "value": "Error: { $.errorDetail }",
          "type": "string",
          "structure": []
        }
      ],
      "settings": [
        {
          "id": "display_mode",
          "value": "add",
          "type": "select",
          "structure": []
        }
      ],
      "collapsed": [{ "name": "loop", "isCollapsed": false }],
      "x": -9,
      "y": -2706
    },
    {
      "id": "D7265A2B-A82F-47D4-B7CA-83E0EA902FCF",
      "type": "UpdateJobBlock",
      "disabled": false,
      "name": "updateRunTitle2",
      "displayName": "Update Run Title 2",
      "comment": "Update run title with the error message.",
      "childId": "EA734A3A-B6F0-47F4-BB88-4D3C1DCADBE2",
      "inputs": [
        {
          "id": "title",
          "value": "Error: { $.errorTitle }",
          "type": "string",
          "structure": []
        }
      ],
      "settings": [
        {
          "id": "automations_censor_data",
          "value": false,
          "type": "checkbox",
          "structure": []
        }
      ],
      "collapsed": [{ "name": "loop", "isCollapsed": false }],
      "x": -9,
      "y": -2586
    },
    {
      "id": "43D8ED19-F455-48F9-9CC4-7FE2A93B1884",
      "type": "EndpointBlock",
      "disabled": false,
      "name": "getCurrentTenantInfo",
      "displayName": "Qlik Cloud Services - Get Current Tenant Info",
      "comment": "Get record for the current tenant.",
      "childId": "DD6471AE-35D5-4348-819C-90FB501F35CD",
      "inputs": [],
      "settings": [
        {
          "id": "blendr_on_error",
          "value": "stop",
          "type": "select",
          "structure": []
        },
        { "id": "cache", "value": "0", "type": "select", "structure": [] },
        {
          "id": "automations_censor_data",
          "value": false,
          "type": "checkbox",
          "structure": []
        }
      ],
      "collapsed": [{ "name": "loop", "isCollapsed": false }],
      "x": -802,
      "y": -1512,
      "datasourcetype_guid": "61a87510-c7a3-11ea-95da-0fb0c241e75c",
      "endpoint_guid": "55051480-cb86-11ec-b746-892c1d04114e",
      "endpoint_role": "get"
    },
    {
      "id": "DD6471AE-35D5-4348-819C-90FB501F35CD",
      "type": "VariableBlock",
      "disabled": false,
      "name": "tenantHostname",
      "displayName": "Variable - tenantHostname",
      "comment": "Determine tenant hostname. Use alias if available.",
      "childId": "82CEC2F2-0C2A-438F-8D85-41BF9C90E37B",
      "inputs": [],
      "settings": [],
      "collapsed": [{ "name": "loop", "isCollapsed": false }],
      "x": -802,
      "y": -1392,
      "variableGuid": "3723D829-3B14-4B68-AAFE-63966A7025E6",
      "operations": [
        {
          "id": "set_value",
          "key": "552A5562-F8C8-4C4C-AB89-C90BD892542E",
          "name": "Set value of { variable }",
          "value": "https://{if: { $.getCurrentTenantInfo.hostnames[1] } empty , $.getCurrentTenantInfo.hostnames[0], $.getCurrentTenantInfo.hostnames[1]}/"
        }
      ]
    },
    {
      "id": "AABAC2BF-30E8-49FC-982B-52BD9707DAE0",
      "type": "VariableBlock",
      "disabled": false,
      "name": "refreshConnectorCredentials",
      "displayName": "Variable - refreshConnectorCredentials",
      "comment": "Configure whether to refresh the REST credentials on every run. By default, set to 1, which will recreate the credentials each time. Set to 0 to leave the API keys unchanged.",
      "childId": "2E61A575-F621-4713-B446-C1BAC52D8834",
      "inputs": [],
      "settings": [],
      "collapsed": [{ "name": "loop", "isCollapsed": false }],
      "x": -802,
      "y": -2472,
      "variableGuid": "64E41053-153C-41E1-8E96-441CE6CCC379",
      "operations": [
        {
          "id": "set_value",
          "key": "2A53EE0E-A13C-45CD-9E07-D012532B33CA",
          "name": "Set value of { variable }",
          "value": "1"
        }
      ]
    },
    {
      "id": "82CEC2F2-0C2A-438F-8D85-41BF9C90E37B",
      "type": "VariableBlock",
      "disabled": false,
      "name": "currentTemplateVersionNum",
      "displayName": "Variable - currentTemplateVersionNum",
      "comment": "The current version number of this template",
      "childId": "D7D4A126-BDC4-41D8-AB46-9D581AAE2FED",
      "inputs": [],
      "settings": [],
      "collapsed": [{ "name": "loop", "isCollapsed": false }],
      "x": -802,
      "y": -1272,
      "variableGuid": "69E3DE89-62A4-4A45-A797-81D480D8BBC9",
      "operations": [
        {
          "id": "set_value",
          "key": "F54109D0-B3B3-4AB8-AB22-1E1379CCFA98",
          "name": "Set value of { variable }",
          "value": "1"
        }
      ]
    },
    {
      "id": "D7D4A126-BDC4-41D8-AB46-9D581AAE2FED",
      "type": "CallUrlBlock",
      "disabled": false,
      "name": "callURL",
      "displayName": "Call URL",
      "comment": "Retrieve installer manifest from Qlik to determine latest version of this automation.",
      "childId": "E9A1664E-7B3A-4333-9DCA-65E34A43AD2D",
      "inputs": [
        {
          "id": "url",
          "value": "https://raw.githubusercontent.com/qlik-oss/qlik-cloud-monitoring-apps/refs/heads/main/manifests/installers.json",
          "type": "string",
          "structure": []
        },
        { "id": "method", "value": "GET", "type": "select", "structure": [] },
        { "id": "timeout", "value": "", "type": "string", "structure": [] },
        {
          "id": "params",
          "value": null,
          "type": "object",
          "mode": "keyValue",
          "structure": []
        },
        {
          "id": "headers",
          "value": null,
          "type": "object",
          "mode": "keyValue",
          "structure": []
        },
        { "id": "encoding", "value": "", "type": "string", "structure": [] }
      ],
      "settings": [
        {
          "id": "blendr_on_error",
          "value": "stop",
          "type": "select",
          "structure": []
        },
        {
          "id": "full_response",
          "value": null,
          "type": "checkbox",
          "structure": []
        },
        {
          "id": "capitalize_headers",
          "value": true,
          "type": "checkbox",
          "structure": []
        },
        {
          "id": "automations_censor_data",
          "value": false,
          "type": "checkbox",
          "structure": []
        }
      ],
      "collapsed": [{ "name": "loop", "isCollapsed": false }],
      "x": -802,
      "y": -1152
    },
    {
      "id": "C199B1F5-97A8-493A-BA22-0632702923FD",
      "type": "IfElseBlock",
      "disabled": false,
      "name": "condition15",
      "displayName": "Condition 15",
      "comment": "If the automation version is greater than or equal to the manifest version.",
      "childId": "D0E7DF6C-C216-4DB6-8502-1F3C4ADF5AFE",
      "inputs": [
        {
          "id": "conditions",
          "value": {
            "mode": "all",
            "conditions": [
              {
                "input1": "{ $.currentTemplateVersionNum }",
                "input2": "{ $.callURL.installers[?(@.template=='qcmad')].version }",
                "operator": ">="
              }
            ]
          },
          "type": "custom",
          "structure": []
        }
      ],
      "settings": [],
      "collapsed": [
        { "name": "both", "isCollapsed": false },
        { "name": "yes", "isCollapsed": false },
        { "name": "no", "isCollapsed": false }
      ],
      "x": -802,
      "y": -912,
      "childTrueId": null,
      "childFalseId": "8A147572-A4B4-436E-AEEA-D3B0D9E2CE1B"
    },
    {
      "id": "8C8FFCA6-849B-49E7-9852-7B0C074D6F65",
      "type": "EndpointBlock",
      "disabled": false,
      "name": "rawAPIRequest",
      "displayName": "Qlik Cloud Services - Raw API Request",
      "comment": "Look up user by subject.",
      "childId": "9C6779A3-FFA8-49D8-B3AE-ADA3D57BA1D5",
      "inputs": [
        {
          "id": "4add8960-2078-11ec-be2c-7fc55d771fe6",
          "value": "licenses/assignments",
          "type": "string",
          "structure": []
        },
        {
          "id": "3b992a40-2072-11ec-9f0e-ed01586a7e1b",
          "value": "3ba1eed0-2072-11ec-aa67-f118ee53373a",
          "type": "select",
          "displayValue": "GET",
          "structure": []
        },
        {
          "id": "3b8b9090-2072-11ec-8c77-5195fbb0ca65",
          "value": null,
          "type": "object",
          "mode": "keyValue",
          "structure": []
        },
        {
          "id": "993585d0-2839-11ec-b431-df4deed6c1ae",
          "value": [
            {
              "key": "filter",
              "value": "subject eq \"{regexreplace: { $.getUser.subject }, '(\\\\)', '\\\\\\\\'}\""
            }
          ],
          "type": "object",
          "mode": "keyValue",
          "structure": []
        }
      ],
      "settings": [
        {
          "id": "blendr_on_error",
          "value": "stop",
          "type": "select",
          "structure": []
        },
        {
          "id": "automations_censor_data",
          "value": false,
          "type": "checkbox",
          "structure": []
        }
      ],
      "collapsed": [{ "name": "loop", "isCollapsed": false }],
      "x": -802,
      "y": 1308,
      "datasourcetype_guid": "61a87510-c7a3-11ea-95da-0fb0c241e75c",
      "endpoint_guid": "3b75dd80-2072-11ec-9043-3b2aff6123af",
      "endpoint_role": "create"
    },
    {
      "id": "F893CB46-17A5-4082-BB7B-5564538B5F8B",
      "type": "IfElseBlock",
      "disabled": false,
      "name": "condition16",
      "displayName": "Condition 16",
      "comment": "If not a capacity product, fail if user doesn't have a professional license as we cannot guarantee these can be auto assigned.",
      "childId": "6DA24FBE-A1C7-4EF8-85CA-9C796A00B84D",
      "inputs": [
        {
          "id": "conditions",
          "value": {
            "mode": "all",
            "conditions": [
              {
                "input1": "{ $.rawAPIRequest.data[*].type }",
                "input2": "professional",
                "operator": "notInList"
              },
              {
                "input1": "{ $.isCapacityTenant }",
                "input2": "0",
                "operator": "="
              }
            ]
          },
          "type": "custom",
          "structure": []
        }
      ],
      "settings": [],
      "collapsed": [
        { "name": "both", "isCollapsed": false },
        { "name": "yes", "isCollapsed": false },
        { "name": "no", "isCollapsed": false }
      ],
      "x": -802,
      "y": 1668,
      "childTrueId": "D115A0F9-A1B3-4483-8169-145D1F47A9B1",
      "childFalseId": null
    },
    {
      "id": "D115A0F9-A1B3-4483-8169-145D1F47A9B1",
      "type": "VariableBlock",
      "disabled": false,
      "name": "errorTitle",
      "displayName": "Variable - errorTitle",
      "comment": "Missing a professional entitlement on the executing user.",
      "childId": "6064DA9A-04D6-49DD-B223-C3752D3769F4",
      "inputs": [],
      "settings": [],
      "collapsed": [{ "name": "loop", "isCollapsed": false }],
      "x": -682,
      "y": 1748,
      "variableGuid": "407730A6-EC96-4337-BE80-CF4C0D552F08",
      "operations": [
        {
          "id": "set_value",
          "key": "1BC10F4C-68C2-42E9-9000-25865B076073",
          "name": "Set value of { variable }",
          "value": "Missing professional entitlement on executing user."
        }
      ]
    },
    {
      "id": "6064DA9A-04D6-49DD-B223-C3752D3769F4",
      "type": "VariableBlock",
      "disabled": false,
      "name": "errorDetail",
      "displayName": "Variable - errorDetail",
      "comment": "Variable to store detailed error message.",
      "childId": "F81EA66B-BC74-4856-AE46-4B9C1D64A6AE",
      "inputs": [],
      "settings": [],
      "collapsed": [{ "name": "loop", "isCollapsed": false }],
      "x": -682,
      "y": 1868,
      "variableGuid": "1BF2068B-106E-4D58-BC51-884F1810F03C",
      "operations": [
        {
          "id": "set_value",
          "key": "1BC10F4C-68C2-42E9-9000-25865B076073",
          "name": "Set value of { variable }",
          "value": "Exiting, could not find a professional entitlement assigned to current user. Please assign a professional entitlement to your user. A log out may be required to clear caches."
        }
      ]
    },
    {
      "id": "F81EA66B-BC74-4856-AE46-4B9C1D64A6AE",
      "type": "GotoBlock",
      "disabled": false,
      "name": "goToLabel6",
      "displayName": "Go To Label 6",
      "comment": "Go to the label named error.",
      "childId": null,
      "inputs": [
        {
          "id": "label",
          "value": "EF82AD29-E2CF-44C9-A7DB-24C784618756",
          "type": "select",
          "displayValue": "error",
          "structure": []
        }
      ],
      "settings": [],
      "collapsed": [{ "name": "loop", "isCollapsed": false }],
      "x": -682,
      "y": 1988
    },
    {
      "id": "8A147572-A4B4-436E-AEEA-D3B0D9E2CE1B",
      "type": "VariableBlock",
      "disabled": false,
      "name": "errorTitle",
      "displayName": "Variable - errorTitle",
      "comment": "Installer template is not up to date.",
      "childId": "76BA5BAA-674D-40E9-8AF5-7A8BC1163723",
      "inputs": [],
      "settings": [],
      "collapsed": [{ "name": "loop", "isCollapsed": false }],
      "x": -682,
      "y": -752,
      "variableGuid": "407730A6-EC96-4337-BE80-CF4C0D552F08",
      "operations": [
        {
          "id": "set_value",
          "key": "1BC10F4C-68C2-42E9-9000-25865B076073",
          "name": "Set value of { variable }",
          "value": "Installer template is not up to date."
        }
      ]
    },
    {
      "id": "76BA5BAA-674D-40E9-8AF5-7A8BC1163723",
      "type": "VariableBlock",
      "disabled": false,
      "name": "errorDetail",
      "displayName": "Variable - errorDetail",
      "comment": "Variable to store detailed error message.",
      "childId": "D5160C26-BED7-49E2-8A96-463AE880E7AA",
      "inputs": [],
      "settings": [],
      "collapsed": [{ "name": "loop", "isCollapsed": false }],
      "x": -682,
      "y": -632,
      "variableGuid": "1BF2068B-106E-4D58-BC51-884F1810F03C",
      "operations": [
        {
          "id": "set_value",
          "key": "1BC10F4C-68C2-42E9-9000-25865B076073",
          "name": "Set value of { variable }",
          "value": "Exiting, automation template version \"{$.currentTemplateVersionNum}\" is not greater than or equal to the latest version \"{ $.callURL.installers[?(@.template=='qcmad')].version }\" |\n{linebreak}\n{linebreak}\nThis template is out of date and cannot be used. Please navigate to the Qlik Automate Templates library and select the \"Qlik Cloud Monitoring Apps Deployer\" template to receive the latest. This automation can be deleted, but make sure you backup any changes made to the variables and transfer them to the new automation."
        }
      ]
    },
    {
      "id": "D5160C26-BED7-49E2-8A96-463AE880E7AA",
      "type": "GotoBlock",
      "disabled": false,
      "name": "goToLabel7",
      "displayName": "Go To Label 7",
      "comment": "Go to the label named error.",
      "childId": null,
      "inputs": [
        {
          "id": "label",
          "value": "EF82AD29-E2CF-44C9-A7DB-24C784618756",
          "type": "select",
          "displayValue": "error",
          "structure": []
        }
      ],
      "settings": [],
      "collapsed": [{ "name": "loop", "isCollapsed": false }],
      "x": -682,
      "y": -512
    },
    {
      "id": "948CF475-AF52-4C8B-AF9E-07DD7DE82F45",
      "type": "VariableBlock",
      "disabled": false,
      "name": "userRoles",
      "displayName": "Variable - userRoles",
      "comment": "Collect all roles for API key access checks.",
      "childId": "CD1DE6F6-8F1B-43EE-9B1A-E1ED8E200416",
      "inputs": [],
      "settings": [],
      "collapsed": [{ "name": "loop", "isCollapsed": false }],
      "x": -802,
      "y": 168,
      "variableGuid": "CD9F0C76-28B4-482E-A218-EDE5763F6807",
      "operations": [
        {
          "id": "merge",
          "key": "1835DD18-E922-44C8-B5B7-CE7182E56679",
          "name": "Merge other list into { variable }",
          "value": "{ $.getUser.assignedRoles }"
        },
        {
          "id": "merge",
          "key": "D055F0D5-48CC-4BAB-99C0-5CA64200759F",
          "name": "Merge other list into { variable }",
          "value": "{ $.getUser.assignedGroups[*].assignedRoles }"
        }
      ]
    },
    {
      "id": "3F9D73BE-55D6-406B-B9DE-D518B12BAA4E",
      "type": "FilterListBlock",
      "disabled": false,
      "name": "filterList4",
      "displayName": "Filter List 4",
      "comment": "Loop over custom roles to build list of permissions.",
      "childId": "192CAC57-0476-4EA6-9E3B-44900026EB88",
      "inputs": [
        {
          "id": "list",
          "value": "{ $.userRoles }",
          "type": "string",
          "structure": []
        },
        {
          "id": "conditions",
          "value": {
            "mode": "all",
            "conditions": [
              { "input1": "type", "input2": "custom", "operator": "=" }
            ]
          },
          "type": "custom",
          "structure": []
        }
      ],
      "settings": [
        {
          "id": "automations_censor_data",
          "value": false,
          "type": "checkbox",
          "structure": []
        }
      ],
      "collapsed": [{ "name": "loop", "isCollapsed": false }],
      "x": -802,
      "y": 408,
      "loopBlockId": "73CC9998-44BE-4947-9526-54DE0D4A39C4"
    },
    {
      "id": "73CC9998-44BE-4947-9526-54DE0D4A39C4",
      "type": "EndpointBlock",
      "disabled": false,
      "name": "getRole",
      "displayName": "Qlik Cloud Services - Get Role",
      "comment": "",
      "childId": "652F5F89-37E7-4AB8-96DA-F3A3A9242C95",
      "inputs": [
        {
          "id": "b537b230-3702-11f0-a5a5-6dd4cd401495",
          "value": "{ $.filterList4.item.id }",
          "type": "string",
          "structure": []
        }
      ],
      "settings": [
        {
          "id": "blendr_on_error",
          "value": "stop",
          "type": "select",
          "structure": []
        },
        { "id": "cache", "value": "0", "type": "select", "structure": [] },
        {
          "id": "automations_censor_data",
          "value": false,
          "type": "checkbox",
          "structure": []
        }
      ],
      "collapsed": [{ "name": "loop", "isCollapsed": false }],
      "x": -682,
      "y": 508,
      "datasourcetype_guid": "61a87510-c7a3-11ea-95da-0fb0c241e75c",
      "endpoint_guid": "76c4e5d0-3702-11f0-bd5c-8b8be373d450",
      "endpoint_role": "get"
    },
    {
      "id": "CD1DE6F6-8F1B-43EE-9B1A-E1ED8E200416",
      "type": "VariableBlock",
      "disabled": false,
      "name": "userPermissions",
      "displayName": "Variable - userPermissions",
      "comment": "Empty user permissions list.",
      "childId": "3F9D73BE-55D6-406B-B9DE-D518B12BAA4E",
      "inputs": [],
      "settings": [],
      "collapsed": [{ "name": "loop", "isCollapsed": false }],
      "x": -802,
      "y": 288,
      "variableGuid": "4283B5F6-E6C0-492F-AA5B-21195FFF74DF",
      "operations": [
        {
          "id": "empty",
          "key": "5CA3D3DF-A8A6-4787-BE09-8DC63ADBF31C",
          "name": "Empty { variable }",
          "value": null
        }
      ]
    },
    {
      "id": "652F5F89-37E7-4AB8-96DA-F3A3A9242C95",
      "type": "VariableBlock",
      "disabled": false,
      "name": "userPermissions",
      "displayName": "Variable - userPermissions",
      "comment": "Add to user permissions list.",
      "childId": null,
      "inputs": [],
      "settings": [],
      "collapsed": [{ "name": "loop", "isCollapsed": false }],
      "x": -682,
      "y": 628,
      "variableGuid": "4283B5F6-E6C0-492F-AA5B-21195FFF74DF",
      "operations": [
        {
          "id": "merge",
          "key": "E08C7C2C-0351-4834-9C2B-8621AA9CCFB0",
          "name": "Merge other list into { variable }",
          "value": "{ $.getRole.assignedScopes }"
        }
      ]
    },
    {
      "id": "192CAC57-0476-4EA6-9E3B-44900026EB88",
      "type": "IfElseBlock",
      "disabled": false,
      "name": "condition17",
      "displayName": "Condition 17",
      "comment": "If api-keys permission not present, exit.",
      "childId": "8C8FFCA6-849B-49E7-9852-7B0C074D6F65",
      "inputs": [
        {
          "id": "conditions",
          "value": {
            "mode": "all",
            "conditions": [
              {
                "input1": "{ $.userPermissions }",
                "input2": "api-keys",
                "operator": "notInList"
              }
            ]
          },
          "type": "custom",
          "structure": []
        }
      ],
      "settings": [],
      "collapsed": [
        { "name": "both", "isCollapsed": false },
        { "name": "yes", "isCollapsed": false },
        { "name": "no", "isCollapsed": false }
      ],
      "x": -802,
      "y": 788,
      "childTrueId": "85BD0C04-9778-4A9E-A153-DE2A74C1CE3B",
      "childFalseId": null
    },
    {
      "id": "85BD0C04-9778-4A9E-A153-DE2A74C1CE3B",
      "type": "VariableBlock",
      "disabled": false,
      "name": "errorTitle",
      "displayName": "Variable - errorTitle",
      "comment": "Missing the api-keys permission on the executing user.",
      "childId": "0C31D3FC-EAF9-4A51-B843-F7E4F7817619",
      "inputs": [],
      "settings": [],
      "collapsed": [{ "name": "loop", "isCollapsed": false }],
      "x": -682,
      "y": 868,
      "variableGuid": "407730A6-EC96-4337-BE80-CF4C0D552F08",
      "operations": [
        {
          "id": "set_value",
          "key": "1BC10F4C-68C2-42E9-9000-25865B076073",
          "name": "Set value of { variable }",
          "value": "Missing api-keys permission on executing user."
        }
      ]
    },
    {
      "id": "0C31D3FC-EAF9-4A51-B843-F7E4F7817619",
      "type": "VariableBlock",
      "disabled": false,
      "name": "errorDetail",
      "displayName": "Variable - errorDetail",
      "comment": "Variable to store detailed error message.",
      "childId": "EBC4167E-EF3B-4828-B452-457EB4B11613",
      "inputs": [],
      "settings": [],
      "collapsed": [{ "name": "loop", "isCollapsed": false }],
      "x": -682,
      "y": 988,
      "variableGuid": "1BF2068B-106E-4D58-BC51-884F1810F03C",
      "operations": [
        {
          "id": "set_value",
          "key": "1BC10F4C-68C2-42E9-9000-25865B076073",
          "name": "Set value of { variable }",
          "value": "Exiting, could not find the `api-keys` permission assigned to current user. Please either add this permission to a custom role and assign that to your user, or allow this permission for all users. Formerly, access to API keys was controlled by the `Developer` role, which is deprecated. A log out may be required to clear caches."
        }
      ]
    },
    {
      "id": "EBC4167E-EF3B-4828-B452-457EB4B11613",
      "type": "GotoBlock",
      "disabled": false,
      "name": "goToLabel8",
      "displayName": "Go To Label 8",
      "comment": "Go to the label named error.",
      "childId": null,
      "inputs": [
        {
          "id": "label",
          "value": "EF82AD29-E2CF-44C9-A7DB-24C784618756",
          "type": "select",
          "displayValue": "error",
          "structure": []
        }
      ],
      "settings": [],
      "collapsed": [{ "name": "loop", "isCollapsed": false }],
      "x": -682,
      "y": 1108
    },
    {
      "id": "6DA24FBE-A1C7-4EF8-85CA-9C796A00B84D",
      "type": "EndpointBlock",
      "disabled": false,
      "name": "rawAPIRequest2",
      "displayName": "Qlik Cloud Services - Raw API Request 2",
      "comment": "Get API key settings for max expiry.",
      "childId": "60DC4193-EAC7-4353-86C5-C9233AF169EA",
      "inputs": [
        {
          "id": "4add8960-2078-11ec-be2c-7fc55d771fe6",
          "value": "api-keys/configs/{$.getCurrentTenantInfo.id}",
          "type": "string",
          "structure": []
        },
        {
          "id": "3b992a40-2072-11ec-9f0e-ed01586a7e1b",
          "value": "3ba1eed0-2072-11ec-aa67-f118ee53373a",
          "type": "select",
          "displayValue": "GET",
          "structure": []
        },
        {
          "id": "3b8b9090-2072-11ec-8c77-5195fbb0ca65",
          "value": null,
          "type": "object",
          "mode": "keyValue",
          "structure": []
        },
        {
          "id": "993585d0-2839-11ec-b431-df4deed6c1ae",
          "value": null,
          "type": "object",
          "mode": "keyValue",
          "structure": []
        }
      ],
      "settings": [
        {
          "id": "blendr_on_error",
          "value": "stop",
          "type": "select",
          "structure": []
        },
        {
          "id": "automations_censor_data",
          "value": false,
          "type": "checkbox",
          "structure": []
        }
      ],
      "collapsed": [{ "name": "loop", "isCollapsed": false }],
      "x": -802,
      "y": 2188,
      "datasourcetype_guid": "61a87510-c7a3-11ea-95da-0fb0c241e75c",
      "endpoint_guid": "3b75dd80-2072-11ec-9043-3b2aff6123af",
      "endpoint_role": "create"
    },
    {
      "id": "E98AA699-4CAD-416D-81EF-A97EB737FD6C",
      "type": "IfElseBlock",
      "disabled": false,
      "name": "condition18",
      "displayName": "Condition 18",
      "comment": "Are API keys enabled on the tenant, or has tenant been migrated through TLV-750?",
      "childId": "F959E5AA-4EC0-4284-AA66-F59C788B6B08",
      "inputs": [
        {
          "id": "conditions",
          "value": {
            "mode": "some",
            "conditions": [
              {
                "input1": "{$.rawAPIRequest2.api_keys_enabled}",
                "input2": "true",
                "operator": "isTrue"
              },
              {
                "input1": "{ textlength: {$.rawAPIRequest2.api_keys_enabled} }",
                "input2": "0",
                "operator": "="
              }
            ]
          },
          "type": "custom",
          "structure": []
        }
      ],
      "settings": [],
      "collapsed": [
        { "name": "both", "isCollapsed": false },
        { "name": "yes", "isCollapsed": false },
        { "name": "no", "isCollapsed": false }
      ],
      "x": -802,
      "y": 2428,
      "childTrueId": null,
      "childFalseId": "D31546CE-90C1-43CA-9A5E-10B35DDE0BFE"
    },
    {
      "id": "D31546CE-90C1-43CA-9A5E-10B35DDE0BFE",
      "type": "VariableBlock",
      "disabled": false,
      "name": "errorTitle",
      "displayName": "Variable - errorTitle",
      "comment": "API keys are disabled on the tenant, and must be enabled (until TLV-750 implemented).",
      "childId": "D25BBAB7-8646-46AC-BC9B-D512B163DE2A",
      "inputs": [],
      "settings": [],
      "collapsed": [{ "name": "loop", "isCollapsed": false }],
      "x": -682,
      "y": 2588,
      "variableGuid": "407730A6-EC96-4337-BE80-CF4C0D552F08",
      "operations": [
        {
          "id": "set_value",
          "key": "1BC10F4C-68C2-42E9-9000-25865B076073",
          "name": "Set value of { variable }",
          "value": "API keys are not enabled on the tenant."
        }
      ]
    },
    {
      "id": "D25BBAB7-8646-46AC-BC9B-D512B163DE2A",
      "type": "VariableBlock",
      "disabled": false,
      "name": "errorDetail",
      "displayName": "Variable - errorDetail",
      "comment": "Variable to store detailed error message.",
      "childId": "2C6FA9CF-3DE8-45CE-B24E-0979C9A78584",
      "inputs": [],
      "settings": [],
      "collapsed": [{ "name": "loop", "isCollapsed": false }],
      "x": -682,
      "y": 2708,
      "variableGuid": "1BF2068B-106E-4D58-BC51-884F1810F03C",
      "operations": [
        {
          "id": "set_value",
          "key": "1BC10F4C-68C2-42E9-9000-25865B076073",
          "name": "Set value of { variable }",
          "value": "Exiting, API keys must be enabled on the tenant to use the monitoring apps since they rely on an API key for the REST data connections used for loading data from Qlik Cloud. Please enable API keys and try again."
        }
      ]
    },
    {
      "id": "2C6FA9CF-3DE8-45CE-B24E-0979C9A78584",
      "type": "GotoBlock",
      "disabled": false,
      "name": "goToLabel9",
      "displayName": "Go To Label 9",
      "comment": "Go to the label named error.",
      "childId": null,
      "inputs": [
        {
          "id": "label",
          "value": "EF82AD29-E2CF-44C9-A7DB-24C784618756",
          "type": "select",
          "displayValue": "error",
          "structure": []
        }
      ],
      "settings": [],
      "collapsed": [{ "name": "loop", "isCollapsed": false }],
      "x": -682,
      "y": 2828
    },
    {
      "id": "60DC4193-EAC7-4353-86C5-C9233AF169EA",
      "type": "VariableBlock",
      "disabled": false,
      "name": "apiKeyDuration",
      "displayName": "Variable - apiKeyDuration",
      "comment": "",
      "childId": "E98AA699-4CAD-416D-81EF-A97EB737FD6C",
      "inputs": [],
      "settings": [],
      "collapsed": [{ "name": "loop", "isCollapsed": false }],
      "x": -802,
      "y": 2308,
      "variableGuid": "51DCB139-A5E7-427D-8E9C-9382DB8A530C",
      "operations": [
        {
          "id": "set_value",
          "key": "F7907433-1824-49AD-AECA-0367D48E77E5",
          "name": "Set value of { variable }",
          "value": "{ $.rawAPIRequest2.max_api_key_expiry }"
        }
      ]
    },
    {
      "id": "7BB23A76-A47D-4859-AE1D-D5532E49031D",
      "type": "CallUrlBlock",
      "disabled": false,
      "name": "callURL2",
      "displayName": "Call URL 2",
      "comment": "Fetch monitoring applications manifest.",
      "childId": "D68D0C47-8D62-4ADC-AC47-553E8E9A05ED",
      "inputs": [
        {
          "id": "url",
          "value": "https://raw.githubusercontent.com/qlik-oss/qlik-cloud-monitoring-apps/main/manifests/resources.json",
          "type": "string",
          "structure": []
        },
        { "id": "method", "value": "GET", "type": "select", "structure": [] },
        { "id": "timeout", "value": "", "type": "string", "structure": [] },
        {
          "id": "params",
          "value": null,
          "type": "object",
          "mode": "keyValue",
          "structure": []
        },
        {
          "id": "headers",
          "value": null,
          "type": "object",
          "mode": "keyValue",
          "structure": []
        },
        { "id": "encoding", "value": "", "type": "string", "structure": [] }
      ],
      "settings": [
        {
          "id": "blendr_on_error",
          "value": "stop",
          "type": "select",
          "structure": []
        },
        {
          "id": "full_response",
          "value": null,
          "type": "checkbox",
          "structure": []
        },
        {
          "id": "capitalize_headers",
          "value": true,
          "type": "checkbox",
          "structure": []
        },
        {
          "id": "automations_censor_data",
          "value": false,
          "type": "checkbox",
          "structure": []
        }
      ],
      "collapsed": [{ "name": "loop", "isCollapsed": false }],
      "x": -802,
      "y": 3268
    },
    {
      "id": "D68D0C47-8D62-4ADC-AC47-553E8E9A05ED",
      "type": "VariableBlock",
      "disabled": false,
      "name": "manifest",
      "displayName": "Variable - manifest",
      "comment": "Store the manifest.",
      "childId": "66C7B574-5D06-4B85-BCEB-A11CBD175283",
      "inputs": [],
      "settings": [],
      "collapsed": [{ "name": "loop", "isCollapsed": false }],
      "x": -802,
      "y": 3388,
      "variableGuid": "4FCFD564-CA0B-4516-AD61-A1A2EE9CF38C",
      "operations": [
        {
          "id": "set",
          "key": "FB81147D-D0D3-4B9B-B21C-AEB7DAE251AD",
          "name": "Set { variable } equal to object ",
          "value": "{$.callURL2}"
        }
      ]
    },
    {
      "id": "9BC2CF3D-A602-4940-A86B-73BA20439C0F",
      "type": "IfElseBlock",
      "disabled": false,
      "name": "condition175",
      "displayName": "Condition 175",
      "comment": "Is this a user-based tenant?",
      "childId": "0BC5D2A0-7566-4F59-BA2B-078480075F4E",
      "inputs": [
        {
          "id": "conditions",
          "value": {
            "mode": "all",
            "conditions": [
              {
                "input1": "{ $.isCapacityTenant }",
                "input2": "0",
                "operator": "="
              }
            ]
          },
          "type": "custom",
          "structure": []
        }
      ],
      "settings": [],
      "collapsed": [
        { "name": "both", "isCollapsed": false },
        { "name": "yes", "isCollapsed": false },
        { "name": "no", "isCollapsed": false }
      ],
      "x": -802,
      "y": 3628,
      "childTrueId": "FBD838AA-F63C-4948-B755-00F8F6F2CDCF",
      "childFalseId": "8968628A-54FC-4578-98FD-32FAE0B1454F"
    },
    {
      "id": "FBD838AA-F63C-4948-B755-00F8F6F2CDCF",
      "type": "FilterListBlock",
      "disabled": false,
      "name": "filterList13",
      "displayName": "Filter List 13",
      "comment": "Filter to just user-supported applications.",
      "childId": null,
      "inputs": [
        {
          "id": "list",
          "value": "{$.manifest}",
          "type": "string",
          "structure": []
        },
        {
          "id": "conditions",
          "value": {
            "mode": "all",
            "conditions": [
              {
                "input1": "subscriptionTypes",
                "input2": "user",
                "operator": "inList"
              },
              {
                "input1": "qcmaInstaller",
                "input2": null,
                "operator": "isTrue"
              }
            ]
          },
          "type": "custom",
          "structure": []
        }
      ],
      "settings": [
        {
          "id": "automations_censor_data",
          "value": false,
          "type": "checkbox",
          "structure": []
        }
      ],
      "collapsed": [{ "name": "loop", "isCollapsed": false }],
      "x": -682,
      "y": 3708,
      "loopBlockId": "D3F1FBD1-BEBC-4148-92AF-528D93FE1B8A"
    },
    {
      "id": "8C37F961-8477-4705-A167-CACE4E579177",
      "type": "VariableBlock",
      "disabled": false,
      "name": "monitoringAppsToInstall",
      "displayName": "Variable - monitoringAppsToInstall",
      "comment": "Add monitoring apps to list.",
      "childId": null,
      "inputs": [],
      "settings": [],
      "collapsed": [{ "name": "loop", "isCollapsed": false }],
      "x": -442,
      "y": 3888,
      "variableGuid": "1ECFDB29-BC7A-4B7A-AE5F-2A2DBE77B1E0",
      "operations": [
        {
          "id": "add_item",
          "key": "5167867F-4931-4E4C-BDBA-28A2270E3E98",
          "name": "Add item to { variable }",
          "value": "{ $.filterList13.item }"
        }
      ]
    },
    {
      "id": "8968628A-54FC-4578-98FD-32FAE0B1454F",
      "type": "FilterListBlock",
      "disabled": false,
      "name": "filterList12",
      "displayName": "Filter List 12",
      "comment": "Filter to just capacity-supported applications.",
      "childId": null,
      "inputs": [
        {
          "id": "list",
          "value": "{$.manifest}",
          "type": "string",
          "structure": []
        },
        {
          "id": "conditions",
          "value": {
            "mode": "all",
            "conditions": [
              {
                "input1": "subscriptionTypes",
                "input2": "capacity",
                "operator": "inList"
              },
              {
                "input1": "qcmaInstaller",
                "input2": null,
                "operator": "isTrue"
              }
            ]
          },
          "type": "custom",
          "structure": []
        }
      ],
      "settings": [
        {
          "id": "automations_censor_data",
          "value": false,
          "type": "checkbox",
          "structure": []
        }
      ],
      "collapsed": [{ "name": "loop", "isCollapsed": false }],
      "x": -682,
      "y": 4168,
      "loopBlockId": "619BAD5D-8B64-4866-9E4B-A6E8108FF386"
    },
    {
      "id": "D5F81616-F18E-481D-8254-DC54513F20A3",
      "type": "VariableBlock",
      "disabled": false,
      "name": "monitoringAppsToInstall",
      "displayName": "Variable - monitoringAppsToInstall",
      "comment": "Add monitoring apps to list.",
      "childId": null,
      "inputs": [],
      "settings": [],
      "collapsed": [{ "name": "loop", "isCollapsed": false }],
      "x": -442,
      "y": 4348,
      "variableGuid": "1ECFDB29-BC7A-4B7A-AE5F-2A2DBE77B1E0",
      "operations": [
        {
          "id": "add_item",
          "key": "EA1F052D-3E48-4CB3-A200-3FE04BFB5F56",
          "name": "Add item to { variable }",
          "value": "{ $.filterList12.item }"
        }
      ]
    },
    {
      "id": "6AB100F2-DB70-49EC-AA91-33C3F4639953",
      "type": "VariableBlock",
      "disabled": false,
      "name": "isCapacityTenant",
      "displayName": "Variable - isCapacityTenant",
      "comment": "Check for presence of \"QLIK SMT\" for capacity tenants.",
      "childId": "F893CB46-17A5-4082-BB7B-5564538B5F8B",
      "inputs": [],
      "settings": [],
      "collapsed": [{ "name": "loop", "isCollapsed": false }],
      "x": -802,
      "y": 1548,
      "variableGuid": "AD716F55-666C-4730-B830-F2D97A502F6B",
      "operations": [
        {
          "id": "set_value",
          "key": "D3F822AC-2E03-45D7-9C6E-7C5CB897D3A1",
          "name": "Set value of { variable }",
          "value": "{ if: { $.getLicenseOverview.product } contain 'QLIK SMT', 1, 0 }"
        }
      ]
    },
    {
      "id": "66C7B574-5D06-4B85-BCEB-A11CBD175283",
      "type": "VariableBlock",
      "disabled": false,
      "name": "monitoringAppsToInstall",
      "displayName": "Variable - monitoringAppsToInstall",
      "comment": "Clear monitoring app list.",
      "childId": "9BC2CF3D-A602-4940-A86B-73BA20439C0F",
      "inputs": [],
      "settings": [],
      "collapsed": [{ "name": "loop", "isCollapsed": false }],
      "x": -802,
      "y": 3508,
      "variableGuid": "1ECFDB29-BC7A-4B7A-AE5F-2A2DBE77B1E0",
      "operations": [
        {
          "id": "empty",
          "key": "422812C6-BD65-40D2-B175-AD2E1BBA5969",
          "name": "Empty { variable }",
          "value": null
        }
      ]
    },
    {
      "id": "2E327220-1609-47A0-8385-6B40E70A7CFB",
      "type": "VariableBlock",
      "disabled": false,
      "name": "configuredMonitoringApps",
      "displayName": "Variable - configuredMonitoringApps",
      "comment": "Configure which monitoring apps to install & maintain. Delete the record to skip installing/updating it. Must be a case sensitive match with the app names in the manifest.",
      "childId": "AABAC2BF-30E8-49FC-982B-52BD9707DAE0",
      "inputs": [],
      "settings": [],
      "collapsed": [{ "name": "loop", "isCollapsed": false }],
      "x": -802,
      "y": -2592,
      "variableGuid": "8E1D15E6-7269-4E6B-A87E-AF56400A2F7A",
      "operations": [
        {
          "id": "add_item",
          "key": "7FB0497F-6787-4032-A558-9F703F088CF4",
          "name": "Add item to { variable }",
          "value": "Access Evaluator"
        },
        {
          "id": "add_item",
          "key": "6716C27F-4A80-44FE-8CEC-DF73FD5FF17A",
          "name": "Add item to { variable }",
          "value": "Answers Analyzer"
        },
        {
          "id": "add_item",
          "key": "E4B393A2-E344-4A32-B6F4-B78C39896B9B",
          "name": "Add item to { variable }",
          "value": "App Analyzer"
        },
        {
          "id": "add_item",
          "key": "350EAF4C-9327-4C1E-BA2F-58C0C043E8E4",
          "name": "Add item to { variable }",
          "value": "Automation Analyzer"
        },
        {
          "id": "add_item",
          "key": "9FC73D37-6D3C-4BCB-B683-D527BB11E438",
          "name": "Add item to { variable }",
          "value": "Entitlement Analyzer"
        },
        {
          "id": "add_item",
          "key": "068D740C-BF98-42FE-AC99-397782586B6D",
          "name": "Add item to { variable }",
          "value": "Reload Analyzer"
        },
        {
          "id": "add_item",
          "key": "DE2D215A-30D2-4D17-956D-27940C0F46DF",
          "name": "Add item to { variable }",
          "value": "Report Analyzer"
        }
      ]
    },
    {
      "id": "D3F1FBD1-BEBC-4148-92AF-528D93FE1B8A",
      "type": "IfElseBlock",
      "disabled": false,
      "name": "condition2",
      "displayName": "Condition 2",
      "comment": "If in configured list.",
      "childId": null,
      "inputs": [
        {
          "id": "conditions",
          "value": {
            "mode": "all",
            "conditions": [
              {
                "input1": "{ $.configuredMonitoringApps }",
                "input2": "{ $.filterList13.item.name }",
                "operator": "inList"
              }
            ]
          },
          "type": "custom",
          "structure": []
        }
      ],
      "settings": [],
      "collapsed": [
        { "name": "both", "isCollapsed": false },
        { "name": "yes", "isCollapsed": false },
        { "name": "no", "isCollapsed": true }
      ],
      "x": -562,
      "y": 3808,
      "childTrueId": "8C37F961-8477-4705-A167-CACE4E579177",
      "childFalseId": null
    },
    {
      "id": "619BAD5D-8B64-4866-9E4B-A6E8108FF386",
      "type": "IfElseBlock",
      "disabled": false,
      "name": "condition19",
      "displayName": "Condition 19",
      "comment": "If in configured list.",
      "childId": null,
      "inputs": [
        {
          "id": "conditions",
          "value": {
            "mode": "all",
            "conditions": [
              {
                "input1": "{ $.configuredMonitoringApps }",
                "input2": "{ $.filterList12.item.name }",
                "operator": "inList"
              }
            ]
          },
          "type": "custom",
          "structure": []
        }
      ],
      "settings": [],
      "collapsed": [
        { "name": "both", "isCollapsed": false },
        { "name": "yes", "isCollapsed": false },
        { "name": "no", "isCollapsed": true }
      ],
      "x": -562,
      "y": 4268,
      "childTrueId": "D5F81616-F18E-481D-8254-DC54513F20A3",
      "childFalseId": null
    },
    {
      "id": "0BC5D2A0-7566-4F59-BA2B-078480075F4E",
      "type": "ShowBlock",
      "disabled": false,
      "name": "output21",
      "displayName": "Output 21",
      "comment": "Status output.",
      "childId": "B67C3598-6171-40D5-87CE-E7CBA1D58E16",
      "inputs": [
        {
          "id": "input",
          "value": "| Confirmed apps in scope | Will load the following monitoring apps based on license & application availability: **{implode: { $.monitoringAppsToInstall[*].name }, ','}** |",
          "type": "string",
          "structure": []
        }
      ],
      "settings": [
        {
          "id": "display_mode",
          "value": "add",
          "type": "select",
          "structure": []
        }
      ],
      "collapsed": [{ "name": "loop", "isCollapsed": false }],
      "x": -802,
      "y": 4628
    },
    {
      "id": "F211A56A-FBCB-4413-BA12-91144F38B722",
      "type": "ShowBlock",
      "disabled": false,
      "name": "output22",
      "displayName": "Output 22",
      "comment": "Status output.",
      "childId": "00B11FD2-3490-4643-B8E8-F03547EB32B3",
      "inputs": [
        {
          "id": "input",
          "value": "| Missing role | User is missing required role `{ $.loop.item }`. Please assign to your user and re-run. |",
          "type": "string",
          "structure": []
        }
      ],
      "settings": [
        {
          "id": "display_mode",
          "value": "add",
          "type": "select",
          "structure": []
        }
      ],
      "collapsed": [{ "name": "loop", "isCollapsed": false }],
      "x": -562,
      "y": 5168
    },
    {
      "id": "B67C3598-6171-40D5-87CE-E7CBA1D58E16",
      "type": "VariableBlock",
      "disabled": false,
      "name": "requiredRoles",
      "displayName": "Variable - requiredRoles",
      "comment": "Collate required roles from monitoringAppsToInstall.",
      "childId": "432F3D61-2AEC-471B-8837-04AB4F56B9DB",
      "inputs": [],
      "settings": [],
      "collapsed": [{ "name": "loop", "isCollapsed": false }],
      "x": -802,
      "y": 4748,
      "variableGuid": "09C608F2-CF67-4C9A-983E-F39019D443B9",
      "operations": [
        {
          "id": "merge",
          "key": "D773C6E0-4087-4487-945D-FCEC9A0C00F9",
          "name": "Merge other list into { variable }",
          "value": "{$.monitoringAppsToInstall[*].requiredRoles[*]}"
        }
      ]
    },
    {
      "id": "F364D449-B628-4325-9617-1B04B7DBFB6A",
      "type": "ForEachBlock",
      "disabled": false,
      "name": "loop",
      "displayName": "Loop",
      "comment": "Loop over required roles.",
      "childId": "E6D1BA8E-24D6-4602-9400-9A74031E1EAB",
      "inputs": [
        {
          "id": "input",
          "value": "{ $.requiredRoles }",
          "type": "string",
          "structure": []
        }
      ],
      "settings": [
        {
          "id": "automations_censor_data",
          "value": false,
          "type": "checkbox",
          "structure": []
        }
      ],
      "collapsed": [{ "name": "loop", "isCollapsed": false }],
      "x": -802,
      "y": 4988,
      "loopBlockId": "7CE340D0-20D9-4B6B-80C0-9295582D1CF9"
    },
    {
      "id": "7CE340D0-20D9-4B6B-80C0-9295582D1CF9",
      "type": "IfElseBlock",
      "disabled": false,
      "name": "condition20",
      "displayName": "Condition 20",
      "comment": "If role isn't assigned.",
      "childId": null,
      "inputs": [
        {
          "id": "conditions",
          "value": {
            "mode": "all",
            "conditions": [
              {
                "input1": "{ $.userRoles[*].name }",
                "input2": "{ $.loop.item }",
                "operator": "notInList"
              }
            ]
          },
          "type": "custom",
          "structure": []
        }
      ],
      "settings": [],
      "collapsed": [
        { "name": "both", "isCollapsed": false },
        { "name": "yes", "isCollapsed": false },
        { "name": "no", "isCollapsed": true }
      ],
      "x": -682,
      "y": 5088,
      "childTrueId": "F211A56A-FBCB-4413-BA12-91144F38B722",
      "childFalseId": null
    },
    {
      "id": "E6D1BA8E-24D6-4602-9400-9A74031E1EAB",
      "type": "IfElseBlock",
      "disabled": false,
      "name": "condition21",
      "displayName": "Condition 21",
      "comment": "If more than one missing role, exit.",
      "childId": "ECCD6D36-805D-44EF-A411-A73316586DD1",
      "inputs": [
        {
          "id": "conditions",
          "value": {
            "mode": "all",
            "conditions": [
              {
                "input1": "{count: { $.missingRoles }}",
                "input2": "0",
                "operator": ">"
              }
            ]
          },
          "type": "custom",
          "structure": []
        }
      ],
      "settings": [],
      "collapsed": [
        { "name": "both", "isCollapsed": false },
        { "name": "yes", "isCollapsed": false },
        { "name": "no", "isCollapsed": false }
      ],
      "x": -802,
      "y": 5528,
      "childTrueId": "EBDE966E-F544-46BF-89EA-FB5A671494B7",
      "childFalseId": null
    },
    {
      "id": "EBDE966E-F544-46BF-89EA-FB5A671494B7",
      "type": "VariableBlock",
      "disabled": false,
      "name": "errorTitle",
      "displayName": "Variable - errorTitle",
      "comment": "API keys are disabled on the tenant, and must be enabled (until TLV-750 implemented).",
      "childId": "D13F1BD0-95CE-4118-B875-7DC61E17AA1E",
      "inputs": [],
      "settings": [],
      "collapsed": [{ "name": "loop", "isCollapsed": false }],
      "x": -682,
      "y": 5608,
      "variableGuid": "407730A6-EC96-4337-BE80-CF4C0D552F08",
      "operations": [
        {
          "id": "set_value",
          "key": "1BC10F4C-68C2-42E9-9000-25865B076073",
          "name": "Set value of { variable }",
          "value": "User is missing required roles: { implode: { $.missingRoles }, ',' }."
        }
      ]
    },
    {
      "id": "D13F1BD0-95CE-4118-B875-7DC61E17AA1E",
      "type": "VariableBlock",
      "disabled": false,
      "name": "errorDetail",
      "displayName": "Variable - errorDetail",
      "comment": "Variable to store detailed error message.",
      "childId": "69F43DAF-28FE-44A5-8D0F-5BF0E066A618",
      "inputs": [],
      "settings": [],
      "collapsed": [{ "name": "loop", "isCollapsed": false }],
      "x": -682,
      "y": 5728,
      "variableGuid": "1BF2068B-106E-4D58-BC51-884F1810F03C",
      "operations": [
        {
          "id": "set_value",
          "key": "1BC10F4C-68C2-42E9-9000-25865B076073",
          "name": "Set value of { variable }",
          "value": "Exiting, user is missing one or more roles required by one of the monitoring apps: `{ implode: { $.missingRoles }, ',' }`. Review the output for the missing role, assign to your user, and try again."
        }
      ]
    },
    {
      "id": "69F43DAF-28FE-44A5-8D0F-5BF0E066A618",
      "type": "GotoBlock",
      "disabled": false,
      "name": "goToLabel10",
      "displayName": "Go To Label 10",
      "comment": "Go to the label named error.",
      "childId": null,
      "inputs": [
        {
          "id": "label",
          "value": "EF82AD29-E2CF-44C9-A7DB-24C784618756",
          "type": "select",
          "displayValue": "error",
          "structure": []
        }
      ],
      "settings": [],
      "collapsed": [{ "name": "loop", "isCollapsed": false }],
      "x": -682,
      "y": 5848
    },
    {
      "id": "ECCD6D36-805D-44EF-A411-A73316586DD1",
      "type": "EndpointBlock",
      "disabled": true,
      "name": "rawAPIRequest3",
      "displayName": "Qlik Cloud Services - Raw API Request 3",
      "comment": "Get REST connector settings. Disabled as not currently supported in QCS connector, but will be in future.",
      "childId": "F718EF32-99B6-49C3-A5A5-6996F86B0B87",
      "inputs": [
        {
          "id": "4add8960-2078-11ec-be2c-7fc55d771fe6",
          "value": "data-sources/rest/settings",
          "type": "string",
          "structure": []
        },
        {
          "id": "3b992a40-2072-11ec-9f0e-ed01586a7e1b",
          "value": "3ba1eed0-2072-11ec-aa67-f118ee53373a",
          "type": "select",
          "displayValue": "GET",
          "structure": []
        },
        {
          "id": "3b8b9090-2072-11ec-8c77-5195fbb0ca65",
          "value": null,
          "type": "object",
          "mode": "keyValue",
          "structure": []
        },
        {
          "id": "993585d0-2839-11ec-b431-df4deed6c1ae",
          "value": null,
          "type": "object",
          "mode": "keyValue",
          "structure": []
        }
      ],
      "settings": [
        {
          "id": "blendr_on_error",
          "value": "stop",
          "type": "select",
          "structure": []
        },
        {
          "id": "automations_censor_data",
          "value": false,
          "type": "checkbox",
          "structure": []
        }
      ],
      "collapsed": [{ "name": "loop", "isCollapsed": false }],
      "x": -802,
      "y": 6048,
      "datasourcetype_guid": "61a87510-c7a3-11ea-95da-0fb0c241e75c",
      "endpoint_guid": "3b75dd80-2072-11ec-9043-3b2aff6123af",
      "endpoint_role": "create"
    },
    {
      "id": "00B11FD2-3490-4643-B8E8-F03547EB32B3",
      "type": "VariableBlock",
      "disabled": false,
      "name": "missingRoles",
      "displayName": "Variable - missingRoles",
      "comment": "Add missing role to list.",
      "childId": null,
      "inputs": [],
      "settings": [],
      "collapsed": [{ "name": "loop", "isCollapsed": false }],
      "x": -562,
      "y": 5288,
      "variableGuid": "CB55538C-0F1A-4871-98DD-C68EC5B00D84",
      "operations": [
        {
          "id": "add_item",
          "key": "9172C800-C9AE-419C-B411-DC1D4D65C8A0",
          "name": "Add item to { variable }",
          "value": "{ $.loop.item }"
        }
      ]
    },
    {
      "id": "432F3D61-2AEC-471B-8837-04AB4F56B9DB",
      "type": "VariableBlock",
      "disabled": false,
      "name": "missingRoles",
      "displayName": "Variable - missingRoles",
      "comment": "Empty missing role list.",
      "childId": "F364D449-B628-4325-9617-1B04B7DBFB6A",
      "inputs": [],
      "settings": [],
      "collapsed": [{ "name": "loop", "isCollapsed": false }],
      "x": -802,
      "y": 4868,
      "variableGuid": "CB55538C-0F1A-4871-98DD-C68EC5B00D84",
      "operations": [
        {
          "id": "empty",
          "key": "0D2CE328-09DF-41C6-9021-02ED68132F13",
          "name": "Empty { variable }",
          "value": null
        }
      ]
    },
    {
      "id": "7151B1C7-58CC-49D0-AE62-51CBB945D6D4",
      "type": "EndpointBlock",
      "disabled": false,
      "name": "listApps",
      "displayName": "Qlik Cloud Services - List Apps",
      "comment": "List apps in managed space.",
      "childId": "E68DA53C-EC7E-4FB7-9D95-FBD9050E0659",
      "inputs": [
        {
          "id": "8cd8db50-107b-11ec-8082-edc45dd151ef",
          "value": null,
          "type": "select",
          "structure": []
        },
        {
          "id": "8ce4fad0-107b-11ec-a6ac-2bd407ad134b",
          "value": "{ $.managedSpaceId }",
          "type": "string",
          "structure": []
        }
      ],
      "settings": [
        {
          "id": "maxitemcount",
          "value": "",
          "type": "string",
          "structure": []
        },
        {
          "id": "blendr_on_error",
          "value": "stop",
          "type": "select",
          "structure": []
        },
        { "id": "cache", "value": "0", "type": "select", "structure": [] },
        {
          "id": "automations_censor_data",
          "value": false,
          "type": "checkbox",
          "structure": []
        }
      ],
      "collapsed": [{ "name": "loop", "isCollapsed": false }],
      "x": -802,
      "y": 15668,
      "loopBlockId": "DAD45F04-D485-42E3-B7DD-D8C3106EA5FC",
      "datasourcetype_guid": "61a87510-c7a3-11ea-95da-0fb0c241e75c",
      "endpoint_guid": "8cc63340-107b-11ec-ab5d-f9b221ed2dc5",
      "endpoint_role": "list"
    },
    {
      "id": "DAD45F04-D485-42E3-B7DD-D8C3106EA5FC",
      "type": "EndpointBlock",
      "disabled": false,
      "name": "rawAPIRequest4",
      "displayName": "Qlik Cloud Services - Raw API Request 4",
      "comment": "Retrieve item so we can get the tags.",
      "childId": "4F40CB60-2782-41D7-BFA4-FF2A709B137F",
      "inputs": [
        {
          "id": "4add8960-2078-11ec-be2c-7fc55d771fe6",
          "value": "items/{ $.listApps.item.itemId }",
          "type": "string",
          "structure": []
        },
        {
          "id": "3b992a40-2072-11ec-9f0e-ed01586a7e1b",
          "value": "3ba1eed0-2072-11ec-aa67-f118ee53373a",
          "type": "select",
          "displayValue": "GET",
          "structure": []
        },
        {
          "id": "3b8b9090-2072-11ec-8c77-5195fbb0ca65",
          "value": null,
          "type": "object",
          "mode": "keyValue",
          "structure": []
        },
        {
          "id": "993585d0-2839-11ec-b431-df4deed6c1ae",
          "value": null,
          "type": "object",
          "mode": "keyValue",
          "structure": []
        }
      ],
      "settings": [
        {
          "id": "blendr_on_error",
          "value": "stop",
          "type": "select",
          "structure": []
        },
        {
          "id": "automations_censor_data",
          "value": false,
          "type": "checkbox",
          "structure": []
        }
      ],
      "collapsed": [{ "name": "loop", "isCollapsed": false }],
      "x": -682,
      "y": 15768,
      "datasourcetype_guid": "61a87510-c7a3-11ea-95da-0fb0c241e75c",
      "endpoint_guid": "3b75dd80-2072-11ec-9043-3b2aff6123af",
      "endpoint_role": "create"
    },
    {
      "id": "D2C679AD-2434-474C-9ACC-B95C8232BA8A",
      "type": "VariableBlock",
      "disabled": false,
      "name": "existingAppList",
      "displayName": "Variable - existingAppList",
      "comment": "Empty app list.",
      "childId": "7151B1C7-58CC-49D0-AE62-51CBB945D6D4",
      "inputs": [],
      "settings": [],
      "collapsed": [{ "name": "loop", "isCollapsed": false }],
      "x": -802,
      "y": 15548,
      "variableGuid": "2E37F6E5-BE30-44ED-B0B6-B544ECEAAB9E",
      "operations": [
        {
          "id": "empty",
          "key": "6B0A6464-4A87-49C7-B4C8-667C17C9CEB9",
          "name": "Empty { variable }",
          "value": null
        }
      ]
    },
    {
      "id": "E68DA53C-EC7E-4FB7-9D95-FBD9050E0659",
      "type": "ForEachBlock",
      "disabled": false,
      "name": "loop2",
      "displayName": "Loop 2",
      "comment": "Loop over list of monitoring apps we want to install.",
      "childId": "9745F8DD-9BEC-4E02-B0B9-B275B8BCFCB1",
      "inputs": [
        {
          "id": "input",
          "value": "{ $.monitoringAppsToInstall }",
          "type": "string",
          "structure": []
        }
      ],
      "settings": [
        {
          "id": "automations_censor_data",
          "value": false,
          "type": "checkbox",
          "structure": []
        }
      ],
      "collapsed": [{ "name": "loop", "isCollapsed": false }],
      "x": -802,
      "y": 16048,
      "loopBlockId": "0DBF0B78-A809-4DDE-B02F-EF043A628D39"
    },
    {
      "id": "FB709E97-66EC-46E2-BFD4-25C11DAA5112",
      "type": "IfElseBlock",
      "disabled": false,
      "name": "condition23",
      "displayName": "Condition 23",
      "comment": "If no app was found, or existing apps need update.",
      "childId": null,
      "inputs": [
        {
          "id": "conditions",
          "value": {
            "mode": "some",
            "conditions": [
              {
                "input1": "{ $.workingAppExists }",
                "input2": "0",
                "operator": "="
              },
              {
                "input1": "{ count: { $.workingAppList } }",
                "input2": "0",
                "operator": ">"
              }
            ]
          },
          "type": "custom",
          "structure": []
        }
      ],
      "settings": [],
      "collapsed": [
        { "name": "both", "isCollapsed": false },
        { "name": "yes", "isCollapsed": false },
        { "name": "no", "isCollapsed": false }
      ],
      "x": -682,
      "y": 18768,
      "childTrueId": "40EC15FE-C25F-442B-8CD9-5C87150436B3",
      "childFalseId": null
    },
    {
      "id": "4F40CB60-2782-41D7-BFA4-FF2A709B137F",
      "type": "VariableBlock",
      "disabled": false,
      "name": "existingAppList",
      "displayName": "Variable - existingAppList",
      "comment": "Add app to applist.",
      "childId": null,
      "inputs": [],
      "settings": [],
      "collapsed": [{ "name": "loop", "isCollapsed": false }],
      "x": -682,
      "y": 15888,
      "variableGuid": "2E37F6E5-BE30-44ED-B0B6-B544ECEAAB9E",
      "operations": [
        {
          "id": "add_item",
          "key": "80C831BF-1F3C-4F48-87A0-60205A2325C0",
          "name": "Add item to { variable }",
          "value": "{ $.rawAPIRequest4 }"
        }
      ]
    },
    {
      "id": "6D0F022E-164E-4CE3-B955-5961AA02A540",
      "type": "ForEachBlock",
      "disabled": false,
      "name": "loop3",
      "displayName": "Loop 3",
      "comment": "Loop over existing apps.",
      "childId": "FB709E97-66EC-46E2-BFD4-25C11DAA5112",
      "inputs": [
        {
          "id": "input",
          "value": "{ $.existingAppList }",
          "type": "string",
          "structure": []
        }
      ],
      "settings": [
        {
          "id": "automations_censor_data",
          "value": false,
          "type": "checkbox",
          "structure": []
        }
      ],
      "collapsed": [{ "name": "loop", "isCollapsed": false }],
      "x": -682,
      "y": 16628,
      "loopBlockId": "98DB8518-4ADC-4A7D-A6F3-47ED68A00425"
    },
    {
      "id": "5BD148B9-BDD1-4C37-8EB3-73641F532BB3",
      "type": "IfElseBlock",
      "disabled": false,
      "name": "condition22",
      "displayName": "Condition 22",
      "comment": "If the apps match, it means we need to check to upgrade it.",
      "childId": null,
      "inputs": [
        {
          "id": "conditions",
          "value": {
            "mode": "all",
            "conditions": [
              {
                "input1": "{ $.loop3.item.meta.tags[*].name }",
                "input2": "{ $.workingAppTagName }",
                "operator": "inList"
              }
            ]
          },
          "type": "custom",
          "structure": []
        }
      ],
      "settings": [],
      "collapsed": [
        { "name": "both", "isCollapsed": false },
        { "name": "yes", "isCollapsed": false },
        { "name": "no", "isCollapsed": false }
      ],
      "x": -562,
      "y": 16848,
      "childTrueId": "0C03554A-88E9-4987-8DA7-2707C33613B5",
      "childFalseId": null
    },
    {
      "id": "0DBF0B78-A809-4DDE-B02F-EF043A628D39",
      "type": "VariableBlock",
      "disabled": false,
      "name": "workingAppList",
      "displayName": "Variable - workingAppList",
      "comment": "Empty the working app list.",
      "childId": "981978BE-431B-4AF5-BD0D-451A3885B024",
      "inputs": [],
      "settings": [],
      "collapsed": [{ "name": "loop", "isCollapsed": false }],
      "x": -682,
      "y": 16148,
      "variableGuid": "B762B4A7-25F9-4764-BECA-D4461377CE04",
      "operations": [
        {
          "id": "empty",
          "key": "7CA93272-5204-449B-845A-AD9E8281F303",
          "name": "Empty { variable }",
          "value": null
        }
      ]
    },
    {
      "id": "5181CCB7-03EB-4C0C-83CC-FD647E7EF358",
      "type": "VariableBlock",
      "disabled": false,
      "name": "workingAppList",
      "displayName": "Variable - workingAppList",
      "comment": "Add app to working list.",
      "childId": "0C14812A-A344-4903-9697-1426DB5C5DFA",
      "inputs": [],
      "settings": [],
      "collapsed": [{ "name": "loop", "isCollapsed": false }],
      "x": -82,
      "y": 17448,
      "variableGuid": "B762B4A7-25F9-4764-BECA-D4461377CE04",
      "operations": [
        {
          "id": "add_item",
          "key": "D99F10CF-AAA9-4B94-A8DF-ABA631F2BA46",
          "name": "Add item to { variable }",
          "value": "{ $.loop3.item }"
        }
      ]
    },
    {
      "id": "1D37B0B5-533A-4C98-8C0C-5D27CA83E613",
      "type": "ShowBlock",
      "disabled": false,
      "name": "output23",
      "displayName": "Output 23",
      "comment": "Status output.",
      "childId": null,
      "inputs": [
        {
          "id": "input",
          "value": "| {$.loop2.item.name} - Verify | Excluding existing app [{$.loop3.item.name}]({$.tenantHostname}sense/app/{$.loop3.item.resourceId}) in [{$.managedSpaceName}]({$.tenantHostname}analytics/catalog?space_filter={$.managedSpaceId}). **Cannot upgrade since it is missing a version tag. This may result in another copy of the app being deployed.** |",
          "type": "string",
          "structure": []
        }
      ],
      "settings": [
        {
          "id": "display_mode",
          "value": "add",
          "type": "select",
          "structure": []
        }
      ],
      "collapsed": [{ "name": "loop", "isCollapsed": false }],
      "x": -322,
      "y": 18408
    },
    {
      "id": "0C03554A-88E9-4987-8DA7-2707C33613B5",
      "type": "FilterListBlock",
      "disabled": false,
      "name": "filterList5",
      "displayName": "Filter List 5",
      "comment": "Attempt to extract the version from tags.",
      "childId": "2D10B51D-A303-4112-95D3-722117C7AAC3",
      "inputs": [
        {
          "id": "list",
          "value": "{ $.loop3.item.meta.tags }",
          "type": "string",
          "structure": []
        },
        {
          "id": "conditions",
          "value": {
            "mode": "all",
            "conditions": [
              { "input1": "name", "input2": "QCMA - v", "operator": "contain" }
            ]
          },
          "type": "custom",
          "structure": []
        }
      ],
      "settings": [
        {
          "id": "automations_censor_data",
          "value": false,
          "type": "checkbox",
          "structure": []
        }
      ],
      "collapsed": [{ "name": "loop", "isCollapsed": false }],
      "x": -442,
      "y": 16928,
      "loopBlockId": null
    },
    {
      "id": "2D10B51D-A303-4112-95D3-722117C7AAC3",
      "type": "IfElseBlock",
      "disabled": false,
      "name": "condition24",
      "displayName": "Condition 24",
      "comment": "If versions were found, continue.",
      "childId": null,
      "inputs": [
        {
          "id": "conditions",
          "value": {
            "mode": "all",
            "conditions": [
              {
                "input1": "{ count: { $.filterList5 } }",
                "input2": "0",
                "operator": ">"
              }
            ]
          },
          "type": "custom",
          "structure": []
        }
      ],
      "settings": [],
      "collapsed": [
        { "name": "both", "isCollapsed": false },
        { "name": "yes", "isCollapsed": false },
        { "name": "no", "isCollapsed": false }
      ],
      "x": -442,
      "y": 17088,
      "childTrueId": "7FC2859A-CB6D-4A81-B1B7-8DA4C1DF9E27",
      "childFalseId": "1D37B0B5-533A-4C98-8C0C-5D27CA83E613"
    },
    {
      "id": "7FC2859A-CB6D-4A81-B1B7-8DA4C1DF9E27",
      "type": "IfElseBlock",
      "disabled": false,
      "name": "condition25",
      "displayName": "Condition 25",
      "comment": "If a single version was found.",
      "childId": null,
      "inputs": [
        {
          "id": "conditions",
          "value": {
            "mode": "all",
            "conditions": [
              {
                "input1": "{ count: { $.filterList5 } }",
                "input2": "1",
                "operator": "="
              }
            ]
          },
          "type": "custom",
          "structure": []
        }
      ],
      "settings": [],
      "collapsed": [
        { "name": "both", "isCollapsed": false },
        { "name": "yes", "isCollapsed": false },
        { "name": "no", "isCollapsed": false }
      ],
      "x": -322,
      "y": 17168,
      "childTrueId": "C1A9C7CC-6DAC-4E03-B987-F44C2C040BF9",
      "childFalseId": "A6B5E4EE-819B-4767-AE9A-2E127BD6DC6C"
    },
    {
      "id": "8A8AB1EE-BE5B-46F6-981A-5ABB5FA348D9",
      "type": "VariableBlock",
      "disabled": false,
      "name": "workingAppTagVersion",
      "displayName": "Variable - workingAppTagVersion",
      "comment": "Set the QMCA tag for version.",
      "childId": "6D0F022E-164E-4CE3-B955-5961AA02A540",
      "inputs": [],
      "settings": [],
      "collapsed": [{ "name": "loop", "isCollapsed": false }],
      "x": -682,
      "y": 16508,
      "variableGuid": "4CFD6FDB-6937-45CE-8677-203A280087D1",
      "operations": [
        {
          "id": "set_value",
          "key": "B91BCBEA-54E0-41DF-81C7-D893EA467F77",
          "name": "Set value of { variable }",
          "value": "QCMA - { $.loop2.item.version }"
        }
      ]
    },
    {
      "id": "6035B77C-4061-44DD-B0B4-BA016EF2F537",
      "type": "VariableBlock",
      "disabled": false,
      "name": "workingAppTagName",
      "displayName": "Variable - workingAppTagName",
      "comment": "Set the QMCA tag for name.",
      "childId": "8A8AB1EE-BE5B-46F6-981A-5ABB5FA348D9",
      "inputs": [],
      "settings": [],
      "collapsed": [{ "name": "loop", "isCollapsed": false }],
      "x": -682,
      "y": 16388,
      "variableGuid": "12A37AC8-CD9C-41FC-9626-508B24997C86",
      "operations": [
        {
          "id": "set_value",
          "key": "B91BCBEA-54E0-41DF-81C7-D893EA467F77",
          "name": "Set value of { variable }",
          "value": "QCMA - { $.loop2.item.name }"
        }
      ]
    },
    {
      "id": "A6B5E4EE-819B-4767-AE9A-2E127BD6DC6C",
      "type": "ShowBlock",
      "disabled": false,
      "name": "output24",
      "displayName": "Output 24",
      "comment": "Status output.",
      "childId": null,
      "inputs": [
        {
          "id": "input",
          "value": "| {$.loop2.item.name} - Verify | Excluding existing app [{$.loop3.item.name}]({$.tenantHostname}sense/app/{$.loop3.item.resourceId}) in [{$.managedSpaceName}]({$.tenantHostname}analytics/catalog?space_filter={$.managedSpaceId}). **Cannot upgrade since it has multiple version tags. This may result in another copy of the app being deployed.** |",
          "type": "string",
          "structure": []
        }
      ],
      "settings": [
        {
          "id": "display_mode",
          "value": "add",
          "type": "select",
          "structure": []
        }
      ],
      "collapsed": [{ "name": "loop", "isCollapsed": false }],
      "x": -202,
      "y": 18168
    },
    {
      "id": "EE2B05F0-E29D-4EF4-8016-AD92050B6D2D",
      "type": "ShowBlock",
      "disabled": false,
      "name": "output25",
      "displayName": "Output 25",
      "comment": "Status output.",
      "childId": "5181CCB7-03EB-4C0C-83CC-FD647E7EF358",
      "inputs": [
        {
          "id": "input",
          "value": "| {$.loop2.item.name} - Verify | Found existing app [{$.loop3.item.name}]({$.tenantHostname}sense/app/{$.loop3.item.resourceId}) in [{$.managedSpaceName}]({$.tenantHostname}analytics/catalog?space_filter={$.managedSpaceId}). **Will be updated from {replace: { $.filterList5[0].name }, 'QCMA - '} to {$.loop2.item.version}.** |",
          "type": "string",
          "structure": []
        }
      ],
      "settings": [
        {
          "id": "display_mode",
          "value": "add",
          "type": "select",
          "structure": []
        }
      ],
      "collapsed": [{ "name": "loop", "isCollapsed": false }],
      "x": -82,
      "y": 17328
    },
    {
      "id": "C1A9C7CC-6DAC-4E03-B987-F44C2C040BF9",
      "type": "IfElseBlock",
      "disabled": false,
      "name": "condition26",
      "displayName": "Condition 26",
      "comment": "Check if redeploy needed. This is done on a plain string comparison.",
      "childId": "F3CCCABB-3F06-47D2-B3A0-E018A8EAD140",
      "inputs": [
        {
          "id": "conditions",
          "value": {
            "mode": "all",
            "conditions": [
              {
                "input1": "{ $.workingAppTagVersion }",
                "input2": "{ $.filterList5[0].name }",
                "operator": "!="
              }
            ]
          },
          "type": "custom",
          "structure": []
        }
      ],
      "settings": [],
      "collapsed": [
        { "name": "both", "isCollapsed": false },
        { "name": "yes", "isCollapsed": false },
        { "name": "no", "isCollapsed": false }
      ],
      "x": -202,
      "y": 17248,
      "childTrueId": "EE2B05F0-E29D-4EF4-8016-AD92050B6D2D",
      "childFalseId": "6E0F226F-5497-4493-9201-8FB2CFE66C25"
    },
    {
      "id": "981978BE-431B-4AF5-BD0D-451A3885B024",
      "type": "VariableBlock",
      "disabled": false,
      "name": "workingAppExists",
      "displayName": "Variable - workingAppExists",
      "comment": "Reset the workingAppExists var, used for determining if there's already an up to date app.",
      "childId": "6035B77C-4061-44DD-B0B4-BA016EF2F537",
      "inputs": [],
      "settings": [],
      "collapsed": [{ "name": "loop", "isCollapsed": false }],
      "x": -682,
      "y": 16268,
      "variableGuid": "D8F8BD27-8FF5-42FF-82ED-0EE947E55327",
      "operations": [
        {
          "id": "set_value",
          "key": "8475B0B8-FEAB-437B-A7D1-3889CBBD80AC",
          "name": "Set value of { variable }",
          "value": "0"
        }
      ]
    },
    {
      "id": "7BE1652F-2F1F-462E-9EAF-12AD879C8340",
      "type": "VariableBlock",
      "disabled": false,
      "name": "workingAppExists",
      "displayName": "Variable - workingAppExists",
      "comment": "Set to 1 to skip new app import.",
      "childId": null,
      "inputs": [],
      "settings": [],
      "collapsed": [{ "name": "loop", "isCollapsed": false }],
      "x": -82,
      "y": 17848,
      "variableGuid": "D8F8BD27-8FF5-42FF-82ED-0EE947E55327",
      "operations": [
        {
          "id": "set_value",
          "key": "8475B0B8-FEAB-437B-A7D1-3889CBBD80AC",
          "name": "Set value of { variable }",
          "value": "1"
        }
      ]
    },
    {
      "id": "6E0F226F-5497-4493-9201-8FB2CFE66C25",
      "type": "ShowBlock",
      "disabled": false,
      "name": "output26",
      "displayName": "Output 26",
      "comment": "Status output.",
      "childId": "7BE1652F-2F1F-462E-9EAF-12AD879C8340",
      "inputs": [
        {
          "id": "input",
          "value": "| {$.loop2.item.name} - Verify | Skipping existing app [{$.loop3.item.name}]({$.tenantHostname}sense/app/{$.loop3.item.resourceId}) in [{$.managedSpaceName}]({$.tenantHostname}analytics/catalog?space_filter={$.managedSpaceId}) as it is already at version {$.loop2.item.version}.  |",
          "type": "string",
          "structure": []
        }
      ],
      "settings": [
        {
          "id": "display_mode",
          "value": "add",
          "type": "select",
          "structure": []
        }
      ],
      "collapsed": [{ "name": "loop", "isCollapsed": false }],
      "x": -82,
      "y": 17728
    },
    {
      "id": "0C14812A-A344-4903-9697-1426DB5C5DFA",
      "type": "VariableBlock",
      "disabled": false,
      "name": "workingAppExists",
      "displayName": "Variable - workingAppExists",
      "comment": "Set to 1 to skip new app import.",
      "childId": null,
      "inputs": [],
      "settings": [],
      "collapsed": [{ "name": "loop", "isCollapsed": false }],
      "x": -82,
      "y": 17568,
      "variableGuid": "D8F8BD27-8FF5-42FF-82ED-0EE947E55327",
      "operations": [
        {
          "id": "set_value",
          "key": "8475B0B8-FEAB-437B-A7D1-3889CBBD80AC",
          "name": "Set value of { variable }",
          "value": "1"
        }
      ]
    },
    {
      "id": "7FF48E4E-FF7E-4BE2-B5E2-5178171BC9CF",
      "type": "ShowBlock",
      "disabled": false,
      "name": "output27",
      "displayName": "Output 27",
      "comment": "Status output.",
      "childId": "4F36612D-0B32-4DA5-9803-85D5EEB3EDCB",
      "inputs": [
        {
          "id": "input",
          "value": "| {$.loop2.item.name} - Prepare | > Pulling and importing version {$.loop2.item.version} of {$.loop2.item.name} from manifest to shared space. |",
          "type": "string",
          "structure": []
        }
      ],
      "settings": [
        {
          "id": "display_mode",
          "value": "add",
          "type": "select",
          "structure": []
        }
      ],
      "collapsed": [{ "name": "loop", "isCollapsed": false }],
      "x": -562,
      "y": 19128
    },
    {
      "id": "4F36612D-0B32-4DA5-9803-85D5EEB3EDCB",
      "type": "CallUrlBlock",
      "disabled": false,
      "name": "callURL3",
      "displayName": "Call URL 3",
      "comment": "Get the qvf.",
      "childId": "9E937365-2524-466B-95E9-309B3293FF8D",
      "inputs": [
        {
          "id": "url",
          "value": "{ $.loop2.item.source }",
          "type": "string",
          "structure": []
        },
        { "id": "method", "value": "GET", "type": "select", "structure": [] },
        { "id": "timeout", "value": "", "type": "string", "structure": [] },
        {
          "id": "params",
          "value": null,
          "type": "object",
          "mode": "keyValue",
          "structure": []
        },
        {
          "id": "headers",
          "value": null,
          "type": "object",
          "mode": "keyValue",
          "structure": []
        },
        { "id": "encoding", "value": "", "type": "string", "structure": [] }
      ],
      "settings": [
        {
          "id": "blendr_on_error",
          "value": "stop",
          "type": "select",
          "structure": []
        },
        {
          "id": "full_response",
          "value": null,
          "type": "checkbox",
          "structure": []
        },
        {
          "id": "capitalize_headers",
          "value": true,
          "type": "checkbox",
          "structure": []
        },
        {
          "id": "automations_censor_data",
          "value": false,
          "type": "checkbox",
          "structure": []
        }
      ],
      "collapsed": [{ "name": "loop", "isCollapsed": false }],
      "x": -562,
      "y": 19248
    },
    {
      "id": "9E937365-2524-466B-95E9-309B3293FF8D",
      "type": "VariableBlock",
      "disabled": false,
      "name": "workingAppBinary",
      "displayName": "Variable - workingAppBinary",
      "comment": "",
      "childId": "8E819B1F-C085-4394-B9FA-537D1A20F440",
      "inputs": [],
      "settings": [],
      "collapsed": [{ "name": "loop", "isCollapsed": false }],
      "x": -562,
      "y": 19368,
      "variableGuid": "996190EC-165A-4CF1-A3B6-363B8F0DDF31",
      "operations": [
        {
          "id": "set_value",
          "key": "DDDC649C-D1BB-490B-B4E1-926F95F3B0C2",
          "name": "Set value of { variable }",
          "value": "{ base64encode: { $.callURL3 } }"
        }
      ]
    },
    {
      "id": "8E819B1F-C085-4394-B9FA-537D1A20F440",
      "type": "EndpointBlock",
      "disabled": false,
      "name": "importAppFromBase64EncodedFile",
      "displayName": "Qlik Cloud Services - Import App From Base 64 Encoded File",
      "comment": "",
      "childId": "B6ED8700-7AB0-4251-9DFF-93B9ACBF7CD3",
      "inputs": [
        {
          "id": "09b520a0-7aa4-11eb-8143-cde65e595ead",
          "value": "{ $.workingAppBinary }",
          "type": "string",
          "structure": []
        },
        {
          "id": "19661000-67b1-11eb-b4c6-fb30d89c586f",
          "value": "{ $.loop2.item.name } - { $.loop2.item.version }",
          "type": "string",
          "structure": []
        },
        {
          "id": "197675a0-67b1-11eb-b6f6-9ff3bc51ddbf",
          "value": "{ $.sharedSpaceId }",
          "type": "string",
          "structure": []
        },
        {
          "id": "4d3a3300-67b1-11eb-99af-3d55175faa9a",
          "value": null,
          "type": "select",
          "structure": []
        },
        {
          "id": "ac4b58f0-67b1-11eb-8126-89d0cf328adb",
          "value": null,
          "type": "string",
          "structure": []
        }
      ],
      "settings": [
        {
          "id": "blendr_on_error",
          "value": "stop",
          "type": "select",
          "structure": []
        },
        {
          "id": "automations_censor_data",
          "value": false,
          "type": "checkbox",
          "structure": []
        }
      ],
      "collapsed": [{ "name": "loop", "isCollapsed": false }],
      "x": -562,
      "y": 19488,
      "datasourcetype_guid": "61a87510-c7a3-11ea-95da-0fb0c241e75c",
      "endpoint_guid": "194b9430-67b1-11eb-9e04-6dbde84bea83",
      "endpoint_role": "create"
    },
    {
      "id": "13CAF0D2-CA0F-41DE-BC1C-1E48738ED4C3",
      "type": "ShowBlock",
      "disabled": false,
      "name": "output28",
      "displayName": "Output 28",
      "comment": "Status output.",
      "childId": "142A4710-D6DC-4919-BE1C-54A699EED20A",
      "inputs": [
        {
          "id": "input",
          "value": "| {$.loop2.item.name} - Import | > Imported version {$.loop2.item.version} of [{ $.importAppFromBase64EncodedFile.attributes.name }]({$.tenantHostname}sense/app/{ $.importAppFromBase64EncodedFile.attributes.id }) to [{$.sharedSpaceName}]({$.tenantHostname}analytics/catalog?space_filter={$.sharedSpaceId}). |",
          "type": "string",
          "structure": []
        }
      ],
      "settings": [
        {
          "id": "display_mode",
          "value": "add",
          "type": "select",
          "structure": []
        }
      ],
      "collapsed": [{ "name": "loop", "isCollapsed": false }],
      "x": -562,
      "y": 19848
    },
    {
      "id": "40EC15FE-C25F-442B-8CD9-5C87150436B3",
      "type": "IfElseBlock",
      "disabled": false,
      "name": "condition27",
      "displayName": "Condition 27",
      "comment": "If new app needed, show notification in the timeline.",
      "childId": "7FF48E4E-FF7E-4BE2-B5E2-5178171BC9CF",
      "inputs": [
        {
          "id": "conditions",
          "value": {
            "mode": "all",
            "conditions": [
              {
                "input1": "{ $.workingAppExists }",
                "input2": "0",
                "operator": "="
              }
            ]
          },
          "type": "custom",
          "structure": []
        }
      ],
      "settings": [],
      "collapsed": [
        { "name": "both", "isCollapsed": false },
        { "name": "yes", "isCollapsed": false },
        { "name": "no", "isCollapsed": false }
      ],
      "x": -562,
      "y": 18848,
      "childTrueId": "BC596D9A-38F8-4F9A-8DC9-1D0DC81A57C4",
      "childFalseId": null
    },
    {
      "id": "BC596D9A-38F8-4F9A-8DC9-1D0DC81A57C4",
      "type": "ShowBlock",
      "disabled": false,
      "name": "output29",
      "displayName": "Output 29",
      "comment": "Status output.",
      "childId": null,
      "inputs": [
        {
          "id": "input",
          "value": "| {$.loop2.item.name} - Verify | The {$.loop2.item.name} was not found in [{$.managedSpaceName}]({$.tenantHostname}analytics/catalog?space_filter={$.managedSpaceId}). **Will be imported.** |",
          "type": "string",
          "structure": []
        }
      ],
      "settings": [
        {
          "id": "display_mode",
          "value": "add",
          "type": "select",
          "structure": []
        }
      ],
      "collapsed": [{ "name": "loop", "isCollapsed": false }],
      "x": -442,
      "y": 18928
    },
    {
      "id": "15A91B88-3C31-400B-A2C8-D697AB8F175E",
      "type": "ShowBlock",
      "disabled": false,
      "name": "output30",
      "displayName": "Output 30",
      "comment": "Status output.",
      "childId": "00332E92-9B25-4849-B799-0A68E5F4931B",
      "inputs": [
        {
          "id": "input",
          "value": "| {$.loop2.item.name} - Publish | > Deployed [{$.loop3.item.name}]({$.tenantHostname}sense/app/{$.publishAppToManagedSpace2.attributes.id}) to [{$.managedSpaceName}]({$.tenantHostname}analytics/catalog?space_filter={$.managedSpaceId}). |",
          "type": "string",
          "structure": []
        }
      ],
      "settings": [
        {
          "id": "display_mode",
          "value": "add",
          "type": "select",
          "structure": []
        }
      ],
      "collapsed": [{ "name": "loop", "isCollapsed": false }],
      "x": -442,
      "y": 22148
    },
    {
      "id": "ECB7B639-F151-4B44-A89E-491B20BE66F3",
      "type": "IfElseBlock",
      "disabled": false,
      "name": "condition28",
      "displayName": "Condition 28",
      "comment": "If new app needed, publish it.",
      "childId": "4BE16981-95D8-4418-B598-B26CA6843820",
      "inputs": [
        {
          "id": "conditions",
          "value": {
            "mode": "all",
            "conditions": [
              {
                "input1": "{ $.workingAppExists }",
                "input2": "0",
                "operator": "="
              }
            ]
          },
          "type": "custom",
          "structure": []
        }
      ],
      "settings": [],
      "collapsed": [
        { "name": "both", "isCollapsed": false },
        { "name": "yes", "isCollapsed": false },
        { "name": "no", "isCollapsed": false }
      ],
      "x": -562,
      "y": 21828,
      "childTrueId": "35EFB375-D90C-4F76-A966-47EDB1EAFAD2",
      "childFalseId": "9EE0A5EF-EE84-4F46-811E-312073C232C6"
    },
    {
      "id": "35EFB375-D90C-4F76-A966-47EDB1EAFAD2",
      "type": "SnippetBlock",
      "disabled": false,
      "name": "publishAppToManagedSpace2",
      "displayName": "Qlik Cloud Services - Publish App To Managed Space 2",
      "comment": "",
      "childId": "F8D411D5-6606-4BC1-BA09-2A24611D4B6A",
      "inputs": [
        {
          "id": "a0ab6dc0-00e2-11ec-92c0-fb834a93ff56",
          "value": "{ $.importAppFromBase64EncodedFile.attributes.id }",
          "type": "string",
          "structure": []
        },
        {
          "id": "a0ad09d0-00e2-11ec-b2c8-8587b72a110a",
          "value": "{ $.managedSpaceId }",
          "type": "string",
          "structure": []
        },
        {
          "id": "a0ad4d20-00e2-11ec-8cad-07ca8dd4b022",
          "value": "source",
          "type": "select",
          "displayValue": "source",
          "structure": []
        },
        {
          "id": "03f6be80-22bf-11ec-bd94-cfe02119d15e",
          "value": "Always publish",
          "type": "select",
          "displayValue": "Always publish",
          "structure": []
        },
        {
          "id": "e5b375a0-83ec-11ec-83cd-6d152b88c9ae",
          "value": "{ $.loop2.item.name }",
          "type": "string",
          "structure": []
        },
        {
          "id": "e5b45230-83ec-11ec-8c07-d9449d54e6ff",
          "value": null,
          "type": "string",
          "structure": []
        }
      ],
      "settings": [
        {
          "id": "blendr_on_error",
          "value": "stop",
          "type": "select",
          "structure": []
        },
        {
          "id": "automations_censor_data",
          "value": false,
          "type": "checkbox",
          "structure": []
        }
      ],
      "collapsed": [{ "name": "loop", "isCollapsed": false }],
      "x": -442,
      "y": 21908,
      "datasourcetype_guid": "61a87510-c7a3-11ea-95da-0fb0c241e75c",
      "snippet_guid": "76a45090-00e1-11ec-ad85-b3b86b5b9a24"
    },
    {
      "id": "FF63005B-73C8-4593-8609-AC99855C7167",
      "type": "EndpointBlock",
      "disabled": false,
      "name": "rawAPIRequest17",
      "displayName": "Qlik Cloud Services - Raw API Request 17",
      "comment": "Get item ID of app",
      "childId": "13CAF0D2-CA0F-41DE-BC1C-1E48738ED4C3",
      "inputs": [
        {
          "id": "4add8960-2078-11ec-be2c-7fc55d771fe6",
          "value": "items",
          "type": "string",
          "structure": []
        },
        {
          "id": "3b992a40-2072-11ec-9f0e-ed01586a7e1b",
          "value": "3ba1eed0-2072-11ec-aa67-f118ee53373a",
          "type": "select",
          "displayValue": "GET",
          "structure": []
        },
        {
          "id": "3b8b9090-2072-11ec-8c77-5195fbb0ca65",
          "value": null,
          "type": "object",
          "mode": "keyValue",
          "structure": []
        },
        {
          "id": "993585d0-2839-11ec-b431-df4deed6c1ae",
          "value": [
            {
              "key": "resourceId",
              "value": "{$.importAppFromBase64EncodedFile.attributes.id}"
            },
            { "key": "resourceType", "value": "app" }
          ],
          "type": "object",
          "mode": "keyValue",
          "structure": []
        }
      ],
      "settings": [
        {
          "id": "blendr_on_error",
          "value": "stop",
          "type": "select",
          "structure": []
        },
        {
          "id": "automations_censor_data",
          "value": false,
          "type": "checkbox",
          "structure": []
        }
      ],
      "collapsed": [{ "name": "loop", "isCollapsed": false }],
      "x": -562,
      "y": 19728,
      "datasourcetype_guid": "61a87510-c7a3-11ea-95da-0fb0c241e75c",
      "endpoint_guid": "3b75dd80-2072-11ec-9043-3b2aff6123af",
      "endpoint_role": "create"
    },
    {
      "id": "B6ED8700-7AB0-4251-9DFF-93B9ACBF7CD3",
      "type": "SleepBlock",
      "disabled": false,
      "name": "sleep3",
      "displayName": "Sleep 3",
      "comment": "Wait for items to be aware of app.",
      "childId": "FF63005B-73C8-4593-8609-AC99855C7167",
      "inputs": [
        { "id": "time", "value": "5", "type": "string", "structure": [] }
      ],
      "settings": [],
      "collapsed": [{ "name": "loop", "isCollapsed": false }],
      "x": -562,
      "y": 19608
    },
    {
      "id": "9F37EC62-2694-40D2-8DB1-7F5265D9EB9F",
      "type": "VariableBlock",
      "disabled": false,
      "name": "workingAppTags",
      "displayName": "Variable - workingAppTags",
      "comment": "Create object for assigning tags.",
      "childId": "22D8A6B4-A055-40DE-BA67-0638D6005250",
      "inputs": [],
      "settings": [],
      "collapsed": [{ "name": "loop", "isCollapsed": false }],
      "x": -562,
      "y": 20448,
      "variableGuid": "AE6C347F-BAAD-4FD0-A820-80AFEE588B29",
      "operations": [
        {
          "id": "empty",
          "key": "D2338734-D49E-498C-A550-01B971BAC5C1",
          "name": "Empty { variable }",
          "value": null
        },
        {
          "id": "set_key_value",
          "key": "4FFB7E92-7F6F-4A27-ADA6-FBC6DF13C3B3",
          "name": "Set key/values of { variable }",
          "value": [
            { "key": "appTag", "value": "{ $.workingAppTagName }" },
            { "key": "versionTag", "value": "{ $.workingAppTagVersion }" }
          ]
        }
      ]
    },
    {
      "id": "22D8A6B4-A055-40DE-BA67-0638D6005250",
      "type": "ForEachBlock",
      "disabled": false,
      "name": "loop4",
      "displayName": "Loop 4",
      "comment": "Loop over tags.",
      "childId": "ECB7B639-F151-4B44-A89E-491B20BE66F3",
      "inputs": [
        {
          "id": "input",
          "value": "{ $.workingAppTags }",
          "type": "string",
          "structure": []
        }
      ],
      "settings": [
        {
          "id": "automations_censor_data",
          "value": false,
          "type": "checkbox",
          "structure": []
        }
      ],
      "collapsed": [{ "name": "loop", "isCollapsed": false }],
      "x": -562,
      "y": 20568,
      "loopBlockId": "AFD7305E-B419-4128-95D3-1A9EAF98F9C8"
    },
    {
      "id": "AFD7305E-B419-4128-95D3-1A9EAF98F9C8",
      "type": "EndpointBlock",
      "disabled": false,
      "name": "rawAPIRequest18",
      "displayName": "Qlik Cloud Services - Raw API Request 18",
      "comment": "Check if tag exists.",
      "childId": "487F3340-7989-4675-9B60-AE93E556E5CD",
      "inputs": [
        {
          "id": "4add8960-2078-11ec-be2c-7fc55d771fe6",
          "value": "collections",
          "type": "string",
          "structure": []
        },
        {
          "id": "3b992a40-2072-11ec-9f0e-ed01586a7e1b",
          "value": "3ba1eed0-2072-11ec-aa67-f118ee53373a",
          "type": "select",
          "displayValue": "GET",
          "structure": []
        },
        {
          "id": "3b8b9090-2072-11ec-8c77-5195fbb0ca65",
          "value": null,
          "type": "object",
          "mode": "keyValue",
          "structure": []
        },
        {
          "id": "993585d0-2839-11ec-b431-df4deed6c1ae",
          "value": [
            { "key": "name", "value": "{ $.loop4.item }" },
            { "key": "type", "value": "public" }
          ],
          "type": "object",
          "mode": "keyValue",
          "structure": []
        }
      ],
      "settings": [
        {
          "id": "blendr_on_error",
          "value": "stop",
          "type": "select",
          "structure": []
        },
        {
          "id": "automations_censor_data",
          "value": false,
          "type": "checkbox",
          "structure": []
        }
      ],
      "collapsed": [{ "name": "loop", "isCollapsed": false }],
      "x": -442,
      "y": 20668,
      "datasourcetype_guid": "61a87510-c7a3-11ea-95da-0fb0c241e75c",
      "endpoint_guid": "3b75dd80-2072-11ec-9043-3b2aff6123af",
      "endpoint_role": "create"
    },
    {
      "id": "487F3340-7989-4675-9B60-AE93E556E5CD",
      "type": "IfElseBlock",
      "disabled": false,
      "name": "condition82",
      "displayName": "Condition 82",
      "comment": "Check if tag exists",
      "childId": "B8418877-08D1-44AE-BCD4-B5FBA442AFDC",
      "inputs": [
        {
          "id": "conditions",
          "value": {
            "mode": "all",
            "conditions": [
              {
                "input1": "{count: {$.rawAPIRequest18.data}}",
                "input2": "0",
                "operator": ">"
              }
            ]
          },
          "type": "custom",
          "structure": []
        }
      ],
      "settings": [],
      "collapsed": [
        { "name": "both", "isCollapsed": false },
        { "name": "yes", "isCollapsed": false },
        { "name": "no", "isCollapsed": false }
      ],
      "x": -442,
      "y": 20788,
      "childTrueId": "814E1A6D-6BCB-47DD-BD1D-39EC0CA9C101",
      "childFalseId": "4DA2DA61-2BB9-41DB-B354-3A2B8C5F2F2E"
    },
    {
      "id": "B8418877-08D1-44AE-BCD4-B5FBA442AFDC",
      "type": "EndpointBlock",
      "disabled": false,
      "name": "rawAPIRequest19",
      "displayName": "Qlik Cloud Services - Raw API Request 19",
      "comment": "Add the tag to the item.",
      "childId": "E3272B0B-EA20-485E-BAF3-E24EDF5D1931",
      "inputs": [
        {
          "id": "4add8960-2078-11ec-be2c-7fc55d771fe6",
          "value": "collections/{ $.taggerIds.{ $.loop4.index } }/items",
          "type": "string",
          "structure": []
        },
        {
          "id": "3b992a40-2072-11ec-9f0e-ed01586a7e1b",
          "value": "d8056ca0-2072-11ec-b110-cbae7b0a483b",
          "type": "select",
          "displayValue": "POST",
          "structure": []
        },
        {
          "id": "3b8b9090-2072-11ec-8c77-5195fbb0ca65",
          "value": "{\n  \"id\": \"{ $.rawAPIRequest17.data[0].id }\"\n}",
          "type": "object",
          "mode": "raw",
          "structure": []
        },
        {
          "id": "993585d0-2839-11ec-b431-df4deed6c1ae",
          "value": null,
          "type": "object",
          "mode": "keyValue",
          "structure": []
        }
      ],
      "settings": [
        {
          "id": "blendr_on_error",
          "value": "stop",
          "type": "select",
          "structure": []
        },
        {
          "id": "automations_censor_data",
          "value": false,
          "type": "checkbox",
          "structure": []
        }
      ],
      "collapsed": [{ "name": "loop", "isCollapsed": false }],
      "x": -442,
      "y": 21548,
      "datasourcetype_guid": "61a87510-c7a3-11ea-95da-0fb0c241e75c",
      "endpoint_guid": "3b75dd80-2072-11ec-9043-3b2aff6123af",
      "endpoint_role": "create"
    },
    {
      "id": "E3272B0B-EA20-485E-BAF3-E24EDF5D1931",
      "type": "ShowBlock",
      "disabled": false,
      "name": "output66",
      "displayName": "Output 66",
      "comment": "Tag added.",
      "childId": null,
      "inputs": [
        {
          "id": "input",
          "value": "| {$.loop2.item.name} - Tags (shared) | > Tag `{$.loop4.item}` added to shared space app. |",
          "type": "string",
          "structure": []
        }
      ],
      "settings": [
        {
          "id": "display_mode",
          "value": "add",
          "type": "select",
          "structure": []
        }
      ],
      "collapsed": [{ "name": "loop", "isCollapsed": false }],
      "x": -442,
      "y": 21668
    },
    {
      "id": "814E1A6D-6BCB-47DD-BD1D-39EC0CA9C101",
      "type": "ShowBlock",
      "disabled": false,
      "name": "output61",
      "displayName": "Output 61",
      "comment": "Tag exists.",
      "childId": "E287D197-83E3-4C50-8598-34DDB03BD857",
      "inputs": [
        {
          "id": "input",
          "value": "| {$.loop2.item.name} - Tags | > Tag `{$.loop4.item}` exists. |",
          "type": "string",
          "structure": []
        }
      ],
      "settings": [
        {
          "id": "display_mode",
          "value": "add",
          "type": "select",
          "structure": []
        }
      ],
      "collapsed": [{ "name": "loop", "isCollapsed": false }],
      "x": -322,
      "y": 20868
    },
    {
      "id": "E287D197-83E3-4C50-8598-34DDB03BD857",
      "type": "VariableBlock",
      "disabled": false,
      "name": "taggerIds",
      "displayName": "Variable - taggerIds",
      "comment": "Store the tag ID.",
      "childId": null,
      "inputs": [],
      "settings": [],
      "collapsed": [{ "name": "loop", "isCollapsed": false }],
      "x": -322,
      "y": 20988,
      "variableGuid": "FA7C823B-3AA8-41EA-990F-21837758447A",
      "operations": [
        {
          "id": "set_key_value",
          "key": "4C765E64-0A7C-4AFC-8301-E428E0E60E9B",
          "name": "Set key/values of { variable }",
          "value": [
            {
              "key": "{ $.loop4.index }",
              "value": "{$.rawAPIRequest18.data[0].id}"
            }
          ]
        }
      ]
    },
    {
      "id": "984029CA-4EC0-4912-880A-0FA2010E9747",
      "type": "ShowBlock",
      "disabled": false,
      "name": "output62",
      "displayName": "Output 62",
      "comment": "Create tag.",
      "childId": "240DE4BD-65CF-4B9F-BAEA-D6469B83CB50",
      "inputs": [
        {
          "id": "input",
          "value": "| {$.loop2.item.name} - Tags | > Tag does not exist. Created tag `{$.loop.item}`. |",
          "type": "string",
          "structure": []
        }
      ],
      "settings": [
        {
          "id": "display_mode",
          "value": "add",
          "type": "select",
          "structure": []
        }
      ],
      "collapsed": [{ "name": "loop", "isCollapsed": false }],
      "x": -322,
      "y": 21268
    },
    {
      "id": "4DA2DA61-2BB9-41DB-B354-3A2B8C5F2F2E",
      "type": "EndpointBlock",
      "disabled": false,
      "name": "rawAPIRequest16",
      "displayName": "Qlik Cloud Services - Raw API Request 16",
      "comment": "Create new collection",
      "childId": "984029CA-4EC0-4912-880A-0FA2010E9747",
      "inputs": [
        {
          "id": "4add8960-2078-11ec-be2c-7fc55d771fe6",
          "value": "collections",
          "type": "string",
          "structure": []
        },
        {
          "id": "3b992a40-2072-11ec-9f0e-ed01586a7e1b",
          "value": "d8056ca0-2072-11ec-b110-cbae7b0a483b",
          "type": "select",
          "displayValue": "POST",
          "structure": []
        },
        {
          "id": "3b8b9090-2072-11ec-8c77-5195fbb0ca65",
          "value": "{\"type\":\"public\",\"name\":\"{ $.loop.item }\"}",
          "type": "object",
          "mode": "raw",
          "structure": []
        },
        {
          "id": "993585d0-2839-11ec-b431-df4deed6c1ae",
          "value": null,
          "type": "object",
          "mode": "keyValue",
          "structure": []
        }
      ],
      "settings": [
        {
          "id": "blendr_on_error",
          "value": "stop",
          "type": "select",
          "structure": []
        },
        {
          "id": "automations_censor_data",
          "value": false,
          "type": "checkbox",
          "structure": []
        }
      ],
      "collapsed": [{ "name": "loop", "isCollapsed": false }],
      "x": -322,
      "y": 21148,
      "datasourcetype_guid": "61a87510-c7a3-11ea-95da-0fb0c241e75c",
      "endpoint_guid": "3b75dd80-2072-11ec-9043-3b2aff6123af",
      "endpoint_role": "create"
    },
    {
      "id": "240DE4BD-65CF-4B9F-BAEA-D6469B83CB50",
      "type": "VariableBlock",
      "disabled": false,
      "name": "taggerIds",
      "displayName": "Variable - taggerIds",
      "comment": "Store the tag ID.",
      "childId": null,
      "inputs": [],
      "settings": [],
      "collapsed": [{ "name": "loop", "isCollapsed": false }],
      "x": -322,
      "y": 21388,
      "variableGuid": "FA7C823B-3AA8-41EA-990F-21837758447A",
      "operations": [
        {
          "id": "set_key_value",
          "key": "4C765E64-0A7C-4AFC-8301-E428E0E60E9B",
          "name": "Set key/values of { variable }",
          "value": [
            { "key": "{ $.loop4.index }", "value": "{ $.rawAPIRequest16.id }" }
          ]
        }
      ]
    },
    {
      "id": "142A4710-D6DC-4919-BE1C-54A699EED20A",
      "type": "ShowBlock",
      "disabled": false,
      "name": "output31",
      "displayName": "Output 31",
      "comment": "Altering load script.",
      "childId": "73B15F09-DCC3-43F4-8DCB-9ACE58E3FACF",
      "inputs": [
        {
          "id": "input",
          "value": "| {$.loop2.item.name} - Load script | > Modifying the load script of the source app so that it can be reloaded using the 'monitoring_apps_REST' data connection within the managed space. |",
          "type": "string",
          "structure": []
        }
      ],
      "settings": [
        {
          "id": "display_mode",
          "value": "add",
          "type": "select",
          "structure": []
        }
      ],
      "collapsed": [{ "name": "loop", "isCollapsed": false }],
      "x": -562,
      "y": 19968
    },
    {
      "id": "73B15F09-DCC3-43F4-8DCB-9ACE58E3FACF",
      "type": "SnippetBlock",
      "disabled": false,
      "name": "GetLoadScript",
      "displayName": "Qlik Cloud Services - Get Load Script",
      "comment": "Get the load script.",
      "childId": "2A346057-D71F-4D36-87AA-DA1A1EEC1DA0",
      "inputs": [
        {
          "id": "299dd6e0-7535-11eb-a1b1-8108a69d86b2",
          "value": "{$.importAppFromBase64EncodedFile.attributes.id}",
          "type": "string",
          "structure": []
        }
      ],
      "settings": [
        {
          "id": "blendr_on_error",
          "value": "stop",
          "type": "select",
          "structure": []
        },
        {
          "id": "automations_censor_data",
          "value": false,
          "type": "checkbox",
          "structure": []
        }
      ],
      "collapsed": [{ "name": "loop", "isCollapsed": false }],
      "x": -562,
      "y": 20088,
      "datasourcetype_guid": "61a87510-c7a3-11ea-95da-0fb0c241e75c",
      "snippet_guid": "8d2f7da0-5028-11eb-8889-317a6c8ea7fc"
    },
    {
      "id": "2A346057-D71F-4D36-87AA-DA1A1EEC1DA0",
      "type": "EndpointBlock",
      "disabled": false,
      "name": "setLoadScript",
      "displayName": "Qlik Cloud Services - Set Load Script",
      "comment": "Modify vu_rest_connection to point to the managed space.",
      "childId": "36997A20-8F70-47D6-88BD-91AC1E0DB2E1",
      "inputs": [
        {
          "id": "917b8660-a12b-11ed-873f-fd156b9f0ebb",
          "value": "{$.importAppFromBase64EncodedFile.attributes.id}",
          "type": "string",
          "structure": []
        },
        {
          "id": "d31e0400-a12c-11ed-b43b-29c58fb1f869",
          "value": "{replace: {$.GetLoadScript.qScript}, \"':{ $.dataConnectionName }'\", {if: {textlength: {regexparse: '{$.managedSpaceName}', \"(')\"}} > 0, `{ $.managedSpaceName }:{ $.dataConnectionName }`, \"'{ $.managedSpaceName }:monitoring_apps_REST'\"}}",
          "type": "string",
          "structure": []
        },
        {
          "id": "0da08560-a12d-11ed-92bf-6146d9e01e80",
          "value": "Updated REST connector reference to point to managed space.",
          "type": "string",
          "structure": []
        }
      ],
      "settings": [
        {
          "id": "blendr_on_error",
          "value": "stop",
          "type": "select",
          "structure": []
        },
        {
          "id": "automations_censor_data",
          "value": false,
          "type": "checkbox",
          "structure": []
        }
      ],
      "collapsed": [{ "name": "loop", "isCollapsed": false }],
      "x": -562,
      "y": 20208,
      "datasourcetype_guid": "61a87510-c7a3-11ea-95da-0fb0c241e75c",
      "endpoint_guid": "916661a0-a12b-11ed-882f-fb01a4e99b0a",
      "endpoint_role": "create"
    },
    {
      "id": "36997A20-8F70-47D6-88BD-91AC1E0DB2E1",
      "type": "ShowBlock",
      "disabled": false,
      "name": "output32",
      "displayName": "Output 32",
      "comment": "Load script updated.",
      "childId": "9F37EC62-2694-40D2-8DB1-7F5265D9EB9F",
      "inputs": [
        {
          "id": "input",
          "value": "| {$.loop2.item.name} - Load script | > Load script updated. |",
          "type": "string",
          "structure": []
        }
      ],
      "settings": [
        {
          "id": "display_mode",
          "value": "add",
          "type": "select",
          "structure": []
        }
      ],
      "collapsed": [{ "name": "loop", "isCollapsed": false }],
      "x": -562,
      "y": 20328
    },
    {
      "id": "9EE0A5EF-EE84-4F46-811E-312073C232C6",
      "type": "ForEachBlock",
      "disabled": false,
      "name": "loop5",
      "displayName": "Loop 5",
      "comment": "Loop over existing apps to update them.",
      "childId": null,
      "inputs": [
        {
          "id": "input",
          "value": "{ $.workingAppList }",
          "type": "string",
          "structure": []
        }
      ],
      "settings": [
        {
          "id": "automations_censor_data",
          "value": false,
          "type": "checkbox",
          "structure": []
        }
      ],
      "collapsed": [{ "name": "loop", "isCollapsed": false }],
      "x": -442,
      "y": 22928,
      "loopBlockId": "0D70200F-BF52-4CCD-8FB5-C81C9692D24B"
    },
    {
      "id": "75038005-FF42-4CA7-B4C9-0CA9EE70631D",
      "type": "EndpointBlock",
      "disabled": false,
      "name": "rawAPIRequest20",
      "displayName": "Qlik Cloud Services - Raw API Request 20",
      "comment": "Add the tag to the item.",
      "childId": "9A5AE6AA-1CF8-4CD9-BD5B-1522FBC107EF",
      "inputs": [
        {
          "id": "4add8960-2078-11ec-be2c-7fc55d771fe6",
          "value": "collections/{$.loop6.item}/items",
          "type": "string",
          "structure": []
        },
        {
          "id": "3b992a40-2072-11ec-9f0e-ed01586a7e1b",
          "value": "d8056ca0-2072-11ec-b110-cbae7b0a483b",
          "type": "select",
          "displayValue": "POST",
          "structure": []
        },
        {
          "id": "3b8b9090-2072-11ec-8c77-5195fbb0ca65",
          "value": "{\n  \"id\": \"{ $.rawAPIRequest21.data[0].id }\"\n}",
          "type": "object",
          "mode": "raw",
          "structure": []
        },
        {
          "id": "993585d0-2839-11ec-b431-df4deed6c1ae",
          "value": null,
          "type": "object",
          "mode": "keyValue",
          "structure": []
        }
      ],
      "settings": [
        {
          "id": "blendr_on_error",
          "value": "stop",
          "type": "select",
          "structure": []
        },
        {
          "id": "automations_censor_data",
          "value": false,
          "type": "checkbox",
          "structure": []
        }
      ],
      "collapsed": [{ "name": "loop", "isCollapsed": false }],
      "x": -322,
      "y": 22608,
      "datasourcetype_guid": "61a87510-c7a3-11ea-95da-0fb0c241e75c",
      "endpoint_guid": "3b75dd80-2072-11ec-9043-3b2aff6123af",
      "endpoint_role": "create"
    },
    {
      "id": "9A5AE6AA-1CF8-4CD9-BD5B-1522FBC107EF",
      "type": "ShowBlock",
      "disabled": false,
      "name": "output67",
      "displayName": "Output 67",
      "comment": "Tag added.",
      "childId": null,
      "inputs": [
        {
          "id": "input",
          "value": "| {$.loop2.item.name} - Tags (managed) | > Tag `{$.loop6.index}` added to new managed space app. |",
          "type": "string",
          "structure": []
        }
      ],
      "settings": [
        {
          "id": "display_mode",
          "value": "add",
          "type": "select",
          "structure": []
        }
      ],
      "collapsed": [{ "name": "loop", "isCollapsed": false }],
      "x": -322,
      "y": 22728
    },
    {
      "id": "292F6681-A0A3-4149-8900-B146F799C502",
      "type": "ForEachBlock",
      "disabled": false,
      "name": "loop6",
      "displayName": "Loop 6",
      "comment": "",
      "childId": null,
      "inputs": [
        {
          "id": "input",
          "value": "{ $.taggerIds }",
          "type": "string",
          "structure": []
        }
      ],
      "settings": [
        {
          "id": "automations_censor_data",
          "value": false,
          "type": "checkbox",
          "structure": []
        }
      ],
      "collapsed": [{ "name": "loop", "isCollapsed": false }],
      "x": -442,
      "y": 22508,
      "loopBlockId": "75038005-FF42-4CA7-B4C9-0CA9EE70631D"
    },
    {
      "id": "00332E92-9B25-4849-B799-0A68E5F4931B",
      "type": "SleepBlock",
      "disabled": false,
      "name": "sleep",
      "displayName": "Sleep",
      "comment": "Wait for items to get publish notification.",
      "childId": "D39D8A7B-718C-46EC-B3F1-24E2A2BF5185",
      "inputs": [
        { "id": "time", "value": "5", "type": "string", "structure": [] }
      ],
      "settings": [],
      "collapsed": [{ "name": "loop", "isCollapsed": false }],
      "x": -442,
      "y": 22268
    },
    {
      "id": "D39D8A7B-718C-46EC-B3F1-24E2A2BF5185",
      "type": "EndpointBlock",
      "disabled": false,
      "name": "rawAPIRequest21",
      "displayName": "Qlik Cloud Services - Raw API Request 21",
      "comment": "Get item ID of app",
      "childId": "292F6681-A0A3-4149-8900-B146F799C502",
      "inputs": [
        {
          "id": "4add8960-2078-11ec-be2c-7fc55d771fe6",
          "value": "items",
          "type": "string",
          "structure": []
        },
        {
          "id": "3b992a40-2072-11ec-9f0e-ed01586a7e1b",
          "value": "3ba1eed0-2072-11ec-aa67-f118ee53373a",
          "type": "select",
          "displayValue": "GET",
          "structure": []
        },
        {
          "id": "3b8b9090-2072-11ec-8c77-5195fbb0ca65",
          "value": null,
          "type": "object",
          "mode": "keyValue",
          "structure": []
        },
        {
          "id": "993585d0-2839-11ec-b431-df4deed6c1ae",
          "value": [
            {
              "key": "resourceId",
              "value": "{ $.publishAppToManagedSpace2.attributes.id }"
            },
            { "key": "resourceType", "value": "app" }
          ],
          "type": "object",
          "mode": "keyValue",
          "structure": []
        }
      ],
      "settings": [
        {
          "id": "blendr_on_error",
          "value": "stop",
          "type": "select",
          "structure": []
        },
        {
          "id": "automations_censor_data",
          "value": false,
          "type": "checkbox",
          "structure": []
        }
      ],
      "collapsed": [{ "name": "loop", "isCollapsed": false }],
      "x": -442,
      "y": 22388,
      "datasourcetype_guid": "61a87510-c7a3-11ea-95da-0fb0c241e75c",
      "endpoint_guid": "3b75dd80-2072-11ec-9043-3b2aff6123af",
      "endpoint_role": "create"
    },
    {
      "id": "F8D411D5-6606-4BC1-BA09-2A24611D4B6A",
      "type": "VariableBlock",
      "disabled": false,
      "name": "liveApps",
      "displayName": "Variable - liveApps",
      "comment": "Add app to live apps.",
      "childId": "15A91B88-3C31-400B-A2C8-D697AB8F175E",
      "inputs": [],
      "settings": [],
      "collapsed": [{ "name": "loop", "isCollapsed": false }],
      "x": -442,
      "y": 22028,
      "variableGuid": "A812E467-95BC-419E-B6A6-4341D6347C3A",
      "operations": [
        {
          "id": "add_item",
          "key": "D4AA6196-E54F-4E05-9292-ABBD3AAADBC6",
          "name": "Add item to { variable }",
          "value": "{ $.publishAppToManagedSpace2 }"
        }
      ]
    },
    {
      "id": "F3CCCABB-3F06-47D2-B3A0-E018A8EAD140",
      "type": "VariableBlock",
      "disabled": false,
      "name": "liveApps",
      "displayName": "Variable - liveApps",
      "comment": "Add app to live apps.",
      "childId": null,
      "inputs": [],
      "settings": [],
      "collapsed": [{ "name": "loop", "isCollapsed": false }],
      "x": -202,
      "y": 18008,
      "variableGuid": "A812E467-95BC-419E-B6A6-4341D6347C3A",
      "operations": [
        {
          "id": "add_item",
          "key": "D4AA6196-E54F-4E05-9292-ABBD3AAADBC6",
          "name": "Add item to { variable }",
          "value": "{ $.loop3.item }"
        }
      ]
    },
    {
      "id": "98DB8518-4ADC-4A7D-A6F3-47ED68A00425",
      "type": "VariableBlock",
      "disabled": false,
      "name": "workingAppList",
      "displayName": "Variable - workingAppList",
      "comment": "Empty working list.",
      "childId": "5BD148B9-BDD1-4C37-8EB3-73641F532BB3",
      "inputs": [],
      "settings": [],
      "collapsed": [{ "name": "loop", "isCollapsed": false }],
      "x": -562,
      "y": 16728,
      "variableGuid": "B762B4A7-25F9-4764-BECA-D4461377CE04",
      "operations": [
        {
          "id": "empty",
          "key": "32AB49F1-A48B-4F2B-86FE-3F2CC0AE4A0A",
          "name": "Empty { variable }",
          "value": null
        }
      ]
    },
    {
      "id": "CFCAD086-C1F2-4CCA-878B-5B6ABB27850F",
      "type": "EndpointBlock",
      "disabled": false,
      "name": "rawAPIRequest5",
      "displayName": "Qlik Cloud Services - Raw API Request 5",
      "comment": "Republish app by ID in case there are multiple apps with same name in space.",
      "childId": "CC7C8FB8-9B7E-448D-9D58-393F53575C99",
      "inputs": [
        {
          "id": "4add8960-2078-11ec-be2c-7fc55d771fe6",
          "value": "apps/{ $.importAppFromBase64EncodedFile.attributes.id }/publish",
          "type": "string",
          "structure": []
        },
        {
          "id": "3b992a40-2072-11ec-9f0e-ed01586a7e1b",
          "value": "3ba24260-2072-11ec-af76-279950b1986c",
          "type": "select",
          "displayValue": "PUT",
          "structure": []
        },
        {
          "id": "3b8b9090-2072-11ec-8c77-5195fbb0ca65",
          "value": "{\n  \"data\": \"target\",\n  \"targetId\": \"{$.loop5.item.resourceId}\",\n  \"checkOriginAppId\": false,\n  \"attributes\": {\"name\": \"{$.loop5.item.name}\"}\n}",
          "type": "object",
          "mode": "raw",
          "structure": []
        },
        {
          "id": "993585d0-2839-11ec-b431-df4deed6c1ae",
          "value": null,
          "type": "object",
          "mode": "keyValue",
          "structure": []
        }
      ],
      "settings": [
        {
          "id": "blendr_on_error",
          "value": "stop",
          "type": "select",
          "structure": []
        },
        {
          "id": "automations_censor_data",
          "value": false,
          "type": "checkbox",
          "structure": []
        }
      ],
      "collapsed": [{ "name": "loop", "isCollapsed": false }],
      "x": -322,
      "y": 23148,
      "datasourcetype_guid": "61a87510-c7a3-11ea-95da-0fb0c241e75c",
      "endpoint_guid": "3b75dd80-2072-11ec-9043-3b2aff6123af",
      "endpoint_role": "create"
    },
    {
      "id": "CC7C8FB8-9B7E-448D-9D58-393F53575C99",
      "type": "ShowBlock",
      "disabled": false,
      "name": "output33",
      "displayName": "Output 33",
      "comment": "Status output.",
      "childId": "3ABDBFAA-8E94-4AA9-87C6-AC03B13D58F0",
      "inputs": [
        {
          "id": "input",
          "value": "| {$.loop2.item.name} - Republish | > Republished [{ $.loop5.item.name }]({$.tenantHostname}sense/app/{ $.loop5.item.resourceId }) to [{$.managedSpaceName}]({$.tenantHostname}analytics/catalog?space_filter={$.managedSpaceId}). |",
          "type": "string",
          "structure": []
        }
      ],
      "settings": [
        {
          "id": "display_mode",
          "value": "add",
          "type": "select",
          "structure": []
        }
      ],
      "collapsed": [{ "name": "loop", "isCollapsed": false }],
      "x": -322,
      "y": 23268
    },
    {
      "id": "0D70200F-BF52-4CCD-8FB5-C81C9692D24B",
      "type": "ShowBlock",
      "disabled": false,
      "name": "output16",
      "displayName": "Output 16",
      "comment": "Status output.",
      "childId": "CFCAD086-C1F2-4CCA-878B-5B6ABB27850F",
      "inputs": [
        {
          "id": "input",
          "value": "| {$.loop2.item.name} - Republish | > Attempting to republish { $.loop5.item.name } in [{$.managedSpaceName}]({$.tenantHostname}analytics/catalog?space_filter={$.managedSpaceId}). |",
          "type": "string",
          "structure": []
        }
      ],
      "settings": [
        {
          "id": "display_mode",
          "value": "add",
          "type": "select",
          "structure": []
        }
      ],
      "collapsed": [{ "name": "loop", "isCollapsed": false }],
      "x": -322,
      "y": 23028
    },
    {
      "id": "3ABDBFAA-8E94-4AA9-87C6-AC03B13D58F0",
      "type": "EndpointBlock",
      "disabled": false,
      "name": "rawAPIRequest22",
      "displayName": "Qlik Cloud Services - Raw API Request 22",
      "comment": "Get item ID of app",
      "childId": "AD01998A-BEE0-473B-99F7-E6CC8C4B60CF",
      "inputs": [
        {
          "id": "4add8960-2078-11ec-be2c-7fc55d771fe6",
          "value": "items",
          "type": "string",
          "structure": []
        },
        {
          "id": "3b992a40-2072-11ec-9f0e-ed01586a7e1b",
          "value": "3ba1eed0-2072-11ec-aa67-f118ee53373a",
          "type": "select",
          "displayValue": "GET",
          "structure": []
        },
        {
          "id": "3b8b9090-2072-11ec-8c77-5195fbb0ca65",
          "value": null,
          "type": "object",
          "mode": "keyValue",
          "structure": []
        },
        {
          "id": "993585d0-2839-11ec-b431-df4deed6c1ae",
          "value": [
            { "key": "resourceId", "value": "{ $.loop5.item.resourceId }" },
            { "key": "resourceType", "value": "app" }
          ],
          "type": "object",
          "mode": "keyValue",
          "structure": []
        }
      ],
      "settings": [
        {
          "id": "blendr_on_error",
          "value": "stop",
          "type": "select",
          "structure": []
        },
        {
          "id": "automations_censor_data",
          "value": false,
          "type": "checkbox",
          "structure": []
        }
      ],
      "collapsed": [{ "name": "loop", "isCollapsed": false }],
      "x": -322,
      "y": 23388,
      "datasourcetype_guid": "61a87510-c7a3-11ea-95da-0fb0c241e75c",
      "endpoint_guid": "3b75dd80-2072-11ec-9043-3b2aff6123af",
      "endpoint_role": "create"
    },
    {
      "id": "BA3377B4-6CA3-40CF-9915-DC98B9CBBE52",
      "type": "EndpointBlock",
      "disabled": false,
      "name": "rawAPIRequest23",
      "displayName": "Qlik Cloud Services - Raw API Request 23",
      "comment": "Add the tag to the item.",
      "childId": "7E0CB48E-DCF7-4EAE-B86B-02B2AE708592",
      "inputs": [
        {
          "id": "4add8960-2078-11ec-be2c-7fc55d771fe6",
          "value": "collections/{ $.taggerIds.versionTag }/items",
          "type": "string",
          "structure": []
        },
        {
          "id": "3b992a40-2072-11ec-9f0e-ed01586a7e1b",
          "value": "d8056ca0-2072-11ec-b110-cbae7b0a483b",
          "type": "select",
          "displayValue": "POST",
          "structure": []
        },
        {
          "id": "3b8b9090-2072-11ec-8c77-5195fbb0ca65",
          "value": "{\n  \"id\": \"{ $.rawAPIRequest22.data[0].id }\"\n}",
          "type": "object",
          "mode": "raw",
          "structure": []
        },
        {
          "id": "993585d0-2839-11ec-b431-df4deed6c1ae",
          "value": null,
          "type": "object",
          "mode": "keyValue",
          "structure": []
        }
      ],
      "settings": [
        {
          "id": "blendr_on_error",
          "value": "stop",
          "type": "select",
          "structure": []
        },
        {
          "id": "automations_censor_data",
          "value": false,
          "type": "checkbox",
          "structure": []
        }
      ],
      "collapsed": [{ "name": "loop", "isCollapsed": false }],
      "x": -322,
      "y": 23888,
      "datasourcetype_guid": "61a87510-c7a3-11ea-95da-0fb0c241e75c",
      "endpoint_guid": "3b75dd80-2072-11ec-9043-3b2aff6123af",
      "endpoint_role": "create"
    },
    {
      "id": "7E0CB48E-DCF7-4EAE-B86B-02B2AE708592",
      "type": "ShowBlock",
      "disabled": false,
      "name": "output68",
      "displayName": "Output 68",
      "comment": "Tag added.",
      "childId": null,
      "inputs": [
        {
          "id": "input",
          "value": "| {$.loop2.item.name} - Tags (managed) | > Tag `{ $.workingAppTagVersion }` added to managed space app. |",
          "type": "string",
          "structure": []
        }
      ],
      "settings": [
        {
          "id": "display_mode",
          "value": "add",
          "type": "select",
          "structure": []
        }
      ],
      "collapsed": [{ "name": "loop", "isCollapsed": false }],
      "x": -322,
      "y": 24008
    },
    {
      "id": "AD01998A-BEE0-473B-99F7-E6CC8C4B60CF",
      "type": "FilterListBlock",
      "disabled": false,
      "name": "filterList3",
      "displayName": "Filter List 3",
      "comment": "Filter to tags other than app name.",
      "childId": "BA3377B4-6CA3-40CF-9915-DC98B9CBBE52",
      "inputs": [
        {
          "id": "list",
          "value": "{ $.rawAPIRequest22.data[0].meta.tags }",
          "type": "string",
          "structure": []
        },
        {
          "id": "conditions",
          "value": {
            "mode": "all",
            "conditions": [
              {
                "input1": "name",
                "input2": "{ $.workingAppTagName }",
                "operator": "!="
              }
            ]
          },
          "type": "custom",
          "structure": []
        }
      ],
      "settings": [
        {
          "id": "automations_censor_data",
          "value": false,
          "type": "checkbox",
          "structure": []
        }
      ],
      "collapsed": [{ "name": "loop", "isCollapsed": false }],
      "x": -322,
      "y": 23508,
      "loopBlockId": "151AA8FD-9389-44F0-8522-5AFF01889D68"
    },
    {
      "id": "151AA8FD-9389-44F0-8522-5AFF01889D68",
      "type": "EndpointBlock",
      "disabled": false,
      "name": "rawAPIRequest6",
      "displayName": "Qlik Cloud Services - Raw API Request 6",
      "comment": "Remove tag from item.",
      "childId": "137C7CB4-181B-444B-B0E6-2FE3F7491940",
      "inputs": [
        {
          "id": "4add8960-2078-11ec-be2c-7fc55d771fe6",
          "value": "collections/{ $.filterList3.item.id }/items/{$.rawAPIRequest22.data[0].id}",
          "type": "string",
          "structure": []
        },
        {
          "id": "3b992a40-2072-11ec-9f0e-ed01586a7e1b",
          "value": "3ba2a970-2072-11ec-be02-2dd5c73abb12",
          "type": "select",
          "displayValue": "DELETE",
          "structure": []
        },
        {
          "id": "3b8b9090-2072-11ec-8c77-5195fbb0ca65",
          "value": null,
          "type": "object",
          "mode": "keyValue",
          "structure": []
        },
        {
          "id": "993585d0-2839-11ec-b431-df4deed6c1ae",
          "value": null,
          "type": "object",
          "mode": "keyValue",
          "structure": []
        }
      ],
      "settings": [
        {
          "id": "blendr_on_error",
          "value": "stop",
          "type": "select",
          "structure": []
        },
        {
          "id": "automations_censor_data",
          "value": false,
          "type": "checkbox",
          "structure": []
        }
      ],
      "collapsed": [{ "name": "loop", "isCollapsed": false }],
      "x": -202,
      "y": 23608,
      "datasourcetype_guid": "61a87510-c7a3-11ea-95da-0fb0c241e75c",
      "endpoint_guid": "3b75dd80-2072-11ec-9043-3b2aff6123af",
      "endpoint_role": "create"
    },
    {
      "id": "137C7CB4-181B-444B-B0E6-2FE3F7491940",
      "type": "ShowBlock",
      "disabled": false,
      "name": "output17",
      "displayName": "Output 17",
      "comment": "Tag added.",
      "childId": null,
      "inputs": [
        {
          "id": "input",
          "value": "| {$.loop2.item.name} - Tags (managed) | > Tag `{ $.filterList3.item.name }` removed from managed space app. |",
          "type": "string",
          "structure": []
        }
      ],
      "settings": [
        {
          "id": "display_mode",
          "value": "add",
          "type": "select",
          "structure": []
        }
      ],
      "collapsed": [{ "name": "loop", "isCollapsed": false }],
      "x": -202,
      "y": 23728
    },
    {
      "id": "F959E5AA-4EC0-4284-AA66-F59C788B6B08",
      "type": "EndpointBlock",
      "disabled": false,
      "name": "rawAPIListRequest",
      "displayName": "Qlik Cloud Services - Raw API List Request",
      "comment": "List API keys.",
      "childId": "6C0A56A0-B3A3-4740-858E-57ABB5BF2CAC",
      "inputs": [
        {
          "id": "c3a1c780-2076-11ec-98c4-dd329f9ef682",
          "value": "api-keys",
          "type": "string",
          "structure": []
        },
        {
          "id": "c6915fb0-2839-11ec-a450-03c7d8aebbe7",
          "value": [],
          "type": "object",
          "mode": "keyValue",
          "structure": []
        }
      ],
      "settings": [
        {
          "id": "maxitemcount",
          "value": "",
          "type": "string",
          "structure": []
        },
        {
          "id": "blendr_on_error",
          "value": "stop",
          "type": "select",
          "structure": []
        },
        { "id": "cache", "value": "0", "type": "select", "structure": [] },
        {
          "id": "automations_censor_data",
          "value": false,
          "type": "checkbox",
          "structure": []
        }
      ],
      "collapsed": [{ "name": "loop", "isCollapsed": false }],
      "x": -802,
      "y": 2988,
      "loopBlockId": null,
      "datasourcetype_guid": "61a87510-c7a3-11ea-95da-0fb0c241e75c",
      "endpoint_guid": "4b993580-2072-11ec-8f59-e5aaa8656a36",
      "endpoint_role": "list"
    },
    {
      "id": "81004D2F-88EF-4DAF-AD93-78CFFD551EB7",
      "type": "EndpointBlock",
      "disabled": false,
      "name": "rawAPIRequest7",
      "displayName": "Qlik Cloud Services - Raw API Request 7",
      "comment": "Find existing monitoring app connection.",
      "childId": "1BDB1B6F-3959-4D57-B887-62D7AAABE6CB",
      "inputs": [
        {
          "id": "4add8960-2078-11ec-be2c-7fc55d771fe6",
          "value": "data-connections/{ $.dataConnectionName }",
          "type": "string",
          "structure": []
        },
        {
          "id": "3b992a40-2072-11ec-9f0e-ed01586a7e1b",
          "value": "3ba1eed0-2072-11ec-aa67-f118ee53373a",
          "type": "select",
          "displayValue": "GET",
          "structure": []
        },
        {
          "id": "3b8b9090-2072-11ec-8c77-5195fbb0ca65",
          "value": [],
          "type": "object",
          "mode": "keyValue",
          "structure": []
        },
        {
          "id": "993585d0-2839-11ec-b431-df4deed6c1ae",
          "value": "{\n  \"spaceId\": \"{$.managedSpaceId}\",\n  \"type\": \"connectionname\"\n}",
          "type": "object",
          "mode": "raw",
          "structure": []
        }
      ],
      "settings": [
        {
          "id": "blendr_on_error",
          "value": "ignore",
          "type": "select",
          "displayValue": "Ignore - Continue Automation and ignore errors",
          "structure": []
        },
        {
          "id": "automations_censor_data",
          "value": false,
          "type": "checkbox",
          "structure": []
        }
      ],
      "collapsed": [{ "name": "loop", "isCollapsed": false }],
      "x": -802,
      "y": 14548,
      "datasourcetype_guid": "61a87510-c7a3-11ea-95da-0fb0c241e75c",
      "endpoint_guid": "3b75dd80-2072-11ec-9043-3b2aff6123af",
      "endpoint_role": "create"
    },
    {
      "id": "1BDB1B6F-3959-4D57-B887-62D7AAABE6CB",
      "type": "IfElseBlock",
      "disabled": false,
      "name": "condition13",
      "displayName": "Condition 13",
      "comment": "If connect exists, delete it.",
      "childId": "3852BD8D-3C33-41F4-8BDA-7A000D4DC500",
      "inputs": [
        {
          "id": "conditions",
          "value": {
            "mode": "all",
            "conditions": [
              {
                "input1": "{ $.rawAPIRequest7.id }",
                "input2": null,
                "operator": "notEmpty"
              }
            ]
          },
          "type": "custom",
          "structure": []
        }
      ],
      "settings": [],
      "collapsed": [
        { "name": "both", "isCollapsed": false },
        { "name": "yes", "isCollapsed": false },
        { "name": "no", "isCollapsed": false }
      ],
      "x": -802,
      "y": 14668,
      "childTrueId": "D2202317-6AF5-42C3-A20F-5806BAEABEDA",
      "childFalseId": null
    },
    {
      "id": "5E99BD17-A9BC-4021-BDE0-F4EA60301C7F",
      "type": "EndpointBlock",
      "disabled": false,
      "name": "rawAPIRequest8",
      "displayName": "Qlik Cloud Services - Raw API Request 8",
      "comment": "Create data connection",
      "childId": "5E1CFE7D-C393-4315-85EF-086507112AC6",
      "inputs": [
        {
          "id": "4add8960-2078-11ec-be2c-7fc55d771fe6",
          "value": "data-connections",
          "type": "string",
          "structure": []
        },
        {
          "id": "3b992a40-2072-11ec-9f0e-ed01586a7e1b",
          "value": "d8056ca0-2072-11ec-b110-cbae7b0a483b",
          "type": "select",
          "displayValue": "POST",
          "structure": []
        },
        {
          "id": "3b8b9090-2072-11ec-8c77-5195fbb0ca65",
          "value": "{\n\"dataSourceId\": \"rest\",\n\"qName\": \"{$.dataConnectionName}\",\n\"space\":\"{$.managedSpaceId}\",\n\"connectionProperties\": {\n\"url\": \"https://{$.getCurrentTenantInfo.hostnames[0]}/api/v1/users\",\n\"queryHeaders\": [\n{\n\"name\": \"Authorization\",\n\"value\": \"Bearer { $.rawAPIRequest11.token }\",\n\"encrypt\": true\n}\n],\n\"allowWithConnection\": \"true\"\n}\n}",
          "type": "object",
          "mode": "raw",
          "structure": []
        },
        {
          "id": "993585d0-2839-11ec-b431-df4deed6c1ae",
          "value": null,
          "type": "object",
          "mode": "keyValue",
          "structure": []
        }
      ],
      "settings": [
        {
          "id": "blendr_on_error",
          "value": "stop",
          "type": "select",
          "structure": []
        },
        {
          "id": "automations_censor_data",
          "value": false,
          "type": "checkbox",
          "structure": []
        }
      ],
      "collapsed": [{ "name": "loop", "isCollapsed": false }],
      "x": -802,
      "y": 15308,
      "datasourcetype_guid": "61a87510-c7a3-11ea-95da-0fb0c241e75c",
      "endpoint_guid": "3b75dd80-2072-11ec-9043-3b2aff6123af",
      "endpoint_role": "create"
    },
    {
      "id": "60F588B6-B33A-4275-ACF5-7D83B6A96411",
      "type": "VariableBlock",
      "disabled": false,
      "name": "dataConnectionName",
      "displayName": "Variable - dataConnectionName",
      "comment": "",
      "childId": "81004D2F-88EF-4DAF-AD93-78CFFD551EB7",
      "inputs": [],
      "settings": [],
      "collapsed": [{ "name": "loop", "isCollapsed": false }],
      "x": -802,
      "y": 14428,
      "variableGuid": "218D5568-BA73-49F2-9996-926C40E2AE08",
      "operations": [
        {
          "id": "set_value",
          "key": "49ABB8E7-9FA8-47C1-9212-0346190B156E",
          "name": "Set value of { variable }",
          "value": "monitoring_apps_REST"
        }
      ]
    },
    {
      "id": "3852BD8D-3C33-41F4-8BDA-7A000D4DC500",
      "type": "ShowBlock",
      "disabled": false,
      "name": "output82",
      "displayName": "Output 82",
      "comment": "Creating the data connection.",
      "childId": "5E99BD17-A9BC-4021-BDE0-F4EA60301C7F",
      "inputs": [
        {
          "id": "input",
          "value": "| Data connection | Creating the data connection '{$.dataConnectionName}'. |",
          "type": "string",
          "structure": []
        }
      ],
      "settings": [
        {
          "id": "display_mode",
          "value": "add",
          "type": "select",
          "structure": []
        }
      ],
      "collapsed": [{ "name": "loop", "isCollapsed": false }],
      "x": -802,
      "y": 15188
    },
    {
      "id": "5E1CFE7D-C393-4315-85EF-086507112AC6",
      "type": "ShowBlock",
      "disabled": false,
      "name": "output88",
      "displayName": "Output 88",
      "comment": "Data connection created.",
      "childId": "D2C679AD-2434-474C-9ACC-B95C8232BA8A",
      "inputs": [
        {
          "id": "input",
          "value": "| Data connection | Data connection created in [{$.managedSpaceName}]({$.tenantHostname}spaces/{$.managedSpaceId}/dataconnections). |",
          "type": "string",
          "structure": []
        }
      ],
      "settings": [
        {
          "id": "display_mode",
          "value": "add",
          "type": "select",
          "structure": []
        }
      ],
      "collapsed": [{ "name": "loop", "isCollapsed": false }],
      "x": -802,
      "y": 15428
    },
    {
      "id": "C5498C80-2759-492A-A46F-58DEF52F8F9A",
      "type": "EndpointBlock",
      "disabled": false,
      "name": "rawAPIRequest9",
      "displayName": "Qlik Cloud Services - Raw API Request 9",
      "comment": "Delete the data connection.",
      "childId": "D5C5031D-9058-4671-A035-978DBB1DC8E4",
      "inputs": [
        {
          "id": "4add8960-2078-11ec-be2c-7fc55d771fe6",
          "value": "data-connections/{ $.rawAPIRequest7.id }",
          "type": "string",
          "structure": []
        },
        {
          "id": "3b992a40-2072-11ec-9f0e-ed01586a7e1b",
          "value": "3ba2a970-2072-11ec-be02-2dd5c73abb12",
          "type": "select",
          "displayValue": "DELETE",
          "structure": []
        },
        {
          "id": "3b8b9090-2072-11ec-8c77-5195fbb0ca65",
          "value": null,
          "type": "object",
          "mode": "keyValue",
          "structure": []
        },
        {
          "id": "993585d0-2839-11ec-b431-df4deed6c1ae",
          "value": null,
          "type": "object",
          "mode": "keyValue",
          "structure": []
        }
      ],
      "settings": [
        {
          "id": "blendr_on_error",
          "value": "stop",
          "type": "select",
          "structure": []
        },
        {
          "id": "automations_censor_data",
          "value": false,
          "type": "checkbox",
          "structure": []
        }
      ],
      "collapsed": [{ "name": "loop", "isCollapsed": false }],
      "x": -682,
      "y": 14868,
      "datasourcetype_guid": "61a87510-c7a3-11ea-95da-0fb0c241e75c",
      "endpoint_guid": "3b75dd80-2072-11ec-9043-3b2aff6123af",
      "endpoint_role": "create"
    },
    {
      "id": "D2202317-6AF5-42C3-A20F-5806BAEABEDA",
      "type": "ShowBlock",
      "disabled": false,
      "name": "output89",
      "displayName": "Output 89",
      "comment": "Deleting the data connection.",
      "childId": "C5498C80-2759-492A-A46F-58DEF52F8F9A",
      "inputs": [
        {
          "id": "input",
          "value": "| Data connection | Deleting the data connection '{$.dataConnectionName}'. |",
          "type": "string",
          "structure": []
        }
      ],
      "settings": [
        {
          "id": "display_mode",
          "value": "add",
          "type": "select",
          "structure": []
        }
      ],
      "collapsed": [{ "name": "loop", "isCollapsed": false }],
      "x": -682,
      "y": 14748
    },
    {
      "id": "D5C5031D-9058-4671-A035-978DBB1DC8E4",
      "type": "ShowBlock",
      "disabled": false,
      "name": "output90",
      "displayName": "Output 90",
      "comment": "Deleted the data connection.",
      "childId": null,
      "inputs": [
        {
          "id": "input",
          "value": "| Data connection | Deleted the data connection. |",
          "type": "string",
          "structure": []
        }
      ],
      "settings": [
        {
          "id": "display_mode",
          "value": "add",
          "type": "select",
          "structure": []
        }
      ],
      "collapsed": [{ "name": "loop", "isCollapsed": false }],
      "x": -682,
      "y": 14988
    },
    {
      "id": "56DF743F-3565-4BB7-B484-27DB0E8E13F5",
      "type": "FilterListBlock",
      "disabled": false,
      "name": "filterList6",
      "displayName": "Filter over Qlik Cloud Services - Raw API List Request - Filter List 6",
      "comment": "Filter API keys",
      "childId": "C9CA459B-7C50-4EDF-BD71-300FF8437382",
      "inputs": [
        {
          "id": "list",
          "value": "{ $.rawAPIListRequest }",
          "type": "string",
          "structure": []
        },
        {
          "id": "conditions",
          "value": {
            "mode": "all",
            "conditions": [
              {
                "input1": "description",
                "input2": "{ $.apiKeyName }",
                "operator": "="
              }
            ]
          },
          "type": "custom",
          "structure": []
        }
      ],
      "settings": [
        {
          "id": "automations_censor_data",
          "value": false,
          "type": "checkbox",
          "structure": []
        }
      ],
      "collapsed": [{ "name": "loop", "isCollapsed": false }],
      "x": -802,
      "y": 13448,
      "loopBlockId": "439A8A90-8CAD-4F2F-A673-90754BB6B0AD"
    },
    {
      "id": "7C672EAB-B98A-4BBD-A807-3428671C2D3D",
      "type": "EndpointBlock",
      "disabled": false,
      "name": "rawAPIRequest10",
      "displayName": "Qlik Cloud Services - Raw API Request 10",
      "comment": "Delete the API key.",
      "childId": "848D7B98-1FE1-4584-BF60-F518D86E41F0",
      "inputs": [
        {
          "id": "4add8960-2078-11ec-be2c-7fc55d771fe6",
          "value": "api-keys/{ $.filterList6.item.id }",
          "type": "string",
          "structure": []
        },
        {
          "id": "3b992a40-2072-11ec-9f0e-ed01586a7e1b",
          "value": "3ba2a970-2072-11ec-be02-2dd5c73abb12",
          "type": "select",
          "displayValue": "DELETE",
          "structure": []
        },
        {
          "id": "3b8b9090-2072-11ec-8c77-5195fbb0ca65",
          "value": null,
          "type": "object",
          "mode": "keyValue",
          "structure": []
        },
        {
          "id": "993585d0-2839-11ec-b431-df4deed6c1ae",
          "value": null,
          "type": "object",
          "mode": "keyValue",
          "structure": []
        }
      ],
      "settings": [
        {
          "id": "blendr_on_error",
          "value": "stop",
          "type": "select",
          "structure": []
        },
        {
          "id": "automations_censor_data",
          "value": false,
          "type": "checkbox",
          "structure": []
        }
      ],
      "collapsed": [{ "name": "loop", "isCollapsed": false }],
      "x": -682,
      "y": 13668,
      "datasourcetype_guid": "61a87510-c7a3-11ea-95da-0fb0c241e75c",
      "endpoint_guid": "3b75dd80-2072-11ec-9043-3b2aff6123af",
      "endpoint_role": "create"
    },
    {
      "id": "439A8A90-8CAD-4F2F-A673-90754BB6B0AD",
      "type": "ShowBlock",
      "disabled": false,
      "name": "output34",
      "displayName": "Output 34",
      "comment": "Delete existing key",
      "childId": "7C672EAB-B98A-4BBD-A807-3428671C2D3D",
      "inputs": [
        {
          "id": "input",
          "value": "| API keys | Deleting existing API key named '{ $.filterList6.item.description }'. |",
          "type": "string",
          "structure": []
        }
      ],
      "settings": [
        {
          "id": "display_mode",
          "value": "add",
          "type": "select",
          "structure": []
        }
      ],
      "collapsed": [{ "name": "loop", "isCollapsed": false }],
      "x": -682,
      "y": 13548
    },
    {
      "id": "848D7B98-1FE1-4584-BF60-F518D86E41F0",
      "type": "ShowBlock",
      "disabled": false,
      "name": "output35",
      "displayName": "Output 35",
      "comment": "Existing key deleted",
      "childId": null,
      "inputs": [
        {
          "id": "input",
          "value": "| API keys | API key deleted. |",
          "type": "string",
          "structure": []
        }
      ],
      "settings": [
        {
          "id": "display_mode",
          "value": "add",
          "type": "select",
          "structure": []
        }
      ],
      "collapsed": [{ "name": "loop", "isCollapsed": false }],
      "x": -682,
      "y": 13788
    },
    {
      "id": "C9CA459B-7C50-4EDF-BD71-300FF8437382",
      "type": "ShowBlock",
      "disabled": false,
      "name": "output36",
      "displayName": "Output 36",
      "comment": "Generating new API key.",
      "childId": "28997C80-CF89-4863-BAD6-DD9A15FC72EF",
      "inputs": [
        {
          "id": "input",
          "value": "| API keys | Generating new API key named '{ $.apiKeyName }'. |",
          "type": "string",
          "structure": []
        }
      ],
      "settings": [
        {
          "id": "display_mode",
          "value": "add",
          "type": "select",
          "structure": []
        }
      ],
      "collapsed": [{ "name": "loop", "isCollapsed": false }],
      "x": -802,
      "y": 13948
    },
    {
      "id": "28997C80-CF89-4863-BAD6-DD9A15FC72EF",
      "type": "EndpointBlock",
      "disabled": false,
      "name": "rawAPIRequest11",
      "displayName": "Qlik Cloud Services - Raw API Request 11",
      "comment": "Generate API key.",
      "childId": "A9FB2FA5-C29A-40C7-B008-73D7095910FC",
      "inputs": [
        {
          "id": "4add8960-2078-11ec-be2c-7fc55d771fe6",
          "value": "api-keys",
          "type": "string",
          "structure": []
        },
        {
          "id": "3b992a40-2072-11ec-9f0e-ed01586a7e1b",
          "value": "d8056ca0-2072-11ec-b110-cbae7b0a483b",
          "type": "select",
          "displayValue": "POST",
          "structure": []
        },
        {
          "id": "3b8b9090-2072-11ec-8c77-5195fbb0ca65",
          "value": "{\"description\":\"{ $.apiKeyName }\",\"expiry\":\"{ $.apiKeyDuration }\"}",
          "type": "object",
          "mode": "raw",
          "structure": []
        },
        {
          "id": "993585d0-2839-11ec-b431-df4deed6c1ae",
          "value": null,
          "type": "object",
          "mode": "keyValue",
          "structure": []
        }
      ],
      "settings": [
        {
          "id": "blendr_on_error",
          "value": "stop",
          "type": "select",
          "structure": []
        },
        {
          "id": "automations_censor_data",
          "value": true,
          "type": "checkbox",
          "structure": []
        }
      ],
      "collapsed": [{ "name": "loop", "isCollapsed": false }],
      "x": -802,
      "y": 14068,
      "datasourcetype_guid": "61a87510-c7a3-11ea-95da-0fb0c241e75c",
      "endpoint_guid": "3b75dd80-2072-11ec-9043-3b2aff6123af",
      "endpoint_role": "create"
    },
    {
      "id": "A9FB2FA5-C29A-40C7-B008-73D7095910FC",
      "type": "VariableBlock",
      "disabled": false,
      "name": "apiKeyExpiryDate",
      "displayName": "Variable - apiKeyExpiryDate",
      "comment": "Set the expiry to log later.",
      "childId": "20C5CA2D-D4E9-453B-A275-37990DC61736",
      "inputs": [],
      "settings": [],
      "collapsed": [{ "name": "loop", "isCollapsed": false }],
      "x": -802,
      "y": 14188,
      "variableGuid": "AABC69B3-4AB6-4777-A443-FCFCFDA805C4",
      "operations": [
        {
          "id": "set_value",
          "key": "4401AA06-FDCC-4053-AD20-B479DC6D056C",
          "name": "Set value of { variable }",
          "value": "{$.rawAPIRequest11.expiry}"
        }
      ]
    },
    {
      "id": "20C5CA2D-D4E9-453B-A275-37990DC61736",
      "type": "ShowBlock",
      "disabled": false,
      "name": "output37",
      "displayName": "Output 37",
      "comment": "API key generated",
      "childId": "60F588B6-B33A-4275-ACF5-7D83B6A96411",
      "inputs": [
        {
          "id": "input",
          "value": "| API keys | API key generated, valid until { $.apiKeyExpiryDate }. |",
          "type": "string",
          "structure": []
        }
      ],
      "settings": [
        {
          "id": "display_mode",
          "value": "add",
          "type": "select",
          "structure": []
        }
      ],
      "collapsed": [{ "name": "loop", "isCollapsed": false }],
      "x": -802,
      "y": 14308
    },
    {
      "id": "F4D0DE07-AD02-4C58-9CEA-A3409E738389",
      "type": "VariableBlock",
      "disabled": false,
      "name": "apiKeyName",
      "displayName": "Variable - apiKeyName",
      "comment": "",
      "childId": "1724234E-1EE6-475F-9451-68D9482CC2FE",
      "inputs": [],
      "settings": [],
      "collapsed": [{ "name": "loop", "isCollapsed": false }],
      "x": -802,
      "y": 12688,
      "variableGuid": "DB5AD6FD-CA6D-4BDB-B12B-91C248324EE1",
      "operations": [
        {
          "id": "set_value",
          "key": "3BC25283-EF15-41B0-9528-9DB4D9DDF3FB",
          "name": "Set value of { variable }",
          "value": "QCMA - { $.managedSpaceId }"
        }
      ]
    },
    {
      "id": "1724234E-1EE6-475F-9451-68D9482CC2FE",
      "type": "FilterListBlock",
      "disabled": false,
      "name": "filterList7",
      "displayName": "Filter over Qlik Cloud Services - Raw API List Request - Filter List 7",
      "comment": "Filter to user's API keys.",
      "childId": "6306F3F3-BD9F-4E0B-8C41-EE8E21DD421C",
      "inputs": [
        {
          "id": "list",
          "value": "{ $.rawAPIListRequest }",
          "type": "string",
          "structure": []
        },
        {
          "id": "conditions",
          "value": {
            "mode": "all",
            "conditions": [
              {
                "input1": "sub",
                "input2": "{ $.getCurrentUserId }",
                "operator": "="
              },
              {
                "input1": "description",
                "input2": "{ $.apiKeyName }",
                "operator": "!="
              }
            ]
          },
          "type": "custom",
          "structure": []
        }
      ],
      "settings": [
        {
          "id": "automations_censor_data",
          "value": false,
          "type": "checkbox",
          "structure": []
        }
      ],
      "collapsed": [{ "name": "loop", "isCollapsed": true }],
      "x": -802,
      "y": 12808,
      "loopBlockId": null
    },
    {
      "id": "6306F3F3-BD9F-4E0B-8C41-EE8E21DD421C",
      "type": "IfElseBlock",
      "disabled": false,
      "name": "condition29",
      "displayName": "Condition 29",
      "comment": "If user has max number of API keys already, exit.",
      "childId": "56DF743F-3565-4BB7-B484-27DB0E8E13F5",
      "inputs": [
        {
          "id": "conditions",
          "value": {
            "mode": "all",
            "conditions": [
              {
                "input1": "{ count: { $.filterList7 } }",
                "input2": "{ $.rawAPIRequest2.max_keys_per_user }",
                "operator": ">="
              }
            ]
          },
          "type": "custom",
          "structure": []
        }
      ],
      "settings": [],
      "collapsed": [
        { "name": "both", "isCollapsed": false },
        { "name": "yes", "isCollapsed": false },
        { "name": "no", "isCollapsed": false }
      ],
      "x": -802,
      "y": 12928,
      "childTrueId": "1AEE9D36-5C63-4334-8758-ECD4056C36B3",
      "childFalseId": null
    },
    {
      "id": "1AEE9D36-5C63-4334-8758-ECD4056C36B3",
      "type": "VariableBlock",
      "disabled": false,
      "name": "errorTitle",
      "displayName": "Variable - errorTitle",
      "comment": "API keys are disabled on the tenant, and must be enabled (until TLV-750 implemented).",
      "childId": "489D6F65-006C-4D20-81A8-578A09FE4E8E",
      "inputs": [],
      "settings": [],
      "collapsed": [{ "name": "loop", "isCollapsed": false }],
      "x": -682,
      "y": 13008,
      "variableGuid": "407730A6-EC96-4337-BE80-CF4C0D552F08",
      "operations": [
        {
          "id": "set_value",
          "key": "1BC10F4C-68C2-42E9-9000-25865B076073",
          "name": "Set value of { variable }",
          "value": "User cannot create any more API keys."
        }
      ]
    },
    {
      "id": "489D6F65-006C-4D20-81A8-578A09FE4E8E",
      "type": "VariableBlock",
      "disabled": false,
      "name": "errorDetail",
      "displayName": "Variable - errorDetail",
      "comment": "Variable to store detailed error message.",
      "childId": "5B590615-6F1A-4D9E-9A37-DB7042C17B13",
      "inputs": [],
      "settings": [],
      "collapsed": [{ "name": "loop", "isCollapsed": false }],
      "x": -682,
      "y": 13128,
      "variableGuid": "1BF2068B-106E-4D58-BC51-884F1810F03C",
      "operations": [
        {
          "id": "set_value",
          "key": "1BC10F4C-68C2-42E9-9000-25865B076073",
          "name": "Set value of { variable }",
          "value": "Exiting, current user cannot create more API keys. Either delete some unused API keys, or increase the maximum keys per user."
        }
      ]
    },
    {
      "id": "5B590615-6F1A-4D9E-9A37-DB7042C17B13",
      "type": "GotoBlock",
      "disabled": false,
      "name": "goToLabel11",
      "displayName": "Go To Label 11",
      "comment": "Go to the label named error.",
      "childId": null,
      "inputs": [
        {
          "id": "label",
          "value": "EF82AD29-E2CF-44C9-A7DB-24C784618756",
          "type": "select",
          "displayValue": "error",
          "structure": []
        }
      ],
      "settings": [],
      "collapsed": [{ "name": "loop", "isCollapsed": false }],
      "x": -682,
      "y": 13248
    },
    {
      "id": "2E61A575-F621-4713-B446-C1BAC52D8834",
      "type": "VariableBlock",
      "disabled": false,
      "name": "reloadNow",
      "displayName": "Variable - reloadNow",
      "comment": "Configure whether to run a reload on every run. By default, set to 1, which will reload every app. Set to 0 to skip a reload.",
      "childId": "8151B3E3-471C-496B-BB87-F586C46E3CF4",
      "inputs": [],
      "settings": [],
      "collapsed": [{ "name": "loop", "isCollapsed": false }],
      "x": -802,
      "y": -2352,
      "variableGuid": "12BED549-8F76-4D83-B484-F6121E71753E",
      "operations": [
        {
          "id": "set_value",
          "key": "2A53EE0E-A13C-45CD-9E07-D012532B33CA",
          "name": "Set value of { variable }",
          "value": "1"
        }
      ]
    },
    {
      "id": "8151B3E3-471C-496B-BB87-F586C46E3CF4",
      "type": "VariableBlock",
      "disabled": false,
      "name": "reloadNow#2",
      "displayName": "Variable - reloadNow 2",
      "comment": "Configure whether to run a reload on every run. By default, set to 1, which will reload every app. Set to 0 to skip a reload.",
      "childId": "6AC0239B-01A8-47F9-AD4C-ED09CCB2B83F",
      "inputs": [],
      "settings": [],
      "collapsed": [{ "name": "loop", "isCollapsed": false }],
      "x": -802,
      "y": -2232,
      "variableGuid": "12BED549-8F76-4D83-B484-F6121E71753E",
      "operations": [
        {
          "id": "set_value",
          "key": "2A53EE0E-A13C-45CD-9E07-D012532B33CA",
          "name": "Set value of { variable }",
          "value": "1"
        }
      ]
    },
    {
      "id": "9745F8DD-9BEC-4E02-B0B9-B275B8BCFCB1",
      "type": "IfElseBlock",
      "disabled": false,
      "name": "condition30",
      "displayName": "Condition 30",
      "comment": "If reloadNow=1, reload",
      "childId": null,
      "inputs": [
        {
          "id": "conditions",
          "value": {
            "mode": "all",
            "conditions": [
              { "input1": "{ $.reloadNow }", "operator": "=", "input2": "1" }
            ]
          },
          "type": "custom",
          "structure": {}
        }
      ],
      "settings": [],
      "collapsed": [
        { "name": "both", "isCollapsed": false },
        { "name": "yes", "isCollapsed": false },
        { "name": "no", "isCollapsed": false }
      ],
      "x": -802,
      "y": 25108,
      "childTrueId": "5D9D41EA-BC05-4138-83E8-9486E94834B9",
      "childFalseId": null
    },
    {
      "id": "5D9D41EA-BC05-4138-83E8-9486E94834B9",
      "type": "ForEachBlock",
      "disabled": false,
      "name": "loop7",
      "displayName": "Loop 7",
      "comment": "Loop over liveApps.",
      "childId": null,
      "inputs": [
        {
          "id": "input",
          "value": "{ $.liveApps }",
          "type": "string",
          "structure": {}
        }
      ],
      "settings": [
        {
          "id": "automations_censor_data",
          "value": false,
          "type": "checkbox",
          "structure": {}
        }
      ],
      "collapsed": [{ "name": "loop", "isCollapsed": false }],
      "x": -682,
      "y": 25188
    }
  ],
  "variables": [
    {
      "guid": "E3084D5D-4DE7-428E-BDE0-440DCD055EDD",
      "name": "sharedSpaceName",
      "type": "string"
    },
    {
      "guid": "247B71DE-30E7-4526-AC3D-BE5E17AA9194",
      "name": "managedSpaceName",
      "type": "string"
    },
    {
      "guid": "9679AB7C-F7EB-4A7F-A217-B2F9F14CE7E5",
      "name": "versionsToKeep",
      "type": "number"
    },
    {
      "guid": "DE390532-B1F9-4098-BBE0-B7E6101BD502",
      "name": "sharedSpaceId",
      "type": "string"
    },
    {
      "guid": "407730A6-EC96-4337-BE80-CF4C0D552F08",
      "name": "errorTitle",
      "type": "string"
    },
    {
      "guid": "1BF2068B-106E-4D58-BC51-884F1810F03C",
      "name": "errorDetail",
      "type": "string"
    },
    {
      "guid": "E413E2FB-E4E7-4AFF-8894-6D27792FA8D8",
      "name": "spaceRoles",
      "type": "list"
    },
    {
      "guid": "B6C34135-EF0E-42EF-AC0D-621D8A8A165D",
      "name": "managedSpaceId",
      "type": "string"
    },
    {
      "guid": "F6ED0768-9852-46AF-B822-2172586824B7",
      "name": "cleanupCounter",
      "type": "number"
    },
    {
      "guid": "3723D829-3B14-4B68-AAFE-63966A7025E6",
      "name": "tenantHostname",
      "type": "string"
    },
    {
      "guid": "64E41053-153C-41E1-8E96-441CE6CCC379",
      "name": "refreshConnectorCredentials",
      "type": "number"
    },
    {
      "guid": "69E3DE89-62A4-4A45-A797-81D480D8BBC9",
      "name": "currentTemplateVersionNum",
      "type": "number"
    },
    {
      "guid": "CD9F0C76-28B4-482E-A218-EDE5763F6807",
      "name": "userRoles",
      "type": "list"
    },
    {
      "guid": "4283B5F6-E6C0-492F-AA5B-21195FFF74DF",
      "name": "userPermissions",
      "type": "list"
    },
    {
      "guid": "51DCB139-A5E7-427D-8E9C-9382DB8A530C",
      "name": "apiKeyDuration",
      "type": "string"
    },
    {
      "guid": "30110534-1BFC-442B-9374-62A4A28EBBBC",
      "name": "allAvailableMonitoringAppNames",
      "type": "list"
    },
    {
      "guid": "4FCFD564-CA0B-4516-AD61-A1A2EE9CF38C",
      "name": "manifest",
      "type": "object"
    },
    {
      "guid": "AD716F55-666C-4730-B830-F2D97A502F6B",
      "name": "isCapacityTenant",
      "type": "number"
    },
    {
      "guid": "8E1D15E6-7269-4E6B-A87E-AF56400A2F7A",
      "name": "configuredMonitoringApps",
      "type": "list"
    },
    {
      "guid": "1ECFDB29-BC7A-4B7A-AE5F-2A2DBE77B1E0",
      "name": "monitoringAppsToInstall",
      "type": "list"
    },
    {
      "guid": "09C608F2-CF67-4C9A-983E-F39019D443B9",
      "name": "requiredRoles",
      "type": "list"
    },
    {
      "guid": "CB55538C-0F1A-4871-98DD-C68EC5B00D84",
      "name": "missingRoles",
      "type": "list"
    },
    {
      "guid": "2E37F6E5-BE30-44ED-B0B6-B544ECEAAB9E",
      "name": "existingAppList",
      "type": "list"
    },
    {
      "guid": "B762B4A7-25F9-4764-BECA-D4461377CE04",
      "name": "workingAppList",
      "type": "list"
    },
    {
      "guid": "12A37AC8-CD9C-41FC-9626-508B24997C86",
      "name": "workingAppTagName",
      "type": "string"
    },
    {
      "guid": "4CFD6FDB-6937-45CE-8677-203A280087D1",
      "name": "workingAppTagVersion",
      "type": "string"
    },
    {
      "guid": "D8F8BD27-8FF5-42FF-82ED-0EE947E55327",
      "name": "workingAppExists",
      "type": "number"
    },
    {
      "guid": "996190EC-165A-4CF1-A3B6-363B8F0DDF31",
      "name": "workingAppBinary",
      "type": "string"
    },
    {
      "guid": "AE6C347F-BAAD-4FD0-A820-80AFEE588B29",
      "name": "workingAppTags",
      "type": "object"
    },
    {
      "guid": "FA7C823B-3AA8-41EA-990F-21837758447A",
      "name": "taggerIds",
      "type": "object"
    },
    {
      "guid": "A812E467-95BC-419E-B6A6-4341D6347C3A",
      "name": "liveApps",
      "type": "list"
    },
    {
      "guid": "218D5568-BA73-49F2-9996-926C40E2AE08",
      "name": "dataConnectionName",
      "type": "string"
    },
    {
      "guid": "AABC69B3-4AB6-4777-A443-FCFCFDA805C4",
      "name": "apiKeyExpiryDate",
      "type": "string"
    },
    {
      "guid": "DB5AD6FD-CA6D-4BDB-B12B-91C248324EE1",
      "name": "apiKeyName",
      "type": "string"
    },
    {
      "guid": "12BED549-8F76-4D83-B484-F6121E71753E",
      "name": "reloadNow",
      "type": "number"
    },
    {
      "guid": "1DD1A773-F576-44BC-A988-3238BB3C336C",
      "name": "reloadSchedule",
      "type": "string"
    }
  ]
}
